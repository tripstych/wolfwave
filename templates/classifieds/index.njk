{# Classified Ad Search Results #}
{% extends "system/layouts/base-with-system.njk" %}

{% block title %}{{ filters.q or "Browse" }} â€” Classifieds{% endblock %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="/styles/classifieds.css">
{% endblock %}

{% block content %}
<section class="classifieds-search">
  <div class="classifieds-header">
    <h1>{% if filters.q %}Results for "{{ filters.q }}"{% else %}Browse Listings{% endif %}</h1>
    <a href="/customer/ads/create" class="post-ad-btn">+ Post Ad</a>
  </div>

  {# Use system search component #}
  {% include "system/components/classifieds-search-bar.njk" %}

  <p class="result-count">{{ ads.length }} listing{{ "s" if ads.length != 1 }} found</p>

  <div class="listing-grid">
    {% for ad in ads %}
    <a href="/classifieds/{{ ad.slug }}" class="listing-card">
      {% include "system/components/classifieds-ad-card.njk" %}
    </a>
    {% else %}
    <div class="no-results">
      <div class="no-results-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
          <path d="M8 11h6"></path>
        </svg>
      </div>
      <h3>No listings found</h3>
      <p>{% if filters.q %}No results for "{{ filters.q }}". Try different keywords or broaden your filters.{% else %}There are no listings yet. Be the first to post one!{% endif %}</p>
    </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
