{% extends "layouts/base.njk" %}

{% block styles %}
.features-header {
  padding: 6rem 0 3rem;
  text-align: center;
  max-width: 700px;
  margin: 0 auto;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  padding: 3rem 0 6rem;
}

.feature-card {
  padding: 2rem;
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 1rem;
  transition: transform 0.2s, box-shadow 0.2s;
  text-align: left;
}

.feature-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.feature-icon {
  width: 3rem;
  height: 3rem;
  margin-bottom: 1.5rem;
  background: var(--color-primary);
  color: white;
  border-radius: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.feature-card h3 {
  margin-bottom: 1rem;
  font-size: 1.25rem;
}

.feature-card p {
  color: var(--color-text-muted);
  margin-bottom: 0;
  line-height: 1.6;
}

.page-body {
  padding: 4rem 0;
  background: var(--color-surface);
}
{% endblock %}

{% block content %}
<section class="page-body">
  <div class="container">
    <header class="features-header">
      <h1 data-cms-region="page_title" data-cms-type="text" data-cms-label="Page Title">
        {{ content.page_title | default("Powerful Features") }}
      </h1>
      <p data-cms-region="page_subtitle" data-cms-type="textarea" data-cms-label="Page Subtitle">
        {{ content.page_subtitle | default("Everything you need to succeed is right here at your fingertips.") }}
      </p>
    </header>

    <div class="features-grid" 
         data-cms-region="features" 
         data-cms-type="repeater" 
         data-cms-label="Features Grid"
         data-cms-fields='[{"name":"icon","type":"image","label":"Icon (SVG or Image)"},{"name":"title","type":"text","label":"Feature Title"},{"name":"description","type":"textarea","label":"Feature Description"}]'>
      
      {% for item in content.features %}
      <div class="feature-card">
        {% if item.icon %}
        <div class="feature-icon">
          <img src="{{ item.icon }}" alt="{{ item.title }}" style="width: 24px; height: 24px;">
        </div>
        {% endif %}
        <h3>{{ item.title }}</h3>
        <p>{{ item.description }}</p>
      </div>
      {% else %}
      {# Fallback for preview/empty state #}
      <div class="feature-card">
        <div class="feature-icon">âœ¨</div>
        <h3>Secure by Design</h3>
        <p>Your data is protected with industry-standard encryption and security protocols.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">âš¡</div>
        <h3>Lightning Fast</h3>
        <p>Optimized for speed so your users never have to wait for your content to load.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">ðŸ“ˆ</div>
        <h3>Scalable</h3>
        <p>Grow your business without worrying about infrastructure bottlenecks or limits.</p>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<section class="main-content" style="padding: 4rem 0;">
  <div class="container">
    <article data-cms-region="bottom_content" data-cms-type="richtext" data-cms-label="Bottom Content">
      {{ content.bottom_content | safe | default("<p>Add any additional info here.</p>") }}
    </article>
  </div>
</section>
{% endblock %}

