{% extends "layouts/base.njk" %}

{% block styles %}
.restaurant-hero {
  position: relative;
  text-align: center;
  padding: 8rem 1rem;
  background-image: url('{{ content.hero_image | default("/images/placeholders/1920x600.svg") }}');
  background-size: cover;
  background-position: center;
  color: white;
}
.hero-overlay {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5);
  z-index: 1;
}
.hero-content {
  position: relative;
  z-index: 2;
}
.menu-section {
  padding: 4rem 1rem;
  background: #fff;
}
.menu-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
}
.menu-item {
  border-bottom: 1px dotted #ccc;
  padding-bottom: 1rem;
}
.menu-header {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
}
.chef-bio {
  padding: 4rem 1rem;
  background: #f8f8f8;
  display: flex;
  align-items: center;
  gap: 2rem;
}
.chef-bio img {
  width: 300px;
  height: 300px;
  object-fit: cover;
  border-radius: 50%;
}
@media (max-width: 768px) {
  .chef-bio {
    flex-direction: column;
    text-align: center;
  }
}
{% endblock %}

{% block content %}
{# Hero Section #}
<div data-cms-region="hero_image" data-cms-type="image" data-cms-label="Hero Background Image"></div>
<section class="restaurant-hero">
  <div class="hero-overlay"></div>
  <div class="hero-content container">
    <h1 class="display-1" data-cms-region="hero_title" data-cms-type="text" data-cms-label="Restaurant Name">
      {{ content.hero_title | default('La Bistro') }}
    </h1>
    <p class="lead" data-cms-region="hero_subtitle" data-cms-type="textarea" data-cms-label="Tagline">
      {{ content.hero_subtitle | default('Fine dining in the heart of the city.') }}
    </p>
    <a href="{{ content.reservation_link | default('#reservations') }}" class="btn btn-primary btn-lg">
      Book a Table
    </a>
  </div>
</section>

{# Menu Highlights #}
<section class="menu-section container">
  <h2 class="text-center">Chef's Highlights</h2>
  <div class="menu-grid" 
       data-cms-region="menu_items" 
       data-cms-type="repeater" 
       data-cms-label="Menu Items"
       data-cms-fields='[
         {"name":"name", "type":"text", "label":"Dish Name"},
         {"name":"price", "type":"text", "label":"Price (e.g. $25)"},
         {"name":"description", "type":"textarea", "label":"Ingredients/Description"},
         {"name":"photo", "type":"image", "label":"Dish Photo (Optional)"}
       ]'>
    {% for item in content.menu_items %}
      <div class="menu-item">
        <div class="menu-header">
          <span>{{ item.name }}</span>
          <span>{{ item.price }}</span>
        </div>
        <p>{{ item.description }}</p>
      </div>
    {% else %}
      <div class="menu-item">
        <div class="menu-header">
          <span>Seared Scallops</span>
          <span>$28</span>
        </div>
        <p>With cauliflower puree and truffle oil.</p>
      </div>
      <div class="menu-item">
        <div class="menu-header">
          <span>Wagyu Beef Burger</span>
          <span>$24</span>
        </div>
        <p>Aged cheddar, caramelized onions, brioche bun.</p>
      </div>
    {% endfor %}
  </div>
</section>

{# Chef Bio #}
<section class="chef-bio container">
  <div class="chef-image">
    <img src="{{ content.chef_image | default('/images/placeholders/300x300.svg') }}" 
         alt="Chef" 
         data-cms-region="chef_image" 
         data-cms-type="image" 
         data-cms-label="Chef Photo">
  </div>
  <div class="chef-text">
    <h2>Meet Chef {{ content.chef_name | default('Gusteau') }}</h2>
    <div data-cms-region="chef_bio" data-cms-type="richtext" data-cms-label="Chef Biography">
      {{ content.chef_bio | safe | default('<p>Our chef has over 20 years of experience in Michelin-star kitchens...</p>') }}
    </div>
  </div>
</section>

{# Location & Hours #}
<section class="container py-5">
  <div class="row">
    <div class="col-md-6">
      <h3>Hours</h3>
      <div data-cms-region="hours" data-cms-type="textarea" data-cms-label="Opening Hours">
        {{ content.hours | newline_to_br | safe | default('Mon-Sun: 5pm - 11pm') }}
      </div>
    </div>
    <div class="col-md-6">
      <h3>Location</h3>
      <div data-cms-region="address" data-cms-type="textarea" data-cms-label="Address">
        {{ content.address | newline_to_br | safe | default('123 Main St, New York, NY 10001') }}
      </div>
    </div>
  </div>
</section>

{% endblock %}
