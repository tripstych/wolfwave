{% extends "layouts/base.njk" %}

{% block styles %}
.real-estate-hero {
  background: #f0f0f0;
  padding: 6rem 1rem;
  text-align: center;
}
.property-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  padding: 4rem 1rem;
}
.property-card {
  border: 1px solid #ddd;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.property-card img {
  width: 100%;
  height: 200px;
  object-fit: cover;
}
.property-details {
  padding: 1rem;
}
.agent-section {
  background: #2c3e50;
  color: white;
  padding: 4rem 1rem;
  text-align: center;
}
.agent-grid {
  display: flex;
  justify-content: center;
  gap: 2rem;
  flex-wrap: wrap;
}
.agent-card img {
  border-radius: 50%;
  width: 150px;
  height: 150px;
  object-fit: cover;
}
{% endblock %}

{% block content %}
{# Search Hero #}
<section class="real-estate-hero">
  <div class="container">
    <h1 data-cms-region="hero_title" data-cms-type="text" data-cms-label="Main Headline">
      {{ content.hero_title | default('Find Your Dream Home') }}
    </h1>
    <div class="search-box">
      <input type="text" placeholder="City, Zip, or Address..." style="padding: 1rem; width: 60%; max-width: 500px;">
      <button class="btn btn-primary">Search</button>
    </div>
  </div>
</section>

{# Featured Listings #}
<section class="container">
  <h2 class="text-center my-5">Featured Listings</h2>
  <div class="property-grid"
       data-cms-region="listings"
       data-cms-type="repeater"
       data-cms-label="Featured Properties"
       data-cms-fields='[
         {"name":"address", "type":"text", "label":"Address"},
         {"name":"price", "type":"text", "label":"Price"},
         {"name":"beds", "type":"text", "label":"Bedrooms"},
         {"name":"baths", "type":"text", "label":"Bathrooms"},
         {"name":"image", "type":"image", "label":"Main Photo"}
       ]'>
    {% for prop in content.listings %}
      <div class="property-card">
        <img src="{{ prop.image }}" alt="{{ prop.address }}">
        <div class="property-details">
          <h3>{{ prop.price }}</h3>
          <p>{{ prop.address }}</p>
          <small>{{ prop.beds }} Beds | {{ prop.baths }} Baths</small>
        </div>
      </div>
    {% else %}
      <div class="property-card">
        <img src="/images/placeholders/400x300.svg" alt="House">
        <div class="property-details">
          <h3>$450,000</h3>
          <p>123 Maple Dr, Suburbia</p>
          <small>3 Beds | 2 Baths</small>
        </div>
      </div>
      <div class="property-card">
        <img src="/images/placeholders/400x300.svg" alt="Condo">
        <div class="property-details">
          <h3>$320,000</h3>
          <p>456 City View, Downtown</p>
          <small>2 Beds | 2 Baths</small>
        </div>
      </div>
    {% endfor %}
  </div>
</section>

{# Agents #}
<section class="agent-section">
  <div class="container">
    <h2>Meet Our Agents</h2>
    <div class="agent-grid"
         data-cms-region="agents"
         data-cms-type="repeater"
         data-cms-label="Agent Profiles"
         data-cms-fields='[
           {"name":"name", "type":"text", "label":"Name"},
           {"name":"phone", "type":"text", "label":"Phone"},
           {"name":"photo", "type":"image", "label":"Photo"}
         ]'>
      {% for agent in content.agents %}
        <div class="agent-card">
          <img src="{{ agent.photo }}" alt="{{ agent.name }}">
          <h3>{{ agent.name }}</h3>
          <p>{{ agent.phone }}</p>
        </div>
      {% else %}
         <div class="agent-card">
          <img src="/images/placeholders/150x150.svg" alt="Agent">
          <h3>Jane Doe</h3>
          <p>(555) 123-4567</p>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% endblock %}
