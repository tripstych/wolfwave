customElements.get("pickup-availability")||customElements.define("pickup-availability",class extends HTMLElement{constructor(){super(),this.hasAttribute("available")&&(this.onClickRefreshList=this.onClickRefreshList.bind(this),this.fetchAvailability(this.dataset.variantId))}fetchAvailability(variantId){let rootUrl=this.dataset.rootUrl;rootUrl.endsWith("/")||(rootUrl=rootUrl+"/");const variantSectionUrl=`${rootUrl}variants/${variantId}/?section_id=pickup-availability`;fetch(variantSectionUrl).then(response=>response.text()).then(text=>{const sectionInnerHTML=new DOMParser().parseFromString(text,"text/html").querySelector(".shopify-section");this.renderPreview(sectionInnerHTML)}).catch(e=>{const button=this.querySelector("button");button&&button.removeEventListener("click",this.onClickRefreshList),this.renderError()})}onClickRefreshList(evt){this.fetchAvailability(this.dataset.variantId)}renderError(){this.innerHTML="",this.querySelector("button")&&this.querySelector("button").addEventListener("click",this.onClickRefreshList)}renderPreview(sectionInnerHTML){const drawer=document.querySelector(".pickup-availability-drawer");if(drawer&&drawer.remove(),!sectionInnerHTML.querySelector(".pickup-availability-information")){this.innerHTML="",this.removeAttribute("available");return}this.innerHTML=sectionInnerHTML.querySelector(".pickup-availability-information").innerHTML,this.setAttribute("available",""),document.getElementById("Pickup-Availability").innerHTML=sectionInnerHTML.querySelector(".side-availability").innerHTML;const button=this.querySelector("button");button&&button.addEventListener("click",evt=>{document.getElementById("Pickup-Availability").classList.toggle("active"),document.getElementsByTagName("body")[0].classList.toggle("open-cc"),evt.preventDefault()})}});
//# sourceMappingURL=/cdn/shop/t/15/assets/pickup-availability.js.map?v=105428679355683734981763113117
