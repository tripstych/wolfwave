import.meta;var Bo=Object.defineProperty,cr=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),hn=e=>{throw TypeError(e)},Fo=(e,t,n)=>t in e?Bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t,n)=>Fo(e,typeof t!="symbol"?t+"":t,n),pn=(e,t,n)=>t.has(e)||hn("Cannot "+n),v=(e,t,n)=>(pn(e,t,"read from private field"),n?n.call(e):t.get(e)),j=(e,t,n)=>t.has(e)?hn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),F=(e,t,n,r)=>(pn(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),nt=function(e,t){this[0]=e,this[1]=t},Ut=(e,t,n)=>{var r=(i,s,l,c)=>{try{var u=n[i](s),m=(s=u.value)instanceof nt,h=u.done;Promise.resolve(m?s[0]:s).then(g=>m?r(i==="return"?i:"next",s[1]?{done:g.done,value:g.value}:g,l,c):l({value:g,done:h})).catch(g=>r("throw",g,l,c))}catch(g){c(g)}},a=i=>o[i]=s=>new Promise((l,c)=>r(i,s,l,c)),o={};return n=n.apply(e,t),o[cr("asyncIterator")]=()=>o,a("next"),a("throw"),a("return"),o},at=(e,t,n)=>(t=e[cr("asyncIterator")])?t.call(e):(e=e[cr("iterator")](),t={},n=(r,a)=>(a=e[r])&&(t[r]=o=>new Promise((i,s,l)=>(o=a.call(e,o),l=o.done,Promise.resolve(o.value).then(c=>i({value:c,done:l}),s)))),n("next"),n("return"),t);function $o(){Array.prototype.flatMap||(Array.prototype.flatMap=function(e,t){const n=[];for(let r=0;r<this.length;r++){const a=e.call(t,this[r],r,this);if(Array.isArray(a))for(const o of a)n.push(o);else n.push(a)}return n})}$o();const Ho=":host{display:flex;align-items:center;justify-content:center}";class Go extends HTMLElement{constructor(){super(...arguments),d(this,"size","18px"),d(this,"color","gray")}connectedCallback(){var t,n;this.attachShadow({mode:"open"}),this.size=(t=this.getAttribute("size"))!=null?t:this.size,this.color=(n=this.getAttribute("color"))!=null?n:this.color,this.render();const r=document.createElement("style");r.textContent=Ho,this.shadowRoot.appendChild(r)}render(){const t=this.shadowRoot,n='\n      width="'.concat(this.size,'"\n      height="').concat(this.size,'"\n      xmlns="http://www.w3.org/2000/svg"\n      aria-hidden="true"\n    ');t.innerHTML="\n      <svg ".concat(n,' viewBox="0 0 20 20" fill="').concat(this.color,'">\n        <path d="M17.1 4.3l-1.4-1.4-5.7 5.7-5.7-5.7-1.4 1.4 5.7 5.7-5.7 5.7 1.4 1.4 5.7-5.7 5.7 5.7 1.4-1.4-5.7-5.7z"/>\n      </svg>\n    ')}}const Vo="#overlay{position:fixed;width:100%;height:100%;background:#0006;top:0;left:0;z-index:2147483647;animation:modalPop .3s ease-out}#modal{position:fixed;top:20%;left:50%;width:100%;max-width:383px;transform:translate(-50%,-100%);background:#fff;color:#000;border-radius:5px;animation:modalSlideInFromTop .3s forwards}@keyframes modalPop{0%{opacity:0}to{opacity:1}}@keyframes modalSlideInFromTop{0%{transform:translate(-50%,-100%)}to{transform:translate(-50%)}}@keyframes modalSlideInFromBottom{0%{transform:translate(-50%,100%)}to{transform:translate(-50%)}}@media only screen and (max-width: 640px){#modal{top:auto;bottom:0;animation:modalSlideInFromBottom .3s forwards}}#modal footer{padding:0 21px 21px}#modal header{display:flex;justify-content:space-between;padding:21px 21px 16px}#title{font-size:21px;font-weight:600;line-height:25.2px;margin:0;word-wrap:break-word;overflow-wrap:break-word}.capitalize:first-letter{display:inline-block;text-transform:capitalize}#content{text-align:left;padding:0 21px 16px;overflow:auto;max-height:50vh}#modal #content p{margin:0;font-size:14px;line-height:21px}#close-icon,#close-button{cursor:pointer}#close-icon{min-width:24px;background:transparent;padding:0;border:none}#close-button{width:100%;padding:16px 21px;color:#fff;background-color:#1773b0;border:none;border-radius:5px;font-size:14px;line-height:21px;font-family:inherit}#close-button:hover,#close-button:active{background:#136f99}#close-button:active,#close-button:focus{box-shadow:0 0 0 4px #1990c640}";function jo(e){return ma(e).map(t=>t instanceof Error?t:new ga("[".concat(typeof t,"] ").concat(qo(t).slice(0,10240))))}function ma(e,t=0){return t>=20?[e,"Truncated cause stack"]:e instanceof Error&&e.cause?[e,...ma(e.cause,t+1)]:[e]}function qo(e){var t;if(typeof e=="function")return"".concat(e.name||"anonymous");if(typeof e!="string")try{return(t=JSON.stringify(e))!=null?t:typeof e}catch(n){}return"".concat(e)}var ga=class extends Error{constructor(){super(...arguments),d(this,"name","BugsnagInvalidError")}},ya=/^\s*at .*(\S+:\d+|\(native\))/m,Wo=/^(eval@)?(\[native code])?$/;function Yo(e){return e.stack?e.stack.match(ya)?Ko(e):Qo(e):[]}function fa(e){if(e.indexOf(":")===-1)return[e];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]?Number(t[2]):void 0,t[3]?Number(t[3]):void 0]}function Ko(e){return e.stack.split("\n").filter(t=>!!t.match(ya)).map(t=>{let n=t.replace(/^\s+/,"").replace(/^.*?\s+/,""),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],""):n;let a=fa(r?r[1]:n),o=r&&n||void 0,i=["eval","<anonymous>"].indexOf(a[0])>-1?void 0:a[0];return{method:o,file:i,lineNumber:a[1],columnNumber:a[2]}})}function Qo(e){return e.stack.split("\n").filter(t=>!t.match(Wo)).map(t=>{if(t.indexOf("@")===-1&&t.indexOf(":")===-1)return{method:t};let n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),a=r&&r[1]?r[1]:void 0,o=fa(t.replace(n,""));return{method:a,file:o[0],lineNumber:o[1],columnNumber:o[2]}})}var dr="5",Jo=class{constructor(e){d(this,"breadcrumbs",[]),d(this,"apiKey"),d(this,"plugins"),d(this,"appId"),d(this,"appType"),d(this,"appVersion"),d(this,"releaseStage"),d(this,"locale"),d(this,"userAgent"),d(this,"metadata"),d(this,"persistedMetadata"),d(this,"onError"),d(this,"onPostErrorListeners",[]),d(this,"endpoints"),d(this,"session");var t,n,r;this.apiKey=e.apiKey,this.appType=e.appType,this.appId=e.appId,this.appVersion=e.appVersion,this.releaseStage=e.releaseStage,this.locale=e.locale,this.userAgent=e.userAgent,this.metadata=e.metadata,this.onError=e.onError,this.persistedMetadata={},this.endpoints=(t=e.endpoints)!=null?t:{notify:"https://error-analytics-production.shopifysvc.com",sessions:"https://error-analytics-sessions-production.shopifysvc.com/observeonly"},this.plugins=(n=e.plugins)!=null?n:[],this.plugins.forEach(a=>a.load(this)),this.leaveBreadcrumb("Bugsnag started",void 0,"state"),((r=e.withSessionTracking)==null||r)&&(this.session={id:this.getRandomUUID(),startedAt:new Date().toISOString(),events:{handled:0,unhandled:0}},this.startSession())}addMetadata(e){for(let t of Object.keys(e))this.persistedMetadata[t]=e[t]}getSessionId(){var e;return(e=this.session)==null?void 0:e.id}leaveBreadcrumb(e,t,n="manual"){this.breadcrumbs.push({name:e,metaData:t,type:n,timestamp:new Date().toISOString()})}notify(e,{errorClass:t,severity:n,severityType:r,handled:a=!0,metadata:o,context:i,groupingHash:s}={}){var l,c;let u=jo(e),m={...this.metadata,...this.persistedMetadata,...o},h=this.buildBugsnagEvent(u,{errorClass:t,severityType:r,handled:a,severity:n,metadata:m,context:i,groupingHash:s});if(((c=(l=this.onError)==null?void 0:l.call(this,h,e))==null||c)&&this.releaseStage!=="development"){this.updateAndAppendSessionInformation(h);let g=this.sendToBugsnag(h);return this.onPostErrorListeners.forEach(y=>y(h,e)),g}return Promise.resolve()}addOnPostError(e){this.onPostErrorListeners.push(e)}updateAndAppendSessionInformation(e){this.session&&(e.unhandled?this.session.events.unhandled++:this.session.events.handled++,e.session=this.session)}buildBugsnagEvent(e,{errorClass:t,severity:n="error",severityType:r="handledException",handled:a,metadata:o={},context:i,groupingHash:s}){let l=new Date().toISOString(),{breadcrumbs:c,appId:u,appType:m,appVersion:h,releaseStage:g,locale:y,userAgent:f}=this,A=e.map((E,D)=>({errorClass:D===0&&t!=null?t:E.name,stacktrace:ba(u,E),message:E.message,type:"browserjs"}));return{payloadVersion:dr,exceptions:A,severity:n,severityReason:{type:r},unhandled:!a,app:{id:u,type:m,version:h,releaseStage:g},device:{time:l,locale:y,userAgent:f},breadcrumbs:c,context:i,metaData:o,groupingHash:s}}async startSession(){var e,t;if(this.releaseStage==="development"){console.log("Skipping error logging session tracking in development mode");return}let{apiKey:n}=this,r={notifier:{name:"Bugsnag JavaScript",version:"7.22.2",url:"https://github.com/bugsnag/bugsnag-js"},app:{version:this.appVersion,releaseStage:this.releaseStage,type:this.appType},device:{id:this.appId,locale:this.locale,userAgent:this.userAgent},sessions:[this.session]};try{await fetch(this.endpoints.sessions,{method:"POST",headers:{"Content-Type":"application/json","Bugsnag-Api-Key":n,"Bugsnag-Payload-Version":dr,"Bugsnag-Sent-At":(t=(e=this.session)==null?void 0:e.startedAt)!=null?t:new Date().toISOString()},body:JSON.stringify(r,mn())})}catch(a){console.warn("[bugsnag-light] failed to start session"),console.warn(a)}}async sendToBugsnag(e){let{apiKey:t}=this,n={apiKey:t,notifier:{name:"Bugsnag JavaScript",version:"7.22.2",url:"https://github.com/bugsnag/bugsnag-js"},events:[e]};try{await fetch(this.endpoints.notify,{method:"POST",headers:{"Content-Type":"application/json","Bugsnag-Api-Key":t,"Bugsnag-Payload-Version":dr,"Bugsnag-Sent-At":e.device.time},body:JSON.stringify(n,mn())})}catch(r){console.warn("[bugsnag-light] failed to send an event"),console.warn(r)}}getRandomUUID(){try{return crypto.randomUUID()}catch(e){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let n=Math.random()*16|0;return(t==="x"?n:n&3|8).toString(16)})}}};function ba(e,t){let n=Yo(t).map(r=>{var a,o,i,s;let l=(a=r.file)==null?void 0:a.includes(e);return{method:(o=r.method)!=null?o:"",file:(i=r.file)!=null?i:"",lineNumber:(s=r.lineNumber)!=null?s:0,columnNumber:r.columnNumber,inProject:l}});if(t instanceof ga){let r=n.findIndex(a=>a.method.endsWith("notify"));r>-1&&(n=n.slice(r+1))}return n}function mn(){let e=new WeakSet;return function(t,n){if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular]";e.add(n)}return n}}var Xo=class gp extends Error{constructor(t){super(t),d(this,"reason"),this.name="BreadcrumbsPluginFetchError",Object.setPrototypeOf(this,gp.prototype)}};function Zo(e,{metadata:t}={}){let n=window.onerror;window.onerror=(r,a,o,i,s)=>{s&&e.notify(s,{severityType:"unhandledException",handled:!1,metadata:t}),typeof n=="function"&&n.apply(window.onerror,[r,a,o,i,s])}}function ti(e,{metadata:t}={}){window.addEventListener("unhandledrejection",n=>{n.reason&&n.reason instanceof Error&&n.reason.stack&&!(n.reason instanceof Xo)&&e.notify(n.reason,{severityType:"unhandledPromiseRejection",handled:!1,metadata:t})})}function be(e){try{const t=new RegExp("(^| )".concat(e,"=([^;]+)")).exec(document.cookie);if(t){const n=t[2];try{return decodeURIComponent(n)}catch(r){return n}}return null}catch(t){return null}}const Sr={BRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--branded",UNBRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--unbranded",MORE_PAYMENT_OPTION_BUTTON:"shopify-payment-button__more-options"},ei={DARK:"apple-pay--dark",LIGHT:"apple-pay--light"},ri=44,ni="_shopify_y",_a=6,ai="discount_code",$r="https://static-na.payments-amazon.com",Hr="".concat($r,"/checkout.js"),Ea="https://www.paypal.com",Aa="https://pay.google.com",L={CURRENCY_CHANGE:"wallet_currency_change",CAPTCHA_REQUIRED:"wallet_captcha_required",NOT_ENOUGH_STOCK:"wallet_not_enough_stock",DYNAMIC_TAX:"wallet_dynamic_tax",PRICE_INCREASED:"wallet_price_increased",PAYMENT_METHOD_NOT_APPLICABLE:"wallet_payment_method_not_applicable",INVALID_PAYMENT_DEFERRED_PAYMENT_REQUIRED:"wallet_invalid_payment_deferred_payment_required",LOCALIZATION_EXTENSION_FIELD_ERROR:"wallet_localization_extension_field_error",ACCOUNT_INFO_MISMATCH:"wallet_account_info_mismatch",WALLET_PROCESSING_FAILED:"wallet_processing_failed",UNSUPPORTED_APPLE_PAY_PAYMENT_METHOD:"wallet_unsupported_apple_pay_payment_method",UNSUPPORTED_GOOGLE_PAY_PAYMENT_METHOD:"wallet_unsupported_google_pay_payment_method",PAYMENTS_COUNTRY_INVALID:"wallet_payments_country_invalid"},Ca="VALIDATION_CUSTOM",Sa="portable-wallets",xt={BUTTON:"accelerated-checkout-button",CONTAINER:"accelerated-checkout-button-container"},Pa="unknown",va={name:"buy_it_now",supports_subs:!0,supports_def_opts:!0,wallet_params:{}};function Ia(e){try{return!e.toString().includes("[native code]")}catch(t){return!0}}const ur=new Map,oi={checkDuplicate({errorClass:e,message:t}){if(ur.has(e)){const n=ur.get(e);if(n.has(t))return!0;n.add(t)}else ur.set(e,new Set([t]));return!1},reset(){}};var Ae;class et extends Error{constructor(t,{groupingHash:n,...r}={}){super(t,r),j(this,Ae),d(this,"autogenerateHash",!1),d(this,"useHashPrefix",!1),F(this,Ae,n)}get groupingHash(){var t;const n=(t=v(this,Ae))!=null?t:this.autogenerateHash?ii(this.message):"";return(this.useHashPrefix?"".concat(this.name,"-").concat(n):n)||void 0}}Ae=new WeakMap;function ii(e){return e.toLowerCase().slice(0,100).replace(/[^a-z0-9\s]/g,"").trim().split(/\s+/).slice(0,5).join("-")}const ve="DeveloperError";class rt extends Error{constructor({code:t,message:n},r){const a="An unexpected error happened likely because of customizations made to HTML/JavaScript on this site ".concat(n);super("[".concat(t,"]: ").concat(a),r),d(this,"name",ve),d(this,"code"),this.code=t}}const ka="SilencedError";class tt extends Error{constructor(){super(...arguments),d(this,"name",ka)}}class si extends Error{constructor(){super(...arguments),d(this,"name","MissingConfigError")}}class ut extends et{constructor(){super(...arguments),d(this,"name","NoResponseError"),d(this,"useHashPrefix",!0),d(this,"autogenerateHash",!0)}}class Ie extends et{constructor(t,{errorDetails:n}){const r=Ie.generateGraphQLGroupingHash(t,n);super(t,{groupingHash:r}),d(this,"errorDetails"),d(this,"useHashPrefix",!0),this.name="GraphQLResponseError",this.errorDetails=n}static generateGraphQLGroupingHash(t,n){const{operationName:r}=n,a=this.getErrorMessageCategoryFromMessage(t);return r?"".concat(r,"-").concat(a):a}static getErrorMessageCategoryFromMessage(t){const n=[[/Variable \$\w+ of type \w+!? was provided invalid value/i,"graphql-input-validation"],[/Cannot read propert(?:y|ies)(?: .+)? of (?:null|undefined)/i,"null-property-access"],[/(?:null|undefined) is not an object/i,"null-not-object"]];for(const[o,i]of n){const s=t.match(o);if(s){const l=s[1];return l?"".concat(i,"-").concat(l):i}}let r=t;const a=[/^GraphQL response error for \w+:\s*(with status \d+\s*=>\s*|=>\s*)?/i,/^GraphQL\s+Client:\s*/i,/^GraphQL\s+response\s+error\s+for\s+\w+:\s*with\s+status\s+\d+\s*=>\s*/i,/An error occurred while fetching from the API. Review 'graphQLErrors' for details./i];for(const o of a)r=r.replace(o,"");return r=r.slice(0,100),r.toLowerCase().replace(/[^a-z0-9\s]/g,"").trim().split(/\s+/).slice(0,5).join("-")||"unknown-error"}}const Ta="IgnoredGraphQLResponseError";class jt extends Ie{constructor(t,{reason:n,errorDetails:r}){super(t,{errorDetails:r}),d(this,"reason"),this.name=Ta,this.reason=n}}class Na extends et{constructor(t){const n="[".concat(t,"] completion returned null result");super(n,{groupingHash:"".concat(t,"-expected-completion-null-result")})}}class gn extends et{constructor(){super(...arguments),d(this,"name","DigitalPhysicalMismatchIssueError"),d(this,"useHashPrefix",!0)}}function O(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var li=0;function _t(e){return"__private_"+li+++"_"+e}function rr(e){return Object.entries(e).map(([t,n])=>({key:t,value:{stringValue:String(n)}}))}function ci(e){return Object.entries(e).map(([t,n])=>({key:t,value:Ra(n)}))}function Ra(e){if(Array.isArray(e))return{arrayValue:{values:e.map(t=>Ra(t))}};switch(typeof e){case"boolean":return{boolValue:!!e};case"number":return{doubleValue:Number(e)};case"string":default:return{stringValue:String(e)}}}const Gr=1,di=ui(5,2,12);function ui(e,t,n){const r=[0];for(let a=0;a<n;a++){const o=Math.floor(e*t**a);r.push(o)}return r}var St=_t("exporter"),J=_t("attributes"),W=_t("metrics"),Pt=_t("logs");class hi{constructor({exporter:t,attributes:n}){Object.defineProperty(this,St,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:[]}),Object.defineProperty(this,Pt,{writable:!0,value:[]}),O(this,St)[St]=t,O(this,J)[J]=n!=null?n:{}}addAttributes(t){O(this,J)[J]={...O(this,J)[J],...t}}histogram({name:t,value:n,unit:r,bounds:a,attributes:o,scale:i}){const s=Date.now()*1e6;a?O(this,W)[W].push({name:t,type:"histogram",value:n,unit:r,timeUnixNano:s,attributes:o,bounds:a}):O(this,W)[W].push({name:t,type:"exponential_histogram",value:n,unit:r,timeUnixNano:s,attributes:o,scale:i})}counter({name:t,value:n,unit:r,attributes:a}){const o=Date.now()*1e6;O(this,W)[W].push({name:t,type:"counter",value:n,unit:r,timeUnixNano:o,attributes:a})}gauge({name:t,value:n,unit:r,attributes:a}){const o=Date.now()*1e6;O(this,W)[W].push({name:t,type:"gauge",value:n,unit:r,timeUnixNano:o,attributes:a})}log({body:t,attributes:n}){const r=Date.now()*1e6;O(this,Pt)[Pt].push({timeUnixNano:r,body:t,attributes:n})}async exportMetrics(){const t={};O(this,W)[W].forEach(r=>{switch(r.attributes={...O(this,J)[J],...r.attributes},r.type){case"histogram":pi(t,r);break;case"exponential_histogram":mi(t,r);break;case"counter":gi(t,r);break;case"gauge":yi(t,r);break}});const n=Object.values(t);n.length!==0&&(O(this,W)[W]=[],await O(this,St)[St].exportMetrics(n))}async exportLogs(){const t=O(this,Pt)[Pt].map(n=>{const r={timeUnixNano:n.timeUnixNano,observedTimeUnixNano:n.timeUnixNano,attributes:ci({...O(this,J)[J],...n.attributes})};return n.body&&(r.body={stringValue:n.body}),r});t.length!==0&&(O(this,Pt)[Pt]=[],await O(this,St)[St].exportLogs(t))}}function pi(e,t){var n;const{name:r,value:a,unit:o,timeUnixNano:i,attributes:s}=t,l=(n=t.bounds)!==null&&n!==void 0?n:di,c=new Array(l.length+1).fill(0);e[r]||(e[r]={name:r,unit:o||"1",histogram:{aggregationTemporality:Gr,dataPoints:[]}});for(let u=0;u<c.length;u++){const m=l[u];if(m===void 0)c[u]=1;else if(a<=m){c[u]=1;break}}e[r].histogram.dataPoints.push({startTimeUnixNano:i,timeUnixNano:i,count:1,sum:a,min:a,max:a,bucketCounts:c,explicitBounds:l,attributes:rr(s!=null?s:{})})}function mi(e,t){const{name:n,value:r,unit:a,timeUnixNano:o,attributes:i,scale:s}=t;e[n]||(e[n]={name:n,unit:a||"1",exponentialHistogram:{aggregationTemporality:Gr,dataPoints:[]}});const l=r<=0?0:r,c=s||3,u=2**c/Math.log(2),m=Math.ceil(Math.log(r)*u)-1,h=r<=0?1:0,g={offset:0,bucketCounts:[]},y={offset:r>0?m:0,bucketCounts:r>0?[1]:[]};e[n].exponentialHistogram.dataPoints.push({attributes:rr(i!=null?i:{}),startTimeUnixNano:o,timeUnixNano:o,count:1,sum:l,scale:c,zeroCount:h,positive:y,negative:g,min:l,max:l,zeroThreshold:0})}function gi(e,t){const{name:n,value:r,unit:a,timeUnixNano:o,attributes:i}=t;e[n]||(e[n]={name:n,unit:a||"1",sum:{aggregationTemporality:Gr,isMonotonic:!0,dataPoints:[]}}),e[n].sum.dataPoints.push({startTimeUnixNano:o,timeUnixNano:o,asDouble:r,attributes:rr(i!=null?i:{})})}function yi(e,t){const{name:n,value:r,unit:a,timeUnixNano:o,attributes:i}=t;e[n]||(e[n]={name:n,unit:a||"1",gauge:{dataPoints:[]}}),e[n].gauge.dataPoints.push({startTimeUnixNano:o,timeUnixNano:o,asDouble:r,attributes:rr(i!=null?i:{})})}var oe=_t("url"),vt=_t("serviceName"),ie=_t("logger"),se=_t("fetchFn");class fi{constructor(t,n,r){Object.defineProperty(this,oe,{writable:!0,value:void 0}),Object.defineProperty(this,vt,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:void 0}),Object.defineProperty(this,se,{writable:!0,value:void 0}),O(this,oe)[oe]=t.replace(/\/v1\/(logs|metrics|traces)\/?$/,""),O(this,vt)[vt]=n,O(this,ie)[ie]=r==null?void 0:r.logger,O(this,se)[se]=r==null?void 0:r.fetchFn}async exportMetrics(t){const n={resourceMetrics:[{resource:{attributes:[{key:"service.name",value:{stringValue:O(this,vt)[vt]}}]},scopeMetrics:[{scope:{name:"open-telemetry-mini-client",version:"1.1.0",attributes:[]},metrics:t}]}]};await this.exportTo(n,"/v1/metrics")}async exportLogs(t){const n={resourceLogs:[{resource:{attributes:[{key:"service.name",value:{stringValue:O(this,vt)[vt]}}]},scopeLogs:[{scope:{name:"open-telemetry-mini-client",version:"1.1.0",attributes:[]},logRecords:t}]}]};await this.exportTo(n,"/v1/logs")}async exportTo(t,n){var r;const a=await this.exporterFetch()("".concat(O(this,oe)[oe]).concat(n),{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if((r=O(this,ie)[ie])===null||r===void 0||r.log({status:a.status}),!a.ok){if(a.status===400){const o=await a.text();throw new pe("Invalid OpenTelemetry Data: ".concat(o))}if(a.status===429||a.status===503){const o=await a.text(),i=a.headers.get("Retry-After"),s=i?{seconds:Number(i)}:void 0;throw new pe("Server did not accept data",{errorData:o,retryAfter:s,body:t})}throw new pe("Server responded with ".concat(a.status))}}exporterFetch(){return O(this,se)[se]||fetch}}class pe extends Error{constructor(t,n){super(t),this.metadata=void 0,this.name="OpenTelemetryClientError",this.metadata=n}}const bi="https://otlp-http-production.shopifysvc.com",wi="portable_wallets";var Yt;class _i{constructor(t){j(this,Yt),F(this,Yt,t)}async exportMetrics(t){var n;try{await v(this,Yt).exportMetrics(t)}catch(r){if(r instanceof pe){const a=(n=r.metadata)==null?void 0:n.retryAfter;if(a){await new Promise(o=>{setTimeout(()=>{this.exportMetrics(t),o()},a.seconds*1e3)});return}}console.error("Suppressed error while exporting metrics:",r,r instanceof Error?r.cause:void 0)}}async exportLogs(t){var n;try{await v(this,Yt).exportLogs(t)}catch(r){if(r instanceof pe){const a=(n=r.metadata)==null?void 0:n.retryAfter;if(a){await new Promise(o=>{setTimeout(()=>{this.exportLogs(t),o()},a.seconds*1e3)});return}}console.error("Suppressed error while exporting logs:",r,r instanceof Error?r.cause:void 0)}}}Yt=new WeakMap;const Ei=new fi(bi,wi),Ai=new _i(Ei),I=new hi({exporter:Ai}),Ci="TelemetryExportError",Da="LimitedCartQueryError";class Si extends Error{constructor(){super(...arguments),d(this,"name",Da)}}const Oa=["OpenTelemetryClientError",ka,Ci,Ta,ve],Pi=["Load failed","Failed to fetch","when attempting to fetch resource","GraphQL mutation failed with status 404","Component closed",'"isTrusted":true',...Oa],yn=new Map([["TypeError","Illegal constructor"],[Da,"Limited cart query returned no response"],["AbortError","Fetch is aborted"],["SyntaxError","The string did not match the expected pattern."]]),vi=["chrome-lighthouse","meta-externalads","crawler","spider","scraper","facebookexternalhit","googleother","bot"];function Ii(e){const t=e.exceptions[0];return ki()?"silenced-user-agent":Ti(e)?"empty-stack-trace":Ni(t)?"spin":Ri()?"monkey-patch":xi(e)?"external-error":Mi(e)?"developer-error":Li(t.message)?"discarded-message":zi(e)?"discarded-error-class":Ui(t)?"discarded-class-message":Bi(e)?"unactionable-invalid-error":Di(e)||null}function ki(){const e=navigator.userAgent.toLowerCase();return vi.some(t=>e.includes(t))}function Ti(e){return e.exceptions[0].stacktrace.length===0}function Ni(e){return e.stacktrace.some(t=>{var n;return(n=t.file)==null?void 0:n.includes("spin.dev")})}function Ri(){return[HTMLElement,Event,document.createElement].some(Ia)}function Di(e){const t=e.exceptions.map(n=>n.stacktrace.filter(r=>!Oi(r)));return t.some(n=>{var r;return!((r=n[0])!=null&&r.inProject)})?"external-trigger":t.some(n=>n.filter(r=>r.inProject).every(r=>[Ea,$r,Aa].some(a=>r.file.startsWith(a))))?"wallet-sdk-stack-trace":null}function Oi(e){return e.file.includes("native code")||e.file.includes("/cdn/wpm/")}function xi(e){return!e.exceptions[0].stacktrace.some(t=>t.inProject)}function Li(e){return Pi.some(t=>e==null?void 0:e.includes(t))}function Mi(e){const t=e.exceptions.some(n=>n.errorClass===ve);return t&&console.error(e.exceptions[0]),t}function zi(e){return e.exceptions.some(t=>Oa.includes(t.errorClass))}function Ui(e){const t=e.errorClass,n=e.message;return yn.has(t)&&(n==null?void 0:n.includes(yn.get(t)))}function Bi(e){return e.exceptions[0].errorClass==="BugsnagInvalidError"&&e.unhandled}var T=(e=>(e.ButtonRender="portable_wallets_button_render",e.Decelerated="portable_wallets_decelerated",e.DeliveryWrongNumberOfLines="portable_wallets_delivery_wrong_number_of_lines",e.InitCompleted="portable_wallets_init_completed",e.InstrumentLoadEligibility="portable_wallets_instrument_load_eligibility",e.InstrumentLoadTime="portable_wallets_instrument_load_time",e.InstrumentLoadTimeFromPageLoad="portable_wallets_instrument_load_time_from_page_load",e.MonorailProduceError="portable_wallets_monorail_produce_error",e.SheetClicked="portable_wallets_sheet_clicked",e.SheetCancelled="portable_wallets_sheet_cancelled",e.SheetFailed="portable_wallets_sheet_failed",e.UpdateFailed="portable_wallets_update_failed",e.PayPalTokenCreationError="portable_wallets_paypal_token_creation_error",e.AuthorizationAttempt="portable_wallets_authorization_attempt",e.AuthorizationComplete="portable_wallets_authorization_complete",e.CartTokenMissing="portable_wallets_cart_token_missing",e.RemovePersonalDataResult="portable_wallets_cart_remove_personal_data_result",e.GooglePayNotEligibleWebview="portable_wallets_google_pay_not_eligible_webview",e.WalletConfigDeveloperError="portable_wallets_wallet_config_developer_error",e.LegacyCartCookie="portable_wallets_legacy_cart_cookie",e.StyleBackwardsCompatibility="portable_wallets_style_backwards_compatibility",e.StyleBackwardsCompatibilityExecutionTime="portable_wallets_style_backwards_compatibility_execution_time",e.StyleBackwardsCompatibilityRules="portable_wallets_style_backwards_compatibility_rules",e.AmazonPayLoadRetries="portable_wallets_amazon_pay_sdk_load_retries",e.DynamicTaxFailed="portable_wallets_dynamic_tax_failed",e.SheetLoaded="portable_wallets_sheet_loaded",e.ErrorTriggered="portable_wallets_error_triggered",e.GooglePayNullCartOnAuthorize="portable_wallets_google_pay_null_cart_on_authorize",e.GooglePayIso3166AdministrativeAreaFallback="portable_wallets_google_pay_iso3166_administrative_area_fallback",e.UnrecoverableCartError="portable_wallets_unrecoverable_cart_error",e.ShopPayPersonalizedIframeLoadTime="portable_wallets_shop_pay_personalized_iframe_load_time",e.ShopPayPersonalizedIframeLoadTimeFromPageLoad="portable_wallets_shop_pay_personalized_iframe_load_time_from_page_load",e.PaymentCompletedAfterAbort="portable_wallets_payment_completed_after_abort",e.WalletSessionAbortError="portable_wallets_wallet_session_abort_error",e.CartPaymentUpdateRetryResult="portable_wallets_cart_payment_update_retry_result",e.ProductFormError="portable_wallets_product_form_error",e))(T||{}),Tt=(e=>(e.InstrumentSdkLoaded="portable_wallets_instrument_sdk_loaded",e.InstrumentSdkFailed="portable_wallets_instrument_sdk_failed",e.InstrumentSdkEligible="portable_wallets_instrument_sdk_eligible",e.InstrumentSdkNotEligible="portable_wallets_instrument_sdk_not_eligible",e))(Tt||{}),b=(e=>(e.BuyItNow="BuyItNow",e.MoreOptions="MoreOptions",e.ApplePay="ApplePay",e.PayPal="PayPal",e.Venmo="Venmo",e.GooglePay="GooglePay",e.ShopPay="ShopPay",e.MetaPay="FacebookPay",e.BuyWithPrime="BuyWithPrime",e.AmazonPay="AmazonPay",e.Unknown="Unknown",e))(b||{}),$=(e=>(e.InvalidQuantity="InvalidQuantity",e.VariantRequiresSellingPlan="VariantRequiresSellingPlan",e.SellingPlanNotApplicable="SellingPlanNotApplicable",e.MerchandiseIdInvalid="MerchandiseIdInvalid",e.IgnoredResponseError="IgnoredGraphQLResponseError",e.NoResponse="NoResponse",e.InvalidInput="InvalidInput",e.MerchandiseNotApplicable="MerchandiseNotApplicable",e.ProductFormError="ProductFormError",e.MerchandiseLineTransformersRunError="MerchandiseLineTransformersRunError",e.GiftCardRecipientInvalid="GiftCardRecipientInvalid",e))($||{}),N=(e=>(e.CartPage="cart_page",e.CartAjax="cart_ajax",e.ProductPage="product",e.Checkout="checkout",e.Unknown="unknown",e))(N||{}),de=(e=>(e.CartChange="/cart/change",e.CartUpdate="/cart/update",e.CartAdd="/cart/add",e.CartClear="/cart/clear",e))(de||{}),Dt=(e=>(e.OneTimePurchase="ONE_TIME_PURCHASE",e.Subscription="SUBSCRIPTION",e))(Dt||{});let nr=Fi();function Fi(){return{shop_id:Pa,debug:!1,pageType:N.Unknown,cartPrepare:!1}}function xa(e){Object.assign(nr,e)}function Vr(){const{debug:e,...t}=nr;return t}function $i(){return nr.debug}function jr(){return nr.pageType}function Hi(e,t){const n=e.exceptions[0];if(!n||!n.message||oi.checkDuplicate(n))return!1;const r=ji(t);Gi(e,r);let a=null;try{a=Ii(e)}catch(i){const s=i;console.error(s);const l={errorClass:"UnfilterableError",message:"Could not properly filter error with message: ".concat(s.message),stacktrace:ba(Sa,s)};e.exceptions.unshift(l)}Yi(a);const o=a==null;return(o||$i())&&Ki({errorClass:n.errorClass,message:n.message,stacktrace:JSON.stringify(n.stacktrace),filterResult:a,metadata:JSON.stringify(e.metaData)}),o}function Gi(e,t){var n,r,a,o,i;const s=(a=(r=(n=window.ShopifyAnalytics)==null?void 0:n.lib)==null?void 0:r.trekkie)==null?void 0:a.defaultAttributes;e.context=window.location.pathname,e.request||(e.request={}),e.request.url=window.location.href,e.device.orientation=(i=(o=window.screen)==null?void 0:o.orientation)==null?void 0:i.type,qi(e),Wi(e),e.groupingHash=Vi(t);const{shop_id:l,...c}=Vr();e.metaData={...e.metaData,shop:{shopId:l,...c,...e.metaData.shop},custom:{...e.metaData.custom,customFetch:Ia(fetch)},error_source:{shop_id:l},monorail:s},t[0]instanceof Ie&&(e.metaData.graphql={...t[0].errorDetails},t[0]instanceof jt&&(e.metaData.graphql.reason=t[0].reason))}function Vi(e){for(const t of e)if("groupingHash"in t&&t.groupingHash)return t.groupingHash.toString()}function ji(e){const t=[];let n=e;for(;n instanceof Error&&t.length<20;){t.push(n);const r="cause"in n?n.cause:null;if(!r)break;n=r}return t}function qi(e){for(const t of e.exceptions)for(const n of t.stacktrace)[Ea,$r,Aa].some(r=>n.file.startsWith(r))&&(n.inProject=!0)}function Wi(e){var t;for(const n of e.exceptions)for(const r of n.stacktrace)(t=r.file)!=null&&t.includes("portable-wallets")&&(r.file=r.file.split("#")[0].split("?")[0])}function Yi(e){I.counter({name:T.ErrorTriggered,value:1,attributes:{filterResult:e||"valid-error"}})}function Ki(e){const t=Vr();I.log({body:"Bugsnag Error",attributes:{...t,shop_id:t.shop_id,shopId:t.shop_id,...e}})}var pa;const Qi={apiKey:"e6b446c1ebe782e2b2fc7eb8ef0dc791",appId:Sa,appVersion:"0.1.38",releaseStage:"production",locale:"en",userAgent:navigator.userAgent,metadata:{user:{id:(pa=be(ni))!=null?pa:"unknown"},app:{release:"abe08c95e4c3e0f5aea68a34e58c7c06ad9b18fb"}},onError:Hi},w=new Jo(Qi);w.addOnPostError(e=>{w.leaveBreadcrumb("Bugsnag Error Notified",{errorClass:e.exceptions[0].errorClass,message:e.exceptions[0].message},"error")});const Ji={en:{express_checkout:"Express checkout",show_more_options:"Show more",hide_more_options:"Hide more",instruments_copy:{checkout:{buy_now:"Buy it now"}},error_dialogs:{checkout:{title:"Transaction failed",generic_error:"Checkout is currently unavailable due to technical problems. Please try again in a few minutes.",button_text:"Close"},product:{out_of_stock:"This item is no longer available.",gift_card_recipient_validation_error:"The specified gift card recipient is invalid."},wallet:{title:"%{wallet} unavailable",generic_error:"There was an issue with %{wallet}. Try again or use a different payment method.",eligibility_error:"Items that were eligible for %{wallet} are no longer in your cart."}},more_payment_options:"More payment options",action:{view:"View %{content}"},subscriptions:{cancellation_policy:"Cancellation policy",policy_not_found:"The subscription policy could not be found. Refresh the page or contact us for more information."},managed_markets:{terms_and_conditions:"Merchant of Record Terms and Conditions",privacy_policy:"Merchant of Record Privacy Policy",policy_not_found:"The policy could not be found. Refresh the page or contact us for more information"},shipping_methods:{connect_shipping_methods:"%{methodOne} and %{methodTwo}",choose_delivery_strategy:"Choose a delivery method"},delivery_promises:{connect_delivery_promises:"%{promiseOne} and %{promiseTwo}"},order_summary:{total:"Total",subtotal:"Subtotal",duties:"Duties",taxes:"Estimated taxes",shipping:"Shipping",shipping_one_time_purchase:"Shipping (One-time purchase)",shipping_subscription:"Shipping (Subscription)",discount:"Discount",subscriptions:{recurring_total_tooltip_line:"Does not include shipping, tax, duties, or any applicable discounts",recurring_totals:"%{fixedPrice} every %{interval}",recurring_totals_with_policies:{one:"First payment %{fixedPrice}, then %{recurringPrice} every %{interval}",other:"First %{count} payments %{fixedPrice} each, then %{recurringPrice} every %{interval}"},recurring_total_intervals:{day:{one:"day",other:"%{count} days"},month:{one:"month",other:"%{count} months"},week:{one:"week",other:"%{count} weeks"},year:{one:"year",other:"%{count} years"}}}},brand:{amazon_pay:"Amazon Pay",apple_pay:"Apple Pay",buy_with_prime:"Buy with Prime",paypal:"PayPal",google_pay:"Google Pay",shop_pay:"Shop Pay"},buy_with_button_content:"Buy with %{wallet}",pay_with_button_content:"Pay with %{wallet}",shop_promise_delivery:{same_day:"Same-day delivery",next_day:"Next-day delivery",two_day:"2-day delivery"},errors:{address_unserviceable:"%{shopName} does not currently deliver to this address. Use a different address to complete your purchase.",missing:{email:"Enter an email address",first_name:"Enter a first name",last_name:"Enter a last name",address1:"Enter an address",address2:"Enter an apartment, suite, etc.",city:"Enter a city",zone:"Select a state / province",country:"Select a country",phone:"Enter a phone number",postal_code:"Enter a ZIP / postal code",shipping_option:"Select a shipping method",emirate:"Enter an emirate"},invalid:{email:"Enter a valid email",first_name:"Enter a valid first name",last_name:"Enter a valid last name",address1:"Enter a valid address",address2:"Enter a valid apartment, suite, etc.",city:"Enter a valid city",zone:"Select a valid state / province",country:"Select a country / region",phone:"Enter a valid phone number",postal_code:"Enter a valid zip / postal code",billing_address:"Invalid billing address",shipping_address:"Invalid shipping address",payment_method:"Invalid payment method",discount:"Invalid discount",emirate:"Enter a valid emirate"},emojis:{first_name:"First name cannot contain emojis",last_name:"Last name cannot contain emojis",city:"City cannot contain emojis",address1:"Address line cannot contain emojis",address2:"Second address line cannot contain emojis",postal_code:"Postal code/zip cannot contain emojis",phone:"Phone number cannot contain emojis"},too_long:{address1:"Address line is too long",address2:"Second address line is too long",first_name:"First name is too long",last_name:"Last name is too long",city:"City is too long"},url:{first_name:"First name cannot contain a URL",last_name:"Last name cannot contain a URL"},html_tags:{first_name:"First name cannot contain HTML tags",last_name:"Last name cannot contain HTML tags",city:"City cannot contain HTML tags",address1:"Address line cannot contain HTML tags",address2:"Second address line cannot contain HTML tags"},currency:{mismatch:"Your cart and currency has been updated based on your shipping country."}}}};let hr;class fn extends Error{constructor(t,n){const r="i18n: Missing or invalid translation '".concat(t,"' in '").concat(n,"'");super(r)}}class Xi extends Error{constructor(t,n,r){const a="i18n: Missing translation template key '".concat(t,"' for '").concat(n,"' in '").concat(r,"'");super(a)}}class Zi extends Error{constructor(t,n,r){const a="i18n: Invalid pluralization for '".concat(t,"':'").concat(n,"' in '").concat(r,"'");super(a)}}function ar(){return hr==null&&(hr=ts(Ji)),hr}function ts(e){const t=(o,i)=>typeof o!="string"&&i.count!=="undefined",n=(o,i)=>{let s=i===1?"one":"other";return i===0&&typeof o!="string"&&o.zero!=="undefined"&&(s="zero"),s},r=(o,i={})=>{const s=o.match(/%\{.+?\}/g);return s?s.reduce((l,c)=>{const u=c.replace(/%\{(.*)\}/,"$1");return i[u]?l.replace(c,i[u]):(w.notify(new Xi(u,o,a)),l)},o):o},a=es();return{locale:a,translate(o,i={}){var s;const l=o.split(".");let c=e[a];try{for(const u of l)switch(typeof c){case"object":c=c[u];break;case"string":case"undefined":throw new fn(o,a)}if(t(c,i)){if(typeof c=="string")throw new Zi(o,c,a);c=c[n(c,i.count)]}if(typeof c!="string")throw new fn(o,a);return r(c,i)}catch(u){return w.notify(u),(s=i.defaultValue)!=null?s:o}}}}function es(){return"en"}function bn(e){const t=document.querySelectorAll("shopify-accelerated-checkout .shopify-payment-button__skeleton, shopify-accelerated-checkout-cart .wallet-cart-button__skeleton"),n=document.getElementById("shopify-buyer-consent");for(let r=0;r<t.length;r++)t[r].remove();n&&n.remove()}function La(e){!(e instanceof ErrorEvent)||!(typeof e.message=="string"&&e.message.includes("import.meta"))||!(typeof e.filename=="string"&&e.filename.includes("portable-wallets"))||(window.removeEventListener("error",La),window.Shopify.PaymentButton.failedToLoad=e,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",window.Shopify.PaymentButton.init):window.Shopify.PaymentButton.init())}window.addEventListener("error",La);const ue=[];function ct(e,t,n){if(window.customElements==null)return w.leaveBreadcrumb("customElements is null on window"),bn(),!1;try{const r=t;return window.customElements.get(e)||(window.customElements.define(e,r),n!=null&&n.isChildCustomElement&&ue.push(e)),!0}catch(r){return w.notify(r),bn(),!1}}function Me(){const e=new URLSearchParams(window.location.search);return function(t){return!!e.get(t)}}function rs(){var e,t,n,r;const a=(e=window.Shopify)==null?void 0:e.CartType;if(a===N.CartAjax)return N.CartAjax;if(a===N.CartPage)return N.CartPage;const o=(r=(n=(t=window.ShopifyAnalytics)==null?void 0:t.meta)==null?void 0:n.page)==null?void 0:r.pageType;if(o)switch(o.toLowerCase()){case"product":return N.ProductPage;case"cart":return N.CartPage}const i=document.querySelector("#shop-js-analytics");if(i)try{const s=JSON.parse(i.textContent||"{}");if(s.pageType)switch(s.pageType.toLowerCase()){case"product":return N.ProductPage;case"cart":return N.CartPage}}catch(s){console.error("Error parsing JSON script tag:",s)}return N.Unknown}function yt(e){return Number(e).toFixed(2)}function qr(e){return ze(e==null?void 0:e.id)}function ze(e){if(e!=null&&e.includes("gid://shopify/Cart/"))return e.replace("gid://shopify/Cart/","").split("?")[0]}function ht(){let e;return[new Promise(t=>e=t),e]}function Ma(){return!!document.querySelector('[data-source-attribution="shopify.shop-promise-pdp"]')}function ot(){return new Date().getTime()}function Wr(e){return e.find(t=>t.code===Ca&&!!t.message)}function wn(){const e=window.navigator.userAgent,t=e.includes("iPhone OS 26_0"),n=e.includes("Version/26.0"),r=e.includes("iPhone OS");return t||n&&r}function ns(e){return e.title==="Default Title"?e.product.title:"".concat(e.product.title," - ").concat(e.title)}function za(e,t){return e.map(n=>{let r=ns(n.merchandise);n.isNestedLine&&(r="\u2937 ".concat(r));const a=yt(n.totalAmount.amount);return t(r,a)})}function as(){var e;return(e=window.scheduler)!=null&&e.yield?window.scheduler.yield():new Promise(t=>{var n;(n=window.scheduler)!=null&&n.postTask?window.scheduler.postTask(t):setTimeout(t,0)})}class os extends HTMLElement{constructor(){super(...arguments),d(this,"originalStyle",{position:"",overflow:"",top:""}),d(this,"scrollPosition",0),d(this,"formerFocus",null)}connectedCallback(){this.attachShadow({mode:"open"}),this.formerFocus=document.activeElement;const t=ar();this.render(t);const n=this.shadowRoot,r=n.getElementById("modal");n.querySelectorAll("button").forEach(i=>i.addEventListener("click",this.closeModal.bind(this)));const a=n.getElementById("overlay");a==null||a.addEventListener("click",i=>this.handleOutsideClick(i,r)),document.addEventListener("keydown",this.handleEscapeKey.bind(this));const o=document.createElement("style");o.textContent=Vo,n.appendChild(o),this.applyScrollLock(),this.trapFocus(r,n),ct("svg-icon",Go)}trapFocus(t,n){if(!t)return;const r=t.querySelectorAll("a[href], button"),a=Array.from(r),o=a[0],i=a[a.length-1];t.addEventListener("keydown",s=>{s.key==="Tab"&&!s.shiftKey&&n.activeElement===i&&(s.preventDefault(),o.focus()),s.key==="Tab"&&s.shiftKey&&n.activeElement===o&&(s.preventDefault(),i.focus())}),o.focus()}handleOutsideClick(t,n){n&&(n.contains(t.target)||this.closeModal())}handleEscapeKey(t){t.key==="Escape"&&this.closeModal()}closeModal(){var t;this.removeScrollLock(),this.remove(),this.formerFocus&&"focus"in(this==null?void 0:this.formerFocus)&&typeof this.formerFocus.focus=="function"&&((t=this.formerFocus)==null||t.focus())}applyScrollLock(){this.originalStyle={position:document.body.style.position,overflow:document.body.style.overflow,top:document.body.style.top},document.body.style.overflow="hidden",wn()&&(this.scrollPosition=window.scrollY,document.body.style.position="fixed",document.body.style.top="-".concat(this.scrollPosition,"px"))}removeScrollLock(){var t,n,r,a,o,i;document.body.style.overflow=(n=(t=this.originalStyle)==null?void 0:t.overflow)!=null?n:"",wn()&&(document.body.style.position=(a=(r=this.originalStyle)==null?void 0:r.position)!=null?a:"",document.body.style.top=(i=(o=this.originalStyle)==null?void 0:o.top)!=null?i:"",window.scrollTo({top:this.scrollPosition,behavior:"instant"}))}render(t){const n=this.getAttribute("title"),r=this.getAttribute("has-close-button"),a=t.translate("error_dialogs.checkout.button_text"),o='\n      <footer>\n        <button type="button" id="close-button" tabindex="0">'.concat(a,"</button>\n      </footer>\n    ");this.shadowRoot.innerHTML='\n      <div id="overlay">\n        <div id="modal" role="dialog" aria-modal="true" aria-labelledby="title">\n          <header>\n            <h2 id="title">\n              <span class="capitalize">'.concat(n,'</span>\n            </h2>\n            <button type="button" id="close-icon" aria-label=').concat(a,' tabindex="0">\n              <svg-icon color="gray"></svg-icon>\n            </button>\n          </header>\n          <div id="content">\n            <p><slot></slot></p>\n          </div>\n          ').concat(r?o:"","\n        </div>\n      </div>\n    ")}}const is="@keyframes topLevelModalLoadingSkeleton{50%{opacity:1}75%{opacity:.5}to{opacity:1}}top-level-modal .text-skeleton{display:inline-block;width:100%;height:14px;margin-bottom:7px;animation:topLevelModalLoadingSkeleton 4s ease infinite;animation-delay:-.168s;text-decoration:none!important;background-color:#dedede}top-level-modal .text-skeleton:last-of-type{width:50%}";function or({type:e="button",label:t=void 0}={}){const n=document.createElement("button");return n.type=e,t&&n.setAttribute("aria-label",t),n}function ke(e,t){for(const[n,r]of Object.entries(t))e.setAttribute(n,r)}function me(e,t){for(const[n,r]of Object.entries(t))e.style.setProperty(n,r)}function Ua(){return"\n    <style>".concat(is,'</style>\n    <span class="text-skeleton">&nbsp;</span>\n    <span class="text-skeleton">&nbsp;</span>\n    <span class="text-skeleton">&nbsp;</span>\n    <span class="text-skeleton">&nbsp;</span>\n    <span class="text-skeleton">&nbsp;</span>\n  ')}function ss(){const e=document.querySelector("top-level-modal");e&&"closeModal"in e&&typeof e.closeModal=="function"&&e.closeModal()}function Ba(e){ss();const t=document.createElement("top-level-modal");return ke(t,{"data-testid":"top-level-modal",title:e}),t}function ls(e,t){e.innerHTML='<div style="text-align: center;">'.concat(t,"</div>")}function ee(e,t){var n;const r=document.createElement("top-level-modal");r.textContent=t,ke(r,{"data-testid":"top-level-modal","has-close-button":"true",title:e}),(n=document.body)==null||n.appendChild(r)}function Yr(e,t,n){var r;const a=Ba(e);t instanceof Promise?(a.innerHTML=Ua(),t.then(o=>{o&&o!==""?a.innerHTML=o:a.innerHTML=n!=null?n:""}).catch(()=>{a.innerHTML=n!=null?n:""})):a.innerHTML=t,(r=document.body)==null||r.appendChild(a)}function it(e,t){ee(t.translate("error_dialogs.wallet.title",{wallet:e}),t.translate("error_dialogs.wallet.generic_error",{wallet:e}))}function Nt(e){ee(e.translate("error_dialogs.checkout.title"),e.translate("error_dialogs.checkout.generic_error"))}function Lt(e,t){ee(e.translate("error_dialogs.checkout.title"),t)}function Mt(e,t){switch(t){case $.GiftCardRecipientInvalid:ee(e.translate("error_dialogs.checkout.title"),e.translate("error_dialogs.product.gift_card_recipient_validation_error"));break;default:Nt(e);break}}function bt(e){ee(e.translate("error_dialogs.checkout.title"),e.translate("error_dialogs.product.out_of_stock"))}ct("top-level-modal",os);class Te extends HTMLElement{get buyerCountry(){return this.getAttribute("buyer-country")}get buyerCurrency(){const t=this.getAttribute("buyer-currency");if(t==null)throw new Error("WalletElement buyer-currency is null");return t}get accessToken(){return this.getAttribute("access-token")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get hasSellingPlan(){const t=this.getAttribute("has-selling-plan");return t==="true"||t===""}set hasSellingPlan(t){t?this.setAttribute("has-selling-plan",""):this.removeAttribute("has-selling-plan")}get isShippingRequired(){const t=this.getAttribute("requires-shipping");return t==="true"||t===""}set isShippingRequired(t){t?this.setAttribute("requires-shipping",""):this.removeAttribute("requires-shipping")}get pciEnabled(){return this.hasAttribute("pci-enabled")}}const cs="#more-payment-options-link{cursor:pointer}";function ds(e,t,n){return(t=hs(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_n(Object(n),!0).forEach(function(r){ds(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function us(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hs(e){var t=us(e,"string");return typeof t=="symbol"?t:t+""}const ps="https://monorail-edge.shopifysvc.com",ms="/v1/produce";function gs(){if(typeof crypto<"u"&&crypto&&typeof crypto.randomUUID=="function")return crypto.randomUUID();const e=new Array(36);for(let t=0;t<36;t++)e[t]=Math.floor(Math.random()*16);return e[14]=4,e[19]=e[19]&=-5,e[19]=e[19]|=8,e[8]=e[13]=e[18]=e[23]="-",e.map(t=>t.toString(16)).join("")}function ys(e,t=!0){return e&&Object.keys(e).length&&t?Object.keys(e).map(n=>({[fs(n)]:e[n]})).reduce((n,r)=>En(En({},n),r)):e}function fs(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}function bs(e){const t={"Content-Type":"application/json; charset=utf-8","X-Monorail-Edge-Event-Created-At-Ms":(e&&e.eventCreatedAtMs||Date.now()).toString(),"X-Monorail-Edge-Event-Sent-At-Ms":Date.now().toString(),"X-Monorail-Edge-Client-Message-Id":(e&&e.clientMessageId||gs()).toString()};return e&&e.userAgent&&(t["User-Agent"]=e.userAgent),e&&e.remoteIp&&(t["X-Forwarded-For"]=e.remoteIp),e&&e.deviceInstallId&&(t["X-Monorail-Edge-Device-Install-Id"]=e.deviceInstallId),e&&e.client&&(t["X-Monorail-Edge-Client"]=e.client),e&&e.clientOs&&(t["X-Monorail-Edge-Client-OS"]=e.clientOs),t}async function ws({endpoint:e,event:t,keepalive:n}){var r,a,o,i,s;const l=t.metadata?{clientMessageId:(r=t.metadata)===null||r===void 0?void 0:r.clientMessageId,eventCreatedAtMs:(a=t.metadata)===null||a===void 0?void 0:a.eventCreatedAtMs,consent:(o=t.metadata)===null||o===void 0?void 0:o.consent,consent_provider:(i=t.metadata)===null||i===void 0?void 0:i.consent_provider,consent_version:(s=t.metadata)===null||s===void 0?void 0:s.consent_version}:void 0;return fetch(e!=null?e:ps+ms,{method:"post",headers:bs(t.metadata),body:JSON.stringify({schema_id:t.schemaId,payload:t.payload,metadata:l&&ys(l,!0)}),keepalive:n})}const _s="2.1",Es="3",pr={NO_VALUE:"",ACCEPTED:"1",DECLINED:"0"},K={PREFERENCES:"p",ANALYTICS:"a",MARKETING:"m",SALE_OF_DATA:"t"},dt={MARKETING:"m",ANALYTICS:"a",PREFERENCES:"p",SALE_OF_DATA:"s"};function Pr(e){try{return decodeURIComponent(e)}catch(t){return""}}const As=()=>typeof __CtaTestEnv__>"u"?!1:__CtaTestEnv__==="true",Cs="_tracking_consent";function Ss(){try{return document.cookie}catch(e){return!1}}function Fa(e,t=!1){const n=Ss()?document.cookie.split("; "):[];for(let r=0;r<n.length;r++){const[a,o]=n[r].split("=");if(e===Pr(a))return Pr(o)}if(t&&e==="_tracking_consent"&&!window.localStorage.getItem("tracking_consent_fetched"))return As()?void 0:(console.debug("_tracking_consent missing"),Ps(),window.localStorage.setItem("tracking_consent_fetched","true"),Fa(e,!1))}function Ps(e="/"){const t=new XMLHttpRequest;t.open("HEAD",e,!1),t.withCredentials=!0,t.send()}function vs(){return Fa(Cs)}const Is="_cmp";function ks(){let e;if(Rs()?e=mr(Ts)||mr(An):e=mr(An),!e){let t;try{t=sessionStorage.getItem("consentHeader")}catch(n){}return t||void 0}try{e=decodeURIComponent(e)}catch(t){}return e}function mr(e){try{return e()}catch(t){return}}function An(){var e,t;const n=(e=performance)===null||e===void 0||(t=e.getEntriesByType)===null||t===void 0?void 0:t.call(e,"navigation");if(!n)return;const r=n.map($a).find(a=>a);if(r)try{sessionStorage.setItem("consentHeader",r)}catch(a){}return r}let Cn;function Ts(){var e,t;const n=(e=performance)===null||e===void 0||(t=e.getEntriesByType)===null||t===void 0?void 0:t.call(e,"resource");let r=Cn;for(let a=n.length-1;a>=0;a--){let o=$a(n[a]);if(o){r=o;break}}return Cn=r,r}function $a(e){var t,n;if(e)return(t=e.serverTiming)===null||t===void 0||(n=t.find(r=>r.name==Is))===null||n===void 0?void 0:n.description}const Ns=window;function Rs(){var e,t;return((e=Ns.Shopify)===null||e===void 0||(t=e.customerPrivacy)===null||t===void 0?void 0:t.backendConsentEnabled)===!0}const Ds="_cs";function Os(){return new URLSearchParams(window.location.search).get(Ds)||void 0}function xs(){var e,t;const n=(e=window.Shopify)===null||e===void 0||(t=e.customerPrivacy)===null||t===void 0?void 0:t.cachedConsent;return n?Pr(n):void 0}function Ls(){const e=xs()||Os()||vs()||ks();if(e!==void 0)return Ms(e)}function Ms(e){if(e.slice(0,1)=="%")try{e=decodeURIComponent(e)}catch(n){}const t=e.slice(0,1);if(t=="{")return zs(e);if(t=="3")return Us(e)}function zs(e){var t;let n;try{n=JSON.parse(e)}catch(r){return}if(n.v===_s&&(t=n.con)!==null&&t!==void 0&&t.CMP)return n}function Us(e){const t=e.slice(1).split("_"),[n,r,a,o,i]=t;let s;try{s=t[5]?JSON.parse(t.slice(5).join("_")):void 0}catch(m){}let l;if(i){const m=i.replace(/\*/g,"/").replace(/-/g,"+"),h=Array.from(atob(m)).map(g=>g.charCodeAt(0).toString(16).padStart(2,"0")).join("");l=[8,13,18,23].reduce((g,y)=>g.slice(0,y)+"-"+g.slice(y),h)}function c(m){const h=n.split(".")[0];return h.includes(m.toLowerCase())?pr.DECLINED:h.includes(m.toUpperCase())?pr.ACCEPTED:pr.NO_VALUE}function u(m){return n.includes(m.replace("t","s").toUpperCase())}return{v:Es,con:{CMP:{[dt.ANALYTICS]:c(dt.ANALYTICS),[dt.PREFERENCES]:c(dt.PREFERENCES),[dt.MARKETING]:c(dt.MARKETING),[dt.SALE_OF_DATA]:c(dt.SALE_OF_DATA)}},region:r||"",cus:s,purposes:{[K.ANALYTICS]:u(K.ANALYTICS),[K.PREFERENCES]:u(K.PREFERENCES),[K.MARKETING]:u(K.MARKETING),[K.SALE_OF_DATA]:u(K.SALE_OF_DATA)},sale_of_data_region:o=="t",display_banner:a=="t",consent_id:l}}function ir(e){const t=Ls();if(!t||!t.purposes)return!0;const n=t.purposes[e];return typeof n=="boolean"?n:!0}function Bs(){return ir(K.PREFERENCES)}function Fs(){return ir(K.ANALYTICS)}function $s(){return ir(K.MARKETING)}function Hs(){return ir(K.SALE_OF_DATA)}function Gs(){return Fs()}function Vs(){return Bs()}function js(){return $s()}function qs(){return Hs()}function Ws(){return js()}function Ys(){return Gs()}function Ks(){return Vs()}function Qs(){return qs()}function Js(){const e=[];return Ys()&&e.push("analytics"),Ws()&&e.push("marketing"),Qs()&&e.push("sale_of_data"),Ks()&&e.push("preferences"),e}function Xs(e,t){switch(t){case"v1":{const n=Js();return{...e,metadata:{...e==null?void 0:e.metadata,consent:n,consent_provider:"consent-tracking-api",consent_version:t}}}default:throw new Kr(t)}}class Kr extends Error{constructor(t){super("Version ".concat(t," is not supported by the consent-tracking-api provider")),this.name="MonorailConsentTrackingApiProviderVersionError",Object.setPrototypeOf(this,Kr.prototype)}}const Zs=["Chrome-Lighthouse","Googlebot"];function tl(){const e=navigator.userAgent;return Zs.some(t=>e.includes(t))}async function el(e){if(tl())return;const t=Xs(e,"v1");let n;try{n=await ws({event:t})}catch(r){}if(!(n!=null&&n.ok))try{I.counter({name:T.MonorailProduceError,value:1,attributes:{schemaId:t.schemaId}})}catch(r){}}const gr="shopify_wallet_checkout_track/6.3";async function V(e){var t,n,r,a,o,i,s;const l=await rl();if(!l)return;const c={schemaId:gr,payload:{app_name:"storefront",page_type:rs(),checkout_one:!0,event:e.event,event_subtype:e.eventSubtype,checkout_token:e.checkoutToken,instrument_id:e.instrumentId,ttl:e.ttl,error_reason:e.errorReason,uniq_token:(t=l==null?void 0:l.uniqToken)!=null?t:"",visit_token:(n=l==null?void 0:l.visitToken)!=null?n:"",micro_session_id:(r=l==null?void 0:l.microSessionId)!=null?r:"",micro_session_count:(a=l==null?void 0:l.microSessionCount)!=null?a:0,shop_id:(o=l==null?void 0:l.shopId)!=null?o:0,theme_id:l==null?void 0:l.themeId,theme_city_hash:(i=l==null?void 0:l.themeCityHash)!=null?i:"",content_language:(s=l==null?void 0:l.contentLanguage)!=null?s:"",referer:l==null?void 0:l.referer}};w.leaveBreadcrumb("monorail event produced to ".concat(gr),{schemaId:gr,payload:e});try{await el(c)}catch(u){w.notify(new nl("Failed to send monorail event: ".concat(u),{cause:u}),{metadata:{request:{monorail:{payload:JSON.stringify(c)}}}})}}async function rl(){var e,t,n,r,a;return(t=(e=window==null?void 0:window.ShopifyAnalytics)==null?void 0:e.lib)!=null&&t.trekkie||await new Promise(o=>{const i=setInterval(()=>{var l,c;(c=(l=window==null?void 0:window.ShopifyAnalytics)==null?void 0:l.lib)!=null&&c.trekkie&&(clearInterval(i),o())},100),s=setTimeout(()=>{clearInterval(i),clearTimeout(s),o()},7e3)}),(a=(r=(n=window.ShopifyAnalytics)==null?void 0:n.lib)==null?void 0:r.trekkie)==null?void 0:a.defaultAttributes}class nl extends Error{constructor(){super(...arguments),d(this,"name","MonorailError")}}var H=(e=>(e.CartInitCalled="portable_wallets_cart_init_called",e.ClickSheetCancelled="portable_wallets_instrument_click_sheet_cancelled",e.ClickSheetFailed="portable_wallets_instrument_click_sheet_failure",e.ClickSheetSuccess="portable_wallets_instrument_click_sheet_success",e.SheetFailed="portable_wallets_instrument_sheet_failed",e.AuthorizationAttempt="portable_wallets_authorization_attempt",e.AuthorizationComplete="portable_wallets_authorization_complete",e.InitCalled="portable_wallets_init_called",e.InitFailed="portable_wallets_init_failed",e.InitSuccess="portable_wallets_init_success",e.UpdateFailed="portable_wallets_instrument_update_failed",e.InstrumentLoaded="portable_wallets_instrument_loaded",e.InstrumentLoadFailed="portable_wallets_instrument_load_failed",e.FirstVisible="portable_wallets_first_visible",e.FirstVisibleNotAvailable="portable_wallets_first_visible_not_available",e.SheetLoaded="portable_wallets_sheet_loaded",e.ShopPayButtonInView="portable_wallets_shop_pay_button_in_view",e.RecoveryFlowInitiated="portable_wallets_recovery_flow_initiated",e))(H||{});const Sn={[N.Checkout]:"bwp_checkout_widget_click",[N.CartAjax]:"bwp_cart_widget_click",[N.CartPage]:"bwp_cart_widget_click",[N.ProductPage]:"bwp_widget_click",[N.Unknown]:"bwp_widget_click"};function al({apiClientId:e,skus:t,pageType:n}){var r;if(!((r=window.Shopify)!=null&&r.analytics))return;const a=n&&Sn[n]||"bwp_widget_click";a===Sn[N.Checkout]&&window.Shopify.analytics.publish("shopify:app:pixels:load:".concat(e),{},{sendTo:"PIXEL-LOADER"}),t&&window.Shopify.analytics.publish(a,{skus:t},{sendTo:e})}const Rt="d6d12da0",ol="ce346acf",Ha="a1c7ccbe",Qr="32a68cd0",il="5865c7bd",sl="c0874428",Pn="61de4ecc",vn=new Set;let In=!1;const G={register:e=>{In||(In=!0,e.forEach(t=>vn.add(t)))},enabled:e=>vn.has(e),reset:()=>{}};function R(e){return{pageType:jr(),cartPrepare:G.enabled(Rt),...e}}function ll(){const e=jr()===N.CartPage?H.CartInitCalled:H.InitCalled;V({event:e})}function cl(e){var t,n;const r=e?"Failed":"Success",a=e&&Tl(e)?"[".concat(e.name,"]: ").concat(e.code):void 0,o=H["Init".concat(r)];V({event:o,eventSubtype:a}),I.counter({name:T.InitCompleted,value:1,attributes:R({result:r.toLowerCase(),eventType:a,recoveredFailure:!!((n=(t=window.Shopify)==null?void 0:t.PaymentButton)!=null&&n.failedToLoad)})})}function dl({instrumentOrComponentName:e,result:t,measurement:n}){V({event:t==="success"?H.InstrumentLoaded:H.InstrumentLoadFailed,instrumentId:e,ttl:n}),n!=null&&(I.histogram({name:T.InstrumentLoadTime,value:n,attributes:R({instrument:e,result:t}),unit:"ms"}),I.histogram({name:T.InstrumentLoadTimeFromPageLoad,value:window.performance.now(),attributes:R({instrument:e,result:t}),unit:"ms"}))}function ul({instrument:e,measurement:t,result:n}){const r=n==="success"?Tt.InstrumentSdkLoaded:Tt.InstrumentSdkFailed;V({event:r,instrumentId:e,ttl:t,errorReason:n==="success"?void 0:n}),t!=null&&I.histogram({name:Tt.InstrumentSdkLoaded,value:t,attributes:R({instrument:e,result:n}),unit:"ms"})}function hl({instrument:e,result:t,reason:n}){const r=t==="success"?Tt.InstrumentSdkEligible:Tt.InstrumentSdkNotEligible;V({event:r,instrumentId:e}),I.counter({name:Tt.InstrumentSdkEligible,value:1,attributes:R({instrument:e,reason:n,result:t})})}function pl({instrument:e,result:t,reason:n}){I.counter({name:T.InstrumentLoadEligibility,value:1,attributes:R({instrument:e,result:t,reason:n})})}function ml(e){I.counter({name:T.ButtonRender,value:1,attributes:R({result:"success",instrument:e})})}function gl(e){I.counter({name:T.ButtonRender,value:1,attributes:R({result:"failed",instrument:e})})}function yl({instrument:e,result:t,webPixelMetaData:n,reason:r}){V({event:t==="success"?H.ClickSheetSuccess:H.ClickSheetFailed,instrumentId:e}),I.counter({name:T.SheetClicked,value:1,attributes:R({instrument:e,result:t,...r&&{reason:r}})}),e===b.BuyWithPrime&&n&&al(n)}function fl({instrument:e,request:t,error:n}){V({event:"".concat(H.UpdateFailed,"-").concat(t),instrumentId:e}),n&&p.log({body:"Update failed with error",attributes:{instrument:e,request:t,error:String(n)}}),I.counter({name:T.UpdateFailed,value:1,attributes:R({instrument:e,request:t})})}function bl({errorCode:e}){I.counter({name:T.PayPalTokenCreationError,value:1,attributes:R({errorCode:e})})}function wl(e){V({event:H.ClickSheetCancelled,instrumentId:e}),I.counter({name:T.SheetCancelled,value:1,attributes:R({instrument:e})})}function _l(e,t){V({event:H.SheetFailed,instrumentId:e,errorReason:t==null?void 0:t.message}),I.counter({name:T.SheetFailed,value:1,attributes:R({instrument:e})})}function El(e){V({event:H.AuthorizationAttempt,instrumentId:e}),I.counter({name:T.AuthorizationAttempt,value:1,attributes:R({instrument:e})})}function Al({instrument:e,measurement:t,result:n}){V({event:H.AuthorizationComplete,eventSubtype:n,ttl:t,instrumentId:e}),t!=null&&I.histogram({name:T.AuthorizationComplete,value:t,attributes:R({instrument:e,result:n}),unit:"ms"})}function Cl({instrument:e,reason:t,stage:n}){I.counter({name:T.Decelerated,value:1,attributes:R({instrument:e,reason:t,...n&&{stage:n}})}),p.log({body:"Checkout decelerate",attributes:{instrument:e,reason:t,...n&&{stage:n}}}),p.flushTelemetry()}function Sl({reason:e}){I.counter({name:T.CartTokenMissing,value:1,attributes:{reason:e}})}function Pl({success:e}){I.counter({name:T.RemovePersonalDataResult,value:1,attributes:R({success:e})})}function vl(){I.counter({name:T.WalletConfigDeveloperError,value:1})}function Il(){I.counter({name:T.LegacyCartCookie,value:1})}function kl(){window.setInterval(()=>{Ga()},1e3)}function Tl(e){return(e==null?void 0:e.name)===ve}function Ga(){I.exportMetrics(),I.exportLogs()}function Nl(e){const{body:t,attributes:n}=e,r=Vr();I.log({body:t,attributes:{...r,shopId:r.shop_id,appVersion:"0.1.38",...n}})}function Rl({usedBackwardsCompatibility:e}){I.counter({name:T.StyleBackwardsCompatibility,value:1,attributes:{usedBackwardsCompatibility:e}})}function Dl({measurement:e,pageType:t,stylesWritten:n}){I.histogram({name:T.StyleBackwardsCompatibilityExecutionTime,value:e,attributes:R({pageType:t,stylesWritten:n}),unit:"ms"})}function Ol({rule:e,count:t,pageType:n}){I.counter({name:T.StyleBackwardsCompatibilityRules,value:t,attributes:R({rule:e,pageType:n})})}function xl({retries:e}){I.counter({name:T.AmazonPayLoadRetries,value:1,attributes:{retries:e}})}function Ll({instrument:e}){I.counter({name:T.DynamicTaxFailed,value:1,attributes:R({instrument:e})}),p.log({body:"Dynamic tax failed",attributes:{instrument:e}})}function Ml({instrument:e,measurement:t}){I.histogram({name:T.SheetLoaded,value:t,attributes:R({instrument:e}),unit:"ms"})}function zl({instrument:e,errorName:t}){I.counter({name:T.UnrecoverableCartError,value:1,attributes:R({instrument:e,errorName:t})}),p.log({body:"Unrecoverable error detected",attributes:{instrument:e,errorName:t}})}function Ul({instrument:e,error:t}){I.counter({name:T.PaymentCompletedAfterAbort,value:1,attributes:R({instrument:e,error:t})})}function Bl(){I.counter({name:T.GooglePayNullCartOnAuthorize,value:1,attributes:R({instrument:b.GooglePay})})}function Fl(){I.counter({name:T.GooglePayIso3166AdministrativeAreaFallback,value:1,attributes:R({instrument:b.GooglePay})})}function $l({instrument:e,errorName:t,methodName:n}){I.counter({name:T.WalletSessionAbortError,value:1,attributes:R({instrument:e,errorName:t,methodName:n})}),p.log({body:"Wallet session abort error: ".concat(t),attributes:{instrument:e,methodName:n}})}function Hl({instrument:e,retryCount:t,retryDuration:n,success:r,totalAmountChange:a,...o}){I.histogram({name:T.CartPaymentUpdateRetryResult,value:n,attributes:R({instrument:e,retryCount:t,success:r,totalAmountChange:a}),unit:"ms"}),p.log({body:"Cart payment update retry completed",attributes:{instrument:e,retryCount:t,retryDuration:n,success:r,totalAmountChange:a,...o}})}function Gl({reason:e}){I.counter({name:T.ProductFormError,value:1,attributes:R({reason:e})})}function Vl({instrument:e}){p.log({body:"Cart payment update timed out",attributes:{instrument:e}})}function jl({instrument:e}){p.log({body:"DELIVERY_WRONG_NUMBER_OF_LINES error detected and filtered out",attributes:{instrument:e}}),I.counter({name:T.DeliveryWrongNumberOfLines,value:1,attributes:R({instrument:e})})}const p={initStarted:k(ll),initCompleted:k(cl),instrumentLoaded:k(dl),instrumentLoadEligibility:k(pl),instrumentSDKLoaded:k(ul),instrumentSDKEligible:k(hl),renderSucceeded:k(ml),renderFailed:k(gl),sheetClicked:k(yl),sheetCancelled:k(wl),sheetFailed:k(_l),updateFailed:k(fl),authorizationAttempt:k(El),authorizationComplete:k(Al),startExporter:k(kl),decelerated:k(Cl),cartTokenMissing:k(Sl),removePersonalDataResult:k(Pl),walletConfigDeveloperError:k(vl),legacyCartCookie:k(Il),flushTelemetry:k(Ga),styleBackwardsCompatibility:k(Rl),styleBackwardsCompatibilityExecutionTime:k(Dl),styleBackwardsCompatibilityRules:k(Ol),amazonPaySDKLoadRetries:k(xl),dynamicTaxFailed:k(Ll),sheetLoaded:k(Ml),unrecoverableCartError:k(zl),paymentCompletedAfterAbort:k(Ul),googlePayNullCartOnAuthorize:k(Bl),googlePayIso3166AdministrativeAreaFallback:k(Fl),log:k(Nl,{logErrors:!1}),paypalTokenCreationError:k(bl),walletSessionAbortError:k($l),cartPaymentUpdateRetryResult:k(Hl),productFormError:k(Gl),updateCartPaymentTimeout:k(Vl),deliveryWrongNumberOfLines:k(jl)};function k(e,{logErrors:t=!0}={}){return(...n)=>{try{e(...n)}catch(r){t&&p.log({body:"Error calling telemetry function",attributes:{error:"".concat(r)}})}}}function ql(e){const t=n=>{n.persisted&&(e(),window.removeEventListener("pageshow",t))};window.addEventListener("pageshow",t)}function Va({type:e,form:t}){if(!t)return[];const n=document.querySelectorAll('[name^="'.concat(e,'"][form^="').concat(CSS.escape(t.getAttribute("id")||""),'"]')),r=t.querySelectorAll('[name^="'.concat(e,'"]')),a=Array.from(n).concat(Array.from(r)),o={};return a.forEach(i=>{const s=Wl(i),l=Yl(i);s&&typeof l<"u"&&l.trim()!==""&&(o[s]=l)}),Object.entries(o!=null?o:{}).map(([i,s])=>({key:i,value:s}))}function Ne({page:e,element:t}){const n=e==="product"?'[data-shopify="payment-button"]':'[data-shopify="dynamic-checkout-cart"]',r=kn(t,n)||document.querySelector(n);return kn(r,"form")}const le=Element.prototype;function kn(e,t){if(le.matches=le.matches||le.webkitMatchesSelector||le.msMatchesSelector||le.mozMatchesSelector,!e||e.matches(t))return e;let n=e;for(;n&&n!==document.body;)if(n=n.parentElement,n&&n.matches(t))return n;return null}function Wl(e){const t=e.getAttribute("name");if(t===null)return null;const n=t.indexOf("["),r=t.lastIndexOf("]");return n===-1||r===-1?null:t.substring(n+1,r)}function Yl(e){if(!(["radio","checkbox"].includes(e.type)&&!e.checked))try{return e.value===""||typeof e.value>"u"?void 0:e.value}catch(t){return}}function ja(e){var t,n;const r=Ne({page:"product",element:e});return(n=(t=qa(r))==null?void 0:t[0])!=null?n:null}function Kl(e){const t=Ne({page:"product",element:e});return qa(t)}function qa(e){const t=Wa(e),n=G.enabled(Qr);return t?n?[t,...Jl(e)]:[t]:null}function Wa(e){var t;const n=e==null?void 0:e.elements;if(!n)return w.leaveBreadcrumb("[ProductForm] No form elements found"),p.productFormError({reason:"missing_form_elements"}),p.log({body:"Product form error: missing form elements",attributes:{}}),null;const r=Ue(n,"id");if(!r||isNaN(Number(r))||Number(r)<=0)return w.leaveBreadcrumb("[ProductForm] Invalid variant ID found",{variantId:r}),p.productFormError({reason:"invalid_variant_id"}),p.log({body:"Product form error: invalid variant ID",attributes:{variantId:r!=null?r:"null"}}),null;const a=Number((t=Ue(n,"quantity"))!=null?t:"1"),o="gid://shopify/ProductVariant/".concat(r),i=Xl(n),s=Va({type:"properties",form:e});return{variantId:r,quantity:a,merchandiseId:o,sellingPlanId:i,lineItemProperties:s}}function Ql(e){const t=e==null?void 0:e.elements;return t?!!Ue(t,"selling_plan"):!1}function Jl(e){try{const t=new FormData(e!=null?e:void 0),n=new Map;for(const[r,a]of t.entries()){if(!r.startsWith("shopify-additional-items["))continue;const o=r.split(/[[\]]{1,2}/),i=Number(o[1])-1;n.has(i)||n.set(i,{});const s=n.get(i);switch(o[2]){case"id":s.variantId=a.toString(),s.merchandiseId="gid://shopify/ProductVariant/".concat(a.toString());break;case"quantity":s.quantity=Number(a!=null?a:1);break;case"selling_plan":s.sellingPlanId="gid://shopify/SellingPlan/".concat(a.toString());break;case"properties":s.lineItemProperties=JSON.parse(a);break;case"parent_id":s.parent={merchandiseId:"gid://shopify/ProductVariant/".concat(a.toString())};break}}return[...n.values()].map(r=>{if(!r.variantId)throw new Error("Missing variant ID for additional item");return{quantity:1,lineItemProperties:[],...r}})}catch(t){return console.error("[Accelerated Checkout] Could not read additional items from the product form. Check that your shopify-additional-items fields are correctly defined.",t),[]}}function Ue(e,t){var n,r;let a=e.namedItem(t);if(a instanceof HTMLSelectElement)try{return(n=a.value)!=null?n:null}catch(o){return null}if(a&&"length"in a&&(a=a.item(0)),a instanceof HTMLInputElement||a instanceof HTMLSelectElement)try{return(r=a.value)!=null?r:null}catch(o){return null}return null}function Xl(e){const t=Ue(e,"selling_plan");if(!(!t||t==="undefined"))return"gid://shopify/SellingPlan/".concat(t)}class Zl{constructor(t,n,r){this.element=t,this.apiClient=n,this.instrumentName=r}async getInitialCart(t,n,r){const a=Kl(this.element);if(!a)throw new Ya("[".concat(this.instrumentName,"] unable to find product form"),{groupingHash:"unable-to-find-product-form"});const o=be(ai),i={...a[0],lines:[...a],discountCodes:o?[o]:[],instrumentName:t},{data:s,errors:l,abortReason:c,decelerationReason:u}=await this.apiClient.createCart(i,n,r);return{cart:s,errors:l,abortReason:c,decelerationReason:u}}}class Ya extends et{constructor(){super(...arguments),d(this,"name","ProductFormError"),d(this,"useHashPrefix",!0)}}const tc={firstName:"firstName",lastName:"lastName",address1:"address1",address2:"address2",city:"city",province:"province",postalCode:"zip",phoneNumber:"phone",companyName:"company",country:"country"},vr=["firstName","lastName","address1","address2","city","province","postalCode","phoneNumber","companyName","country"];function Le(e,t){return"".concat(e,".").concat(tc[t])}function Bt(e,t){const n={};for(const r of vr)n[r]=[{code:t,field:Le(e,r)}];return n}function Ka(e){return{required:Bt(e,"ADDRESS_FIELD_IS_REQUIRED"),invalid:{...Bt(e,"ADDRESS_FIELD_DOES_NOT_MATCH_EXPECTED_PATTERN"),postalCode:[{code:"ADDRESS_FIELD_DOES_NOT_MATCH_EXPECTED_PATTERN",field:Le(e,"postalCode")},{code:"INVALID_ZIP_CODE_FOR_COUNTRY",field:Le(e,"postalCode")},{code:"INVALID_ZIP_CODE_FOR_PROVINCE",field:Le(e,"postalCode")}]},emojis:Bt(e,"ADDRESS_FIELD_CONTAINS_EMOJIS"),tooLong:Bt(e,"ADDRESS_FIELD_IS_TOO_LONG"),htmlTags:Bt(e,"ADDRESS_FIELD_CONTAINS_HTML_TAGS"),containsUrl:Bt(e,"ADDRESS_FIELD_CONTAINS_URL")}}const ec={firstName:"DELIVERY_FIRST_NAME_REQUIRED",lastName:"DELIVERY_LAST_NAME_REQUIRED",address1:"DELIVERY_ADDRESS1_REQUIRED",address2:"DELIVERY_ADDRESS2_REQUIRED",city:"DELIVERY_CITY_REQUIRED",province:"DELIVERY_ZONE_REQUIRED_FOR_COUNTRY",postalCode:"DELIVERY_POSTAL_CODE_REQUIRED",phoneNumber:"DELIVERY_PHONE_NUMBER_REQUIRED",companyName:"DELIVERY_COMPANY_REQUIRED",country:"DELIVERY_COUNTRY_REQUIRED"},rc={firstName:"DELIVERY_FIRST_NAME_INVALID",lastName:"DELIVERY_LAST_NAME_INVALID",address1:"DELIVERY_ADDRESS1_INVALID",address2:"DELIVERY_ADDRESS2_INVALID",city:"DELIVERY_CITY_INVALID",province:"DELIVERY_ZONE_NOT_FOUND",postalCode:"DELIVERY_POSTAL_CODE_INVALID",phoneNumber:"DELIVERY_PHONE_NUMBER_INVALID",companyName:"DELIVERY_COMPANY_INVALID",country:"DELIVERY_COUNTRY_INVALID"};function nc(){const e=Ka("deliveryAddress");for(const t of vr)e.required[t]=[{code:ec[t]},...e.required[t]];e.required.country=[...e.required.country,{code:"ADDRESS_FIELD_IS_REQUIRED",field:"deliveryAddress.countryCode"}],e.required.province=[...e.required.province,{code:"ADDRESS_FIELD_IS_REQUIRED",field:"deliveryAddress.provinceCode"}];for(const t of vr){const n=rc[t];n&&(e.invalid[t]=[{code:n},...e.invalid[t]])}return e.invalid.country=[...e.invalid.country,{code:"Variable $buyerIdentity of type CartBuyerIdentityInput! was provided invalid value for countryCode"},{code:"INVALID",field:"deliveryAddress.country"},{code:"INVALID",field:"deliveryAddress.countryCode"}],e.invalid.postalCode=[...e.invalid.postalCode,{code:"DELIVERY_INVALID_POSTAL_CODE_FOR_COUNTRY"},{code:"DELIVERY_INVALID_POSTAL_CODE_FOR_ZONE"}],e.invalid.phoneNumber=[...e.invalid.phoneNumber,{code:"INVALID",field:"buyerIdentity.phone"}],e}const _=nc();function ac(){const e=Ka("billingAddress");return{...e,invalid:{...e.invalid,generic:[{code:"INVALID_PAYMENT",field:"billingAddress"},{code:"ADDRESS_FIELD_IS_REQUIRED",field:"billingAddress"},{code:"UNSPECIFIED_ADDRESS_ERROR",field:"billingAddress"}]}}}const C=ac(),we={invalid:[{code:"INVALID",field:"buyerIdentity.email"}],required:[{code:"BUYER_IDENTITY_EMAIL_REQUIRED"}]},Qa=[{code:"INVALID_DELIVERY_OPTION"},{code:"INVALID_DELIVERY_GROUP"},{code:"DELIVERY_DETAIL_CHANGED"},{code:"DELIVERY_NO_DELIVERY_AVAILABLE"},{code:"NO_DELIVERY_GROUP_SELECTED"}],Jr=[{code:"INVALID_PAYMENT",field:"amount"},{code:"INVALID_PAYMENT",field:"payment.amount"},{code:"INVALID_PAYMENT",field:"payment"}],Xr=[{code:"TAXES_DELIVERY_GROUP_ID_NOT_FOUND"},{code:"TAXES_LINE_ID_NOT_FOUND"},{code:"TAXES_MUST_BE_DEFINED"},{code:"PAYMENTS_UNACCEPTABLE_PAYMENT_AMOUNT"}],Zr=[{code:"MERCHANDISE_OUT_OF_STOCK"},{code:"MERCHANDISE_PRODUCT_NOT_PUBLISHED"}],Ja=[{code:"MERCHANDISE_NOT_APPLICABLE"},{code:"MERCHANDISE_NOT_ENOUGH_STOCK_AVAILABLE"},{code:"DELIVERY_NO_DELIVERY_AVAILABLE_FOR_MERCHANDISE_LINE"},{code:"INVALID",field:"quantity"}],oc=[{code:"PAYMENTS_METHOD_REQUIRED"},{code:"PAYMENTS_METHOD_UNAVAILABLE"}],Ir={code:"VALIDATION_CUSTOM"},ic=[Ir,...oc,...Zr],sc=[..._.required.firstName,..._.required.lastName,..._.required.address1,..._.required.address2,..._.required.phoneNumber,..._.required.companyName,...we.required],Be={code:"CAPTCHA_COMPLETION_REQUIRED"},Fe={code:"LOCALIZATION_EXTENSION_FIELD_ERROR"},Tn={code:"BUYER_IDENTITY_CONTACT_INFO_DOES_NOT_MATCH_CUSTOMER_PROFILE"},$e={code:"Variable $language of type LanguageCode was provided invalid value"},He={code:"Variable $country of type CountryCode was provided invalid value"},Ge={code:"Variable $cartId of type ID! was provided invalid value"},lc={code:"PAYMENTS_METHOD_REQUIRED"},cc={code:"DISCOUNT_NOT_APPLICABLE"},Nn={code:"PAYMENTS_COUNTRY_INVALID"},Rn={code:"INVALID_PAYMENT_EMPTY_CART"},Ve={code:"PAYMENT_METHOD_NOT_SUPPORTED"},je={code:"REDIRECT_TO_CHECKOUT_REQUIRED"},dc={code:"INVALID",field:"quantity"},uc={code:"VARIANT_REQUIRES_SELLING_PLAN"},hc={code:"SELLING_PLAN_NOT_APPLICABLE"},pc={code:"INVALID",field:"merchandiseId"},mc={code:"NO_RESPONSE"},gc={code:"INVALID",field:"input"},yc={code:"MERCHANDISE_NOT_APPLICABLE"},fc={code:"NO_DELIVERY_GROUP_SELECTED"},bc={code:"MERCHANDISE_LINE_TRANSFORMERS_RUN_ERROR"},wc={code:"GIFT_CARD_RECIPIENT_INVALID"},Dn={code:"ERROR"},On=[{code:"DELIVERY_WRONG_NUMBER_OF_LINES"},{code:"DELIVERY_ADDRESS_REQUIRED"},{code:"DELIVERY_NO_DELIVERY_AVAILABLE_FOR_MERCHANDISE_LINE"}],_c={building:[...sc,...On],authorized:On};function _e(e,t){const n=t.field?e.field===t.field:!0,r=e.code===t.code;return n&&r}function Ec(e,t){return e.length>0&&t.length>0&&e.some(n=>t.some(r=>_e(n,r)))}function gt({code:e,field:t}){return"".concat(e).concat(t?":".concat(t):"")}class Ac extends et{constructor(t){t instanceof Error?(super("[".concat(t.name,"] ").concat(t.message),{cause:t.cause,groupingHash:t instanceof et?t.groupingHash:void 0}),this.stack=t.stack):super("[HandleCreateCartError] ".concat(String(t))),this.name="HandleCreateCartError"}}async function Et({element:e,instrumentName:t,dataSource:n}){const{supportsSubscriptions:r,supportsDeferredPurchaseOptions:a}=e;try{const o=await n.getInitialCart(t,r!=null?r:!0,a!=null?a:!0),{cart:i,errors:s,abortReason:l,decelerationReason:c}=o;ql(()=>{e&&(e.disabled=!1)});const u=Wr(s),m=Sc(s),h=m||u;if(m&&p.unrecoverableCartError({instrument:t,errorName:m}),!i&&!h)throw new Error("[".concat(t,"] Failed to create cart: ").concat(JSON.stringify(s)));if(i){if(!i.id)throw new Error("[".concat(t,"] received invalid cart"));if(!i.checkoutUrl)throw new Error("[".concat(t,"] Created cart with no checkout URL"))}if(s.length>0&&!h)throw new Error("Errors present after cart creation: ".concat(JSON.stringify(s)));return{cart:i,customValidationError:u,decelerationReason:c,abortReason:l,...m?{unrecoverableError:m}:{}}}catch(o){if(o instanceof jt)return{cart:null,customValidationError:void 0,unrecoverableError:$.IgnoredResponseError,abortReason:void 0,decelerationReason:void 0};if(o instanceof Ya)return{cart:null,customValidationError:void 0,unrecoverableError:$.ProductFormError,abortReason:void 0,decelerationReason:void 0};throw new Ac(o)}finally{e&&(e.disabled=!1)}}const Cc=[{matcher:dc,unrecoverableError:$.InvalidQuantity},{matcher:uc,unrecoverableError:$.VariantRequiresSellingPlan},{matcher:hc,unrecoverableError:$.SellingPlanNotApplicable},{matcher:pc,unrecoverableError:$.MerchandiseIdInvalid},{matcher:mc,unrecoverableError:$.NoResponse},{matcher:gc,unrecoverableError:$.InvalidInput},{matcher:yc,unrecoverableError:$.MerchandiseNotApplicable},{matcher:bc,unrecoverableError:$.MerchandiseLineTransformersRunError},{matcher:wc,unrecoverableError:$.GiftCardRecipientInvalid}];function Sc(e){var t;if(e.length!==1)return null;const[n]=e;return n.code===Ca&&n.message?null:((t=Cc.find(({matcher:r})=>_e(n,r)))==null?void 0:t.unrecoverableError)||null}const Pc={force_shop_pay_product:"direct_checkout_product",force_shop_pay_cart:"direct_checkout_cart"};function wt(e,t="no_redirect_for_checkout"){p.flushTelemetry();const n=new URL(e);switch(t){case"skip_shop_pay":n.searchParams.set("skip_shop_pay","true");break;case"no_redirect_for_checkout":n.searchParams.set("storefront_wallet","true");break;case"force_shop_pay_cart":case"force_shop_pay_product":case"force_shop_pay":{n.searchParams.set("payment","shop_pay");const r=Pc[t];r&&n.searchParams.set("redirect_source",r);break}}window.location.assign(n.toString())}const vc={currency_changed:L.CURRENCY_CHANGE,captcha_required:L.CAPTCHA_REQUIRED,not_enough_stock:L.NOT_ENOUGH_STOCK,dynamic_tax:L.DYNAMIC_TAX,payment_method_not_applicable:L.PAYMENT_METHOD_NOT_APPLICABLE,invalid_payment_deferred_payment_required:L.INVALID_PAYMENT_DEFERRED_PAYMENT_REQUIRED,localization_extension_field_error:L.LOCALIZATION_EXTENSION_FIELD_ERROR,account_info_mismatch:L.ACCOUNT_INFO_MISMATCH,invalid_language:L.WALLET_PROCESSING_FAILED,invalid_country:L.WALLET_PROCESSING_FAILED,missing_cart_id:L.WALLET_PROCESSING_FAILED,redirect_to_checkout_required:L.WALLET_PROCESSING_FAILED,invalid_payment_amount:L.WALLET_PROCESSING_FAILED,price_increased:L.PRICE_INCREASED,unsupported_apple_pay_payment_method:L.UNSUPPORTED_APPLE_PAY_PAYMENT_METHOD,unsupported_google_pay_payment_method:L.UNSUPPORTED_GOOGLE_PAY_PAYMENT_METHOD,custom_validation:L.WALLET_PROCESSING_FAILED,cart_empty:L.WALLET_PROCESSING_FAILED,payments_country_invalid:L.PAYMENTS_COUNTRY_INVALID,generic_error:L.WALLET_PROCESSING_FAILED,nested_line_subscription:L.WALLET_PROCESSING_FAILED,nested_line_deferred_payment:L.WALLET_PROCESSING_FAILED,cart_throttled:null};function xn({cart:e,warnings:t}){const n=e&&e.lineItems.length>0&&e.lineItems.every(r=>r.quantity===0);if(t!=null&&t.includes("MERCHANDISE_OUT_OF_STOCK")&&n)return"out_of_stock"}function yr({warnings:e,cart:t,cartStatus:n,errors:r,supportsSubscriptions:a,supportsDeferredPurchaseOptions:o}){for(const s of r||[]){if(s.code==="PAYMENT_METHOD_NOT_APPLICABLE")return"payment_method_not_applicable";if(s.code==="INVALID_PAYMENT_DEFERRED_PAYMENT_REQUIRED")return"invalid_payment_deferred_payment_required"}if(n==="CartThrottled")return"cart_throttled";if(!e||e.length===0)return Ln(a!=null?a:!0,o!=null?o:!0,t);if(e.includes("MERCHANDISE_NOT_ENOUGH_STOCK"))return"not_enough_stock";const i=t==null?void 0:t.lineItems.some(s=>s.quantity>0);return e.includes("MERCHANDISE_OUT_OF_STOCK")&&i?"not_enough_stock":Ln(a!=null?a:!0,o!=null?o:!0,t)}function Ln(e,t,n){const r=G.enabled(Qr);if(r&&!e&&n!=null&&n.lineItems.some(a=>{var o;return(o=a.sellingPlanAllocation)==null?void 0:o.sellingPlan.billingPolicy}))return"nested_line_subscription";if(r&&!t&&n!=null&&n.lineItems.some(a=>{var o,i;return((o=a.sellingPlanAllocation)==null?void 0:o.remainingBalanceChargeAmount)&&!((i=a.sellingPlanAllocation)!=null&&i.sellingPlan.billingPolicy)}))return"nested_line_deferred_payment"}function tn({currentCartTotal:e,initialBuyerCurrency:t}){const n=e.amount;return!(!n||Number(n)===0||t.toUpperCase()===e.currencyCode.toUpperCase())}function qe({previousCart:e,currentCart:t}){if(!e||!t)return;const n=parseFloat(e.totalAmount.amount),r=parseFloat(t.totalAmount.amount);let a;return r>n?a="inc":r<n?a="dec":a="eq",a}function U({checkoutUrl:e,instrumentName:t,reason:n,stage:r}){if(!e)throw new Error("Invalid Checkout URL");const a=new URL(e),o=vc[n];o&&a.searchParams.set(o,"true"),p.decelerated({instrument:t,reason:n,stage:r}),wt(a.toString())}class Ic extends Te{constructor(){super(),d(this,"name",b.MoreOptions),d(this,"anchor"),d(this,"i18n"),d(this,"dataSource"),d(this,"classNames"),d(this,"setI18n"),d(this,"setDataSource"),d(this,"setClassNames"),[this.i18n,this.setI18n]=ht(),[this.dataSource,this.setDataSource]=ht(),[this.classNames,this.setClassNames]=ht()}static get observedAttributes(){return["disabled"]}connectedCallback(){this.anchor||this.render()}attributeChangedCallback(t,n,r){n!==r&&t==="disabled"&&this.anchor&&(r===""?this.anchor.setAttribute("aria-disabled","true"):this.anchor.removeAttribute("aria-disabled"),this.setAccessibilityAttributes())}async handleClick(t){var n,r;if(t.preventDefault(),this.disabled||!this.anchor)return;this.disabled=!0;const[a,o]=await Promise.all([this.i18n,this.dataSource]);try{const{decelerationReason:i,cart:s,customValidationError:l,unrecoverableError:c,abortReason:u}=await Et({element:this,instrumentName:b.MoreOptions,dataSource:o});if(c){p.sheetClicked({instrument:this.name,result:"rejected",reason:"unrecoverable_error"}),p.log({body:"Unrecoverable error detected in More Options sheet clicked",attributes:{unrecoverableError:c}}),Mt(a,c);return}if(l){p.sheetClicked({instrument:this.name,result:"rejected",reason:"custom_validation_error"}),p.log({body:"Custom validation error detected in More Options sheet clicked",attributes:{errorMessage:l==null?void 0:l.message}}),Lt(a,l.message);return}if(u==="out_of_stock"){p.sheetClicked({instrument:this.name,result:"rejected",reason:"out_of_stock"}),bt(a);return}if(i){p.sheetClicked({instrument:b.MoreOptions,result:"success",reason:"deceleration"}),U({checkoutUrl:(n=s==null?void 0:s.checkoutUrl)!=null?n:"",instrumentName:b.MoreOptions,reason:i});return}p.sheetClicked({instrument:b.MoreOptions,result:"success"}),wt((r=s==null?void 0:s.checkoutUrl)!=null?r:"","skip_shop_pay")}catch(i){p.sheetClicked({instrument:b.MoreOptions,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in More Options sheet clicked",attributes:{error:String(i)}}),w.notify(i),Nt(a)}}async render(){const t=await this.i18n,n=await this.classNames;this.anchor=document.createElement("a"),this.anchor.textContent=t.translate("more_payment_options"),this.anchor.className=n,this.anchor.setAttribute("id","more-payment-options-link"),this.anchor.onclick=a=>this.handleClick(a),this.setAccessibilityAttributes(),this.appendChild(this.anchor);const r=document.createElement("style");r.textContent=cs,this.appendChild(r)}setAccessibilityAttributes(){this.anchor&&(this.disabled?(this.anchor.removeAttribute("href"),this.anchor.role="link"):(this.anchor.removeAttribute("role"),this.anchor.href="#"))}}var M=(e=>(e.ButtonDisplay="buttonDisplay",e.LoadInstrument="loadInstrument",e.LoadSdk="loadSDK",e.AuthorizationLatency="authorizationLatency",e.SheetLoad="sheetLoad",e.StyleExtract="styleExtract",e))(M||{});function Xa(){var e,t;return!!((e=window.performance)!=null&&e.mark)&&!!((t=window.performance)!=null&&t.measure)}function Zt(e,t){return re(e,t),()=>Q(e,t)}function re(e,t){Xa()&&window.performance.mark("".concat(e,"-").concat(t,"-start"))}function Q(e,t){var n,r;if(Xa())try{const a="".concat(e,"-").concat(t,"-start"),o="".concat(e,"-").concat(t,"-end"),i="".concat(e,"-").concat(t,"-duration");window.performance.mark(o);const s=(r=window.performance.measure(i,a,o))!=null?r:(n=window.performance.getEntriesByName(i,"measure"))==null?void 0:n[0],l=s==null?void 0:s.duration;return l==null?void 0:l}catch(a){return}}function en(e,t,n){if(ue!=null&&ue.length){const r=ue.join(",");e.querySelectorAll(r).forEach(a=>{n===null?a.removeAttribute(t):a.setAttribute(t,n)})}}function kc(e,t){try{const n=JSON.parse(e!=null?e:"[]");if(!(n instanceof Array))throw new rt({code:"invalid-wallet-configs",message:"[".concat(t,"] invalid walletConfigs found")});return n}catch(n){throw new rt({code:"invalid-wallet-configs",message:"[".concat(t,"] Error while parsing walletConfigs JSON: ").concat(n)},{cause:n})}}function Tc(e,t){try{return e?JSON.parse(e):null}catch(n){throw new rt({code:"invalid-wallet-config",message:"[".concat(t,"] Error while parsing walletConfig JSON: ").concat(n)},{cause:n})}}function We(e,t){var n;const r=t==null?void 0:t.getLoadEligibility(e);return p.instrumentLoadEligibility({instrument:t==null?void 0:t.getInstrumentName(),result:r!=null&&r.eligible?"success":"failed",reason:r!=null&&r.eligible||r==null?void 0:r.reason}),(n=r==null?void 0:r.eligible)!=null?n:!1}function Nc(e,t){return t.filter(n=>We(e,n))}async function Za({walletInstrument:e,instanceNumber:t}){const n=e.getInstrumentName(),r=Zt(M.LoadSdk,"".concat(n,":").concat(t));try{await e.loadWalletSDK(),p.instrumentSDKLoaded({instrument:n,measurement:r(),result:"success"})}catch(o){return w.leaveBreadcrumb("Failed to load wallet SDK",{instrumentName:n,instanceNumber:t},"error"),w.notify(o),p.log({body:"Error loading wallet SDK",attributes:{instrumentName:n,instanceNumber:t,error:String(o),walletParams:JSON.stringify(e.walletParams),userAgent:navigator.userAgent}}),p.instrumentSDKLoaded({instrument:n,measurement:r(),result:"failed"}),null}let a;try{a=e.getPartnerSDKEligibility()}catch(o){w.notify(o),a={eligible:!1,reason:"uncaught exception"}}return a.eligible?(p.instrumentSDKEligible({instrument:n,result:"success"}),e):(p.instrumentSDKEligible({instrument:n,reason:a.reason,result:"failed"}),null)}function Ot(e,...t){try{const n=window[e];if(typeof n=="function")return new n(...t)}catch(n){}return null}class rn extends Te{constructor(){super(...arguments),d(this,"apiClient"),d(this,"i18n"),d(this,"policy"),d(this,"isFetchingPolicy",!1),d(this,"intersectionObserver",null),d(this,"handleIntersection",(t,n)=>{t.some(r=>r.isIntersecting)&&(this.apiClient&&this.apiClient.setVisible(),n.disconnect(),V({event:H.FirstVisible}))})}connectedCallback(){this.mountIntersectionObserver(),G.register(this.getEnabledFlags())}get shopId(){return this.getAttribute("shop-id")}get cartId(){return this.getAttribute("cart-id")}get walletConfigs(){return this.getAttribute("wallet-configs")}get recommendedWallet(){return this.getAttribute("recommended")}get fallbackWallet(){return this.getAttribute("fallback")}get variantParams(){var t;try{return JSON.parse((t=this.getAttribute("variant-params"))!=null?t:"[]")}catch(n){throw new rt({code:"invalid-variant-params",message:"variant-params must be a valid JSON string. Received variant-params: ".concat(this.getAttribute("variant-params"),", received error: ").concat(n)})}}get styleExtractorDisabled(){return this.hasAttribute("disable-compat")}get onlySdk(){return this.hasAttribute("only-sdk")}get debug(){return this.hasAttribute("debug")}triggerLoadedEvent(){document.dispatchEvent(new Event("shopify:payment_button:loaded",{bubbles:!0,cancelable:!0}))}async attributeChangedCallback(t,n,r){n!==r&&en(this,t,r)}showBuyerConsent(t,n){var r,a,o;t&&((o=(a=(r=window.Shopify)==null?void 0:r.PaymentButton)==null?void 0:a.showBuyerConsent)==null||o.call(a,i=>this.onClickSubscriptionPolicy(i,t,n)))}hideBuyerConsent(){var t,n,r;(r=(n=(t=window.Shopify)==null?void 0:t.PaymentButton)==null?void 0:n.hideBuyerConsent)==null||r.call(n)}clearUI(){this.innerHTML=""}setupManagedMarketsHandlers(t){const n=document.getElementById("shopify-buyer-consent");if((n==null?void 0:n.getAttribute("data-consent-type"))!=="managed-markets")return;const r=document.getElementById("shopify-managed-markets-terms-and-conditions-button"),a=document.getElementById("shopify-managed-markets-privacy-policy-button");if(!r||!a)return;const o=i=>{const s=i.target;if(s.id==="shopify-managed-markets-terms-and-conditions-button"){i.preventDefault(),i.stopImmediatePropagation(),this.showModalWithIframe("https://content.global-e.com/shopper-terms",t.translate("managed_markets.terms_and_conditions"),t);return}s.id==="shopify-managed-markets-privacy-policy-button"&&(i.preventDefault(),i.stopImmediatePropagation(),this.showModalWithIframe("https://content.global-e.com/privacy-policy",t.translate("managed_markets.privacy_policy"),t))};document.addEventListener("click",o,!0)}showModalWithIframe(t,n,r){const a=r.translate("managed_markets.policy_not_found"),o=1e4,i=800,s=Ba(n);document.body.appendChild(s);const l=document.createElement("div");me(l,{position:"relative",width:"100%"});const c=document.createElement("iframe");ke(c,{width:"100%",height:"100%",title:n,frameborder:"no"}),me(c,{border:"none","min-height":"50vh",display:"none"});const u=document.createElement("div");u.className="skeleton-overlay",u.innerHTML=Ua(),me(u,{background:"white"}),l.appendChild(c),l.appendChild(u),s.appendChild(l);let m=!1,h=!1,g=!1;const y=()=>{!g&&m&&h&&(u.remove(),c.style.display="block")},f=setTimeout(()=>{m||(g=!0,ls(s,a))},o);c.addEventListener("load",()=>{clearTimeout(f),m=!0,y()}),setTimeout(()=>{h=!0,y()},i),c.src=t}getEnabledFlags(){const t=this.getAttribute("enabled-flags");if(!t)return[];try{return JSON.parse(t)}catch(n){return console.warn("Invalid enabled-flags attribute value:",t),[]}}async onClickSubscriptionPolicy(t,n,r){if(t.preventDefault(),this.isFetchingPolicy)return;if(this.policy){this.showPolicy(this.policy,r);return}this.isFetchingPolicy=!0;const a=this.fetchSubscriptionPolicy(n).then(o=>(this.policy=o,o)).catch(o=>(w.notify(o),r.translate("subscriptions.policy_not_found"))).finally(()=>{this.isFetchingPolicy=!1});this.showPolicy(a,r)}async fetchSubscriptionPolicy(t){const n=await t.fetchSubscriptionPolicy();return this.policy=n,n}showPolicy(t,n){Yr(n.translate("subscriptions.cancellation_policy"),t,n.translate("subscriptions.policy_not_found"))}mountIntersectionObserver(){this.intersectionObserver=Ot("IntersectionObserver",this.handleIntersection),this.intersectionObserver?this.intersectionObserver.observe(this):V({event:H.FirstVisibleNotAvailable})}}function nn(e){var t,n;xa({shop_id:(t=e.shopId)!=null?t:Pa,cartId:(n=e.cartId)!=null?n:void 0,debug:e.debug,pageType:e.pageType,cartPrepare:G.enabled(Rt)})}class an{constructor(t,n){d(this,"addToCartMutationObserver"),d(this,"addToCartForm"),d(this,"addToCartButtons"),this.element=t,this.onFormChanged=n,this.addToCartMutationObserver=null,this.addToCartForm=null,this.addToCartButtons=[]}setupMutationObservers(){if(this.findAndSetAddToCartButtons(),!this.addToCartForm)return;this.syncComponentStateWithForm();const t=new MutationObserver(()=>this.reobserveOnFormChanges());this.addToCartMutationObserver=new MutationObserver(()=>this.syncComponentStateWithForm()),t.observe(this.addToCartForm,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),this.observeAddToCartButtons()}syncComponentStateWithForm(){if(!this.addToCartForm){this.onFormChanged({disabled:!0,hasSellingPlan:!1});return}const t=Wa(this.addToCartForm),n=!!(this.addToCartButtons.length>0&&this.addToCartButtons.every(r=>r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"));this.onFormChanged({disabled:n||t===null,hasSellingPlan:Ql(this.addToCartForm),variantId:t==null?void 0:t.variantId,sellingPlanId:t==null?void 0:t.sellingPlanId})}observeAddToCartButtons(){this.addToCartButtons.forEach(t=>{this.addToCartMutationObserver.observe(t,{attributes:!0})})}reobserveOnFormChanges(){var t;(t=this.addToCartMutationObserver)==null||t.disconnect(),this.findAndSetAddToCartButtons(),this.observeAddToCartButtons(),this.syncComponentStateWithForm()}findAndSetAddToCartButtons(){if(this.addToCartForm=Ne({page:"product",element:this.element}),this.addToCartForm){const t=this.addToCartForm.querySelectorAll("[type=submit]");t instanceof NodeList&&(this.addToCartButtons=[...t])}}}function Rc(e,t,n){try{const r=JSON.parse(e!=null?e:"{}"),a=JSON.parse(t!=null?t:JSON.stringify(va));if(r===null||Object.keys(r).length===0){if(!(a instanceof Object))throw p.walletConfigDeveloperError(),new rt({code:"invalid-fallback-wallet-config",message:"[".concat(n,"] Invalid fallback wallet configs JSON")});return{recommendedWallet:null,fallbackWallet:a}}return{recommendedWallet:r,fallbackWallet:a}}catch(r){throw p.walletConfigDeveloperError(),new rt({code:"invalid-recommended-fallback-config",message:"[".concat(n,"] Error while parsing recommended/fallback JSON: ").concat(r)},{cause:r})}}const Dc=".shopify-payment-button__button--hidden{visibility:hidden}.shopify-payment-button__button{height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);min-height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px);width:100%;border:none;box-shadow:0 0 0 0 transparent;color:#fff;cursor:pointer;display:block;font-size:1em;font-weight:500;line-height:1;text-align:center;transition:background .2s ease-in-out}.shopify-payment-button__button[disabled]{opacity:.6;cursor:default}.shopify-payment-button__button--unbranded{background-color:#1990c6;padding:1em 2em}.shopify-payment-button__button--unbranded:hover:not([disabled]){background-color:#136f99}.shopify-payment-button__more-options{background:transparent;border:0 none;cursor:pointer;display:block;font-size:1em;margin-top:1em;text-align:center;text-decoration:underline;width:100%}.shopify-payment-button__more-options.shopify-payment-button__skeleton{height:auto!important;min-height:0!important;border-radius:4px!important;width:50%;margin-left:25%;margin-right:25%}.shopify-payment-button__more-options[disabled]{opacity:.6;cursor:default!important}.shopify-payment-button__button.shopify-payment-button__button--branded{display:flex;flex-direction:column;position:relative;z-index:1}.shopify-payment-button__button.shopify-payment-button__button--branded .shopify-cleanslate{flex:1!important;display:flex!important;flex-direction:column!important}.shopify-payment-button__button.button.loading{position:relative;color:transparent}.shopify-payment-button__button.button.loading>.loading-overlay__spinner{top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;height:100%;display:flex;align-items:center}.shopify-payment-button__button.button.loading>.loading-overlay__spinner .spinner{width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}.button.loading>.loading-overlay__spinner .path{stroke:#fff}.shopify-payment-button__button .loading-overlay__spinner{width:1.8rem;display:inline-block}.shopify-payment-button__button .spinner{animation:shopify-rotator 1.4s linear infinite}@keyframes shopify-rotator{0%{transform:rotate(0)}to{transform:rotate(270deg)}}.shopify-payment-button__button .path{stroke-dasharray:280;stroke-dashoffset:0;transform-origin:center;stroke:#121212;animation:shopify-dash 1.4s ease-in-out infinite}@media screen and (forced-colors: active){.shopify-payment-button__button .path{stroke:CanvasText}}@keyframes shopify-dash{0%{stroke-dashoffset:280}50%{stroke-dashoffset:75;transform:rotate(135deg)}to{stroke-dashoffset:280;transform:rotate(450deg)}}#shopify-buyer-consent{margin-top:1em;display:inline-block;width:100%}#shopify-buyer-consent.hidden{display:none}#shopify-subscription-policy-button,#shopify-managed-markets-terms-and-conditions-button,#shopify-managed-markets-privacy-policy-button{background:none;border:none;padding:0;text-decoration:underline;font-size:inherit;cursor:pointer}#shopify-subscription-policy-button:before,#shopify-managed-markets-terms-and-conditions-button:before,#shopify-managed-markets-privacy-policy-button:before{box-shadow:none}@keyframes acceleratedCheckoutLoadingSkeleton{50%{opacity:var(--shopify-accelerated-checkout-skeleton-animation-opacity-start, 1)}75%{opacity:var(--shopify-accelerated-checkout-skeleton-animation-opacity-end, .5)}to{opacity:var(--shopify-accelerated-checkout-skeleton-animation-opacity-start, 1)}}.shopify-payment-button__skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede);box-sizing:border-box;text-decoration:none!important;height:var(--shopify-accelerated-checkout-button-block-size, inherit);min-height:25px;max-height:55px;border-radius:var( --shopify-accelerated-checkout-button-border-radius, inherit )}",Oc='.accelerated-checkout-button{height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);min-height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}:host([page-type="cart_page"]){display:block;height:100%}:host([page-type="cart_page"]) .accelerated-checkout-button{height:100%;min-height:0;width:100%;border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}:host([page-type="product"]) .accelerated-checkout-button{min-width:150px}@media (forced-colors: active){.accelerated-checkout-button{border:1px solid transparent!important}:host([page-type="cart_page"]) .accelerated-checkout-button{border:1px solid transparent!important}}',xc=70;class qt{constructor(t,n,r,a){d(this,"red"),d(this,"green"),d(this,"blue"),d(this,"opacity"),this.red=t||0,this.green=n||0,this.blue=r||0,this.opacity=typeof a>"u"?1:a}getLuminance(){const t=this.red&255,n=this.green&255,r=this.blue&255;return t*.2126+n*.7152+r*.0722}isDark(){return this.opacity===0?!1:this.getLuminance()/this.opacity<xc}blendWith(t,n){this.opacity=1-(1-t.opacity)*(1-n.opacity),this.red=this.blend(t.red,n.red,t,n),this.green=this.blend(t.green,n.green,t,n),this.blue=this.blend(t.blue,n.blue,t,n)}blend(t,n,r,a){return Math.round(t*r.opacity/this.opacity+n*a.opacity*(1-r.opacity)/this.opacity)}}function Lc(e){const t=[...e];let n=new qt(0,0,0,0),r=new qt(255,255,255,1),a=t.shift();for(;a;)n.opacity>0&&a.opacity>0?(r=new qt(0,0,0,0),r.blendWith(a,n)):a.opacity>0?r=a:r=n,n=r,a=t.shift();return r}const kr=new qt(255,255,255,1);function Mc(e){const t=[];let n=e;for(;n.parentElement;){n=n.parentElement;const r=window.getComputedStyle(n).backgroundColor,a=Uc(r);if(r&&t.push(a),a.opacity===1)break}try{return Lc(t.reverse())}catch(r){return w.notify(new to("[BackgroundDetection] Failed to blend colors for element ".concat(e.outerHTML),{cause:r})),kr}}const zc=new qt(0,0,0,0);function Uc(e){if(!e)return kr;if(e==="transparent")return zc;try{const t=e.split("(")[1].split(")")[0].replace(" ","").split(",");return new qt(Number(t[0]),Number(t[1]),Number(t[2]),typeof t[3]>"u"?1:Number(t[3]))}catch(t){w.notify(new to("[BackgroundDetection] Failed to convert rgbString to array ".concat(e),{cause:t}))}return kr}class to extends Error{constructor(){super(...arguments),d(this,"name","ColorProcessingError")}}var pt;class At extends Te{constructor(){super(),d(this,"name",b.Unknown),d(this,"i18n"),d(this,"dataSource"),d(this,"apiClient"),d(this,"classNames"),d(this,"containerInstanceNumber"),d(this,"supportsSubscriptions"),d(this,"supportsDeferredPurchaseOptions"),d(this,"onRendered"),d(this,"setI18n"),d(this,"setDataSource"),d(this,"setApiClient"),d(this,"setClassNames"),d(this,"setContainerInstanceNumber"),d(this,"parsedWalletParams"),j(this,pt),this.onRendered=()=>{},this.supportsSubscriptions=!1,this.supportsDeferredPurchaseOptions=!1,[this.i18n,this.setI18n]=ht(),[this.dataSource,this.setDataSource]=ht(),[this.apiClient,this.setApiClient]=ht(),[this.classNames,this.setClassNames]=ht(),[this.containerInstanceNumber,this.setContainerInstanceNumber]=ht()}async cleanupOnFailure(t,n){var r;try{await t()}catch(a){w.notify(new Bc("An error occurred requiring cleanup when attempting to render the ".concat(n," instrument: ").concat(a),{cause:a}));const o=await this.containerInstanceNumber;p.instrumentLoaded({instrumentOrComponentName:n,result:"failed",measurement:Q(M.ButtonDisplay,"".concat(n,":").concat(o))}),(r=this.parentElement)==null||r.remove()}}attributeChangedCallback(t,n,r,a){n!==r&&t==="disabled"&&a&&(r===""?(a.setAttribute("aria-disabled","true"),a.setAttribute("disabled","")):(a.removeAttribute("aria-disabled"),a.removeAttribute("disabled")))}get pageType(){return this.getAttribute("page-type")||N.Unknown}get buttonTheme(){return Mc(this).isDark()?"LIGHT":"DARK"}get isCTA(){return this.hasAttribute("call-to-action")}get walletParams(){var t;if(this.parsedWalletParams===void 0)try{this.parsedWalletParams=JSON.parse((t=this.getAttribute("wallet-params"))!=null?t:"{}")}catch(n){throw new rt({code:"invalid-wallet-params",message:"[".concat(this.name,"] Error while parsing wallet-params JSON: ").concat(n)},{cause:n})}return this.parsedWalletParams}async initializeShadowStyles(t,n=""){const r=document.createElement("style");r.innerHTML=[Oc,n].join("\n"),t.appendChild(r)}async ensureLightDOMIsNotEmpty(){this.textContent="\xA0"}dispatchWalletEvent({eventName:t,detail:n={}}){var r;(r=this.parentElement)==null||r.dispatchEvent(new CustomEvent(t,{detail:n}))}getOrCreateShadowRoot(){return v(this,pt)||F(this,pt,this.attachShadow({mode:"closed"})),v(this,pt)}clearShadowRoot(){v(this,pt)&&(v(this,pt).innerHTML="")}}pt=new WeakMap;class Bc extends Error{constructor(){super(...arguments),d(this,"name","CleanupOnFailureError")}}class Fc extends At{constructor(){super(...arguments),d(this,"name",b.BuyItNow),d(this,"button",null)}static get observedAttributes(){return["disabled"]}connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name)}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button)}async handleClick(){var t,n;if(this.disabled||!this.button||this.button.getAttribute("aria-disabled"))return;this.disabled=!0;const[r,a]=await Promise.all([this.i18n,this.dataSource]);try{const{decelerationReason:o,cart:i,customValidationError:s,unrecoverableError:l,abortReason:c}=await Et({element:this,instrumentName:this.name,dataSource:a});if(l){p.sheetClicked({instrument:this.name,result:"rejected",reason:"unrecoverable_error"}),Mt(r,l);return}if(c==="out_of_stock"){p.sheetClicked({instrument:this.name,result:"rejected",reason:"out_of_stock"}),bt(r);return}if(s){p.sheetClicked({instrument:this.name,result:"rejected",reason:"custom_validation_error"}),Lt(r,s.message);return}if(o){p.sheetClicked({instrument:this.name,result:"success",reason:"deceleration"}),U({checkoutUrl:(t=i==null?void 0:i.checkoutUrl)!=null?t:"",instrumentName:this.name,reason:o});return}p.sheetClicked({instrument:this.name,result:"success"}),wt((n=i==null?void 0:i.checkoutUrl)!=null?n:"","allow_redirect")}catch(o){w.notify(o),p.sheetClicked({instrument:this.name,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in Buy It Now Button click",attributes:{error:String(o)}}),Nt(r)}}async render(){var t;this.button||(this.button=or());const n=await this.classNames;this.button.textContent=(await this.i18n).translate("instruments_copy.checkout.buy_now"),this.button.className=n,this.disabled&&this.button.setAttribute("aria-disabled","true"),this.button.onclick=()=>this.handleClick(),this.appendChild(this.button),(t=this.onRendered)==null||t.call(this)}}const $c=1e3;function Hc(){const e=navigator.userAgent,t=e.indexOf("Android")>-1,n=e.indexOf("Chrome/")>-1,r=parseInt((/Chrome\/([0-9]+)/.exec(e)||["0","0"])[1],10);return t&&n&&r===114}function Gc(e){return Promise.race([e,new Promise((t,n)=>setTimeout(()=>n(new Error("timed out")),$c))])}class Ct{constructor(t){d(this,"walletParams"),d(this,"supportsSubscriptions"),d(this,"supportsDeferredPurchaseOptions");var n,r;this.walletParams=t.wallet_params,this.supportsSubscriptions=(n=t.supports_subs)!=null?n:!1,this.supportsDeferredPurchaseOptions=(r=t.supports_def_opts)!=null?r:!1}static walletName(){throw new Error("Must define walletName for WalletInstrument subclass")}async createWebComponent({walletContainer:t,dataSource:n,i18n:r,apiClient:a,containerInstanceNumber:o,classNames:i="",callToAction:s,pageType:l=N.ProductPage,slot:c="button",onRendered:u=()=>{}}){var m,h,g;const y=this.getWebComponentName();if(!ct(y,this.getWebComponentClass(),{isChildCustomElement:!0}))throw new tt("Failed to define custom element ".concat(y,", aborting execution"));try{await Gc(customElements.whenDefined(y))}catch(E){throw new tt("Timeout waiting for custom element ".concat(y," to be defined"))}const f=document.createElement(y);if(!(f instanceof At))throw new tt("Failed to create web component instance for ".concat(y,", element is not a WalletButtonElement"));const A={"access-token":(m=t.accessToken)!=null?m:"","buyer-country":(h=t.buyerCountry)!=null?h:"","buyer-currency":t.buyerCurrency,"wallet-params":JSON.stringify((g=this.walletParams)!=null?g:{}),"page-type":l,slot:c};try{t.disabled&&f.setAttribute("disabled",""),ke(f,A),t.isShippingRequired&&f.setAttribute("requires-shipping",""),t.hasSellingPlan&&f.setAttribute("has-selling-plan",""),t.pciEnabled&&f.setAttribute("pci-enabled","")}catch(E){const D=E;throw D.message.includes("setAttribute is not a function")&&Hc()?new tt(D.message):D}if(s&&f.setAttribute("call-to-action",""),typeof f.setDataSource!="function")throw new tt("Custom element ".concat(y," is not properly upgraded, aborting execution"));return f.setDataSource(n),f.setApiClient(a),f.setI18n(r),f.setClassNames(i),f.setContainerInstanceNumber(o),f.supportsSubscriptions=this.supportsSubscriptions,f.supportsDeferredPurchaseOptions=this.supportsDeferredPurchaseOptions,f.onRendered=u,f}loadWalletSDK(){return Promise.resolve()}getLoadEligibility(t){return{eligible:!0}}getPartnerSDKEligibility(){return{eligible:!0}}isInIframe(){return typeof window>"u"||window.self!==window.top}}class Vc extends Ct{static walletName(){return"buy_it_now"}getWebComponentName(){return"shopify-buy-it-now-button"}getInstrumentName(){return b.BuyItNow}getWebComponentClass(){return Fc}}const jc="shopify-paypal-button[disabled]{opacity:.5;cursor:not-allowed}shopify-paypal-button div.paypal-buttons>iframe{z-index:auto!important;border-radius:0!important;box-shadow:none}",qc='::slotted(div){height:100%}:host([page-type="cart_page"]) ::slotted(div){width:100%;min-width:100px;display:flex;justify-content:center}:host([page-type="cart_page"]) .accelerated-checkout-button{overflow:hidden;display:flex;justify-content:center}';async function Wt(e){const{cartId:t,cartClient:n,instrumentName:r,abortSignal:a}=e;try{if(!t)throw new Error("[".concat(r,"] provided no cart ID when updating buyer identity"));if(!n)throw new Error("[".concat(r,"] provided invalid cart client when updating buyer identity"));return await n.updateCartBuyerIdentity(e,a)}catch(o){throw p.updateFailed({instrument:r,request:"updateBuyerIdentity",error:o}),o}}async function on({cartId:e,totalAmount:t,paymentMethod:n,billingAddress:r,cartClient:a,instrumentName:o,abortSignal:i,hasSellingPlan:s,canUsePaymentMethodForFreeOrder:l}){try{if(!e)throw new Error("[".concat(o,"] provided no cart ID when updating payment"));if(!t)throw new Error("[".concat(o,"] provided no total amount when updating payment"));if(!n)throw new Error("[".concat(o,"] provided no apple pay wallet content when updating payment"));if(!a)throw new Error("[".concat(o,"] provided invalid cart client when updating payment"));const c={freePaymentMethod:{billingAddress:r}};return await a.updateCartPayment(e,{amount:{amount:t.amount,currencyCode:t.currencyCode},...Number(t.amount)<=0&&!l&&!s?c:n},o,i)}catch(c){throw p.updateFailed({instrument:o,request:"updatePayment",error:c}),c}}function eo(e){return window[ro(e)]}function ro(e){return"paypal-".concat(e.replace(/[^a-zA-Z0-9]/g,""))}const Wc="RESTRICTED_WALLET_ACCOUNT",Yc="GENERIC_ERROR",Kc="NO_PENDING_TASK",Qc="WALLET_SERVICE_DISABLED",Jc="FAILED_TO_ENQUEUE_BACKGROUND_JOB",Xc="REQUEST_MISSING_VALID_MERCHANDISE_SOURCE",Zc="THROTTLE_EXCEEDED",td="INTERNAL_SERVER_ERROR",ed=[Yc,Kc,Qc,Jc,Xc,Zc,td];function Mn(e){return e==null?void 0:e.map(t=>{var n,r;return{code:(n=t.extensions)==null?void 0:n.code,isLoggable:ed.includes((r=t.extensions)==null?void 0:r.code)}}).find(({code:t,isLoggable:n})=>t===Wc||n)}function Ye(e){if(!e)return null;const t=getComputedStyle(e).borderRadius;return t.includes("px")?parseInt(t,10):null}function Ke(e){if(!e)return null;const t=getComputedStyle(e).height;return t.includes("px")?parseInt(t,10):null}const fr=25,zn=55,rd=["cart_throttled","payment_method_not_applicable","invalid_payment_deferred_payment_required","nested_line_subscription","nested_line_deferred_payment"],br="PAYPAL_CALLBACK_HANDLED_ERROR",nd=["Can not set name for cross-domain window","too much recursion"];var mt;class ad extends At{constructor(){super(...arguments),d(this,"name",b.PayPal),d(this,"abortController",null),d(this,"cartId"),d(this,"sdkButtonsComponent"),d(this,"container",null),d(this,"resizeObserver",null),d(this,"buttonHeight"),d(this,"rendering",!1),d(this,"prevBorderRadius",0),d(this,"prevHeight",0),j(this,mt,!1)}connectedCallback(){this.resizeObserver=Ot("ResizeObserver",()=>this.onResize()),this.cleanupOnFailure(this.render.bind(this),this.name)}async disconnectedCallback(){var t;this.innerHTML="",this.clearShadowRoot(),await this.teardownPayPalButton(),(t=this.resizeObserver)==null||t.disconnect()}async teardownPayPalButton(){var t;try{await((t=this.sdkButtonsComponent)==null?void 0:t.close().catch(()=>{}))}catch(n){}finally{this.sdkButtonsComponent=void 0}}async onResize(){const t=Ye(this.container),n=Ke(this.container),r=t!==null&&this.prevBorderRadius!==t||n!==null&&this.prevHeight!==n;!this.rendering&&r&&(await this.teardownPayPalButton(),this.container.innerHTML="",await this.cleanupOnFailure(()=>this.renderFromPayPalSDK(),this.name))}async render(){var t;const n=this.getOrCreateShadowRoot(),r=document.createElement("div");r.className=xt.BUTTON;const a=document.createElement("style");a.innerHTML=jc,this.appendChild(a),await this.initializeShadowStyles(n,qc),n.appendChild(r),this.container=r,await as(),this.renderFromPayPalSDK(),(t=this.resizeObserver)==null||t.observe(this.container)}getHeight(){const t=Ke(this.container);return t?t>=fr&&t<=zn?t:t<fr?(console.debug("[PayPalButton] Container height is less than the minimum height of the PayPal button. Using the minimum height of 25px."),fr):(console.debug("[PayPalButton] Container height is greater than the maximum height of the PayPal button. Using the maximum height of 55px."),zn):ri}async renderFromPayPalSDK(){var t,n,r;if(!this.container)throw new Error("button container not set when attempting to render");this.rendering=!0;const a=this.requiresBillingAgreement(),o=async()=>this.createToken({apiClientPromise:this.apiClient,requiresBillingAgreement:a});let i,s;a?s=o:i=o;const l=Ye(this.container),c=this.getHeight();this.prevHeight=c;const u={color:"gold",label:this.isCTA?"pay":"paypal",disableMaxWidth:!0,height:c,shape:"sharp"};l&&l>0&&(u.borderRadius=l,this.prevBorderRadius=l);const m=await this.i18n;this.sdkButtonsComponent=(n=(t=eo(this.walletParams.sdkUrl))==null?void 0:t.Buttons)==null?void 0:n.call(t,{fundingSource:"paypal",style:u,createOrder:i,createBillingAgreement:s,onApprove:async g=>{await this.onApprove(g)},onCancel:()=>{this.cancelPaymentSheet("Payment sheet cancelled")},onClick:this.onClick.bind(this),onError:g=>{this.onError(g,m)}});let h=!1;try{await((r=this.sdkButtonsComponent)==null?void 0:r.render(this.container)),h=!0}catch(g){p.renderFailed(this.name),p.log({body:"PayPal Button not able to render into container.",attributes:{pageType:this.pageType,error:g==null?void 0:g.toString()}})}finally{this.rendering=!1}h&&this.onRendered()}cancelPaymentSheet(t){var n;F(this,mt,!0),p.sheetCancelled(this.name),(n=this.abortController)==null||n.abort("[PayPal] ".concat(t))}async onClick(t,n){var r,a;if(this.disabled)return n.reject();F(this,mt,!1),this.abortController=Ot("AbortController");const o=this.getBoundingClientRect(),i=o.left+o.width/2,s=o.top+o.height/2,l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1,clientX:i,clientY:s,screenX:window.screenX+i,screenY:window.screenY+s});this.dispatchEvent(l);const[c,u]=await Promise.all([this.dataSource,this.i18n]);try{const{decelerationReason:m,cart:h,customValidationError:g,unrecoverableError:y,abortReason:f}=await Et({element:this,instrumentName:this.name,dataSource:c});return y?(p.sheetClicked({instrument:this.name,result:"rejected",reason:"unrecoverable_error"}),p.log({body:"Unrecoverable error detected in PayPal sheet clicked",attributes:{unrecoverableError:y}}),Mt(u,y),n.reject()):f==="out_of_stock"?(p.sheetClicked({instrument:this.name,result:"rejected",reason:"out_of_stock"}),bt(u),n.reject()):g?(p.sheetClicked({instrument:this.name,result:"rejected",reason:"custom_validation_error"}),p.log({body:"Custom validation error detected in PayPal sheet clicked",attributes:{errorMessage:g==null?void 0:g.message}}),Lt(u,g.message),n.reject()):this.hasSellingPlanConflict(h)?(p.sheetClicked({instrument:this.name,result:"success",reason:"redirected_to_checkout"}),wt((r=h==null?void 0:h.checkoutUrl)!=null?r:""),n.reject()):m?(p.sheetClicked({instrument:this.name,result:"success",reason:"deceleration"}),U({checkoutUrl:(a=h==null?void 0:h.checkoutUrl)!=null?a:"",instrumentName:this.name,reason:m}),n.reject()):(this.cartId=h.id,n.resolve())}catch(m){return p.sheetClicked({instrument:this.name,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in PayPal sheet clicked",attributes:{error:String(m),location:"onClick",...this.cartId&&{cartId:ze(this.cartId)}}}),w.notify(m),Nt(u),n.reject()}}async createToken({apiClientPromise:t,requiresBillingAgreement:n}){const r=await t;try{if(!this.cartId)throw new Error("cartId not found when creating token");const a=await r.paypalTokenCreate({cartId:this.cartId,billingAgreement:n});return p.sheetClicked({instrument:this.name,result:"success"}),a}catch(a){throw v(this,mt)||(a instanceof tt?p.sheetClicked({instrument:this.name,result:"rejected",reason:"silenced_error"}):(p.sheetClicked({instrument:this.name,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in PayPal sheet clicked",attributes:{error:String(a),location:"createToken",...this.cartId&&{cartId:ze(this.cartId)}}}),w.notify(a))),Nt(await this.i18n),new Error(br)}}async onApprove({orderID:t,payerID:n,billingToken:r}){var a;try{if(p.authorizationAttempt(this.name),re(M.AuthorizationLatency,this.name),!this.cartId)throw new Error("Cart not found");const o=await this.apiClient,i=this.requiresBillingAgreement()&&r!=null?r:t,{billingAddress:s,destinationAddress:l,expiresAt:c,email:u,remoteOrderId:m,payerApprovedAmount:h}=await o.paypalBuyerDetailsFetch(i,this.cartId),g=await Wt({cartId:this.cartId,cartClient:o,instrumentName:this.name,emailAddress:u,streetAddress:l});if(!(g!=null&&g.data))throw new Error("Cart not found");if(await this.decelerateOrAbort(g))return;const{id:y,totalAmount:f,checkoutUrl:A}=g.data,E=this.parseAddress({billingAddress:s,destinationAddress:l}),D=await on({abortSignal:(a=this.abortController)==null?void 0:a.signal,cartClient:o,cartId:y,instrumentName:b.PayPal,billingAddress:E,paymentMethod:{walletPaymentMethod:{paypalWalletContent:{billingAddress:E,email:u,expiresAt:c,payerId:n,token:m!=null?m:t,acceptedSubscriptionTerms:!1,vaultingAgreement:!1,merchantId:this.walletParams.merchantId,...h&&{payerApprovedAmount:h}}}},canUsePaymentMethodForFreeOrder:!0,totalAmount:f});if(await this.decelerateOrAbort(D))return;p.authorizationComplete({instrument:this.name,result:"success",measurement:Q(M.AuthorizationLatency,this.name)}),wt(A)}catch(o){throw v(this,mt)||(p.authorizationComplete({instrument:this.name,result:"failed",measurement:Q(M.AuthorizationLatency,this.name)}),w.notify(o)),Nt(await this.i18n),new Error(br)}}onError(t,n){var r;if(v(this,mt)||t.message.includes(br))return;if(t.message==="Window is closed, can not determine type"){this.cancelPaymentSheet("Window Closed Error");return}if(t.message==="Detected popup close"){this.cancelPaymentSheet("Popup Closed Error");return}t.message==="RESTRICTED_WALLET_ACCOUNT"?p.log({body:"PayPal modal closed due to error: ".concat(t)}):nd.some(o=>t.message.includes(o))?p.log({body:"Internal PayPal error occurred"}):w.notify(new od(t)),p.sheetFailed(this.name,t),(r=this.abortController)==null||r.abort("[PayPal] Error occurred");const a=n.translate("brand.paypal");it(a,n)}requiresBillingAgreement(){return this.walletParams.hasManagedSellingPlanState||this.walletParams.requiresBillingAgreement}async decelerateOrAbort(t){if(t.abortReason==="out_of_stock")return await this.handleOutOfStock(),!0;if(!t.data)return!1;const{totalAmount:n,checkoutUrl:r}=t.data;let a;return t.decelerationReason&&rd.includes(t.decelerationReason)?a=t.decelerationReason:tn({currentCartTotal:n,initialBuyerCurrency:this.buyerCurrency})&&(a="currency_changed"),a?(U({checkoutUrl:r,instrumentName:this.name,reason:a}),!0):!1}async handleOutOfStock(){p.authorizationComplete({instrument:this.name,result:"failed",measurement:Q(M.AuthorizationLatency,this.name)}),bt(await this.i18n)}hasSellingPlanConflict(t){const{hasManagedSellingPlanState:n}=this.walletParams;return n==null||!t?!1:t.lineItems.some(r=>r.sellingPlanAllocation!=null)!==n}parseAddress({billingAddress:t,destinationAddress:n}){const r=G.enabled(sl)?n:t!=null?t:n;return r.country?r:this.buyerCountry?{...r,country:this.buyerCountry}:(w.notify(new Error("PayPal address missing country and buyer country is not set")),{...r,country:"ZZ"})}}mt=new WeakMap;class od extends et{constructor(t){super(t.message,{cause:t.cause}),d(this,"name","PayPalError"),d(this,"useHashPrefix",!0),this.stack=t.stack}}const Ft=class sp extends Ct{static walletName(){return"paypal"}constructor(t){super(t)}getWebComponentName(){return"shopify-paypal-button"}getInstrumentName(){return b.PayPal}getWebComponentClass(){return ad}loadWalletSDK(){let t=sp.paypalSDKPromiseByUrl.get(this.walletParams.sdkUrl);if(t)return p.log({body:"Returning cached PayPal SDK promise",attributes:{sdkUrl:this.walletParams.sdkUrl}}),t;const n=document.createElement("script");return n.setAttribute("src",this.walletParams.sdkUrl),t=new Promise((r,a)=>{n.setAttribute("data-namespace",ro(this.walletParams.sdkUrl)),n.onload=()=>r(),n.onerror=o=>{sp.paypalSDKPromiseByUrl.delete(this.walletParams.sdkUrl),n&&document.body.contains(n)&&document.body.removeChild(n),a(o)},document.body.appendChild(n)}),sp.paypalSDKPromiseByUrl.set(this.walletParams.sdkUrl,t),t}getLoadEligibility(){return this.isInIframe()?{eligible:!1,reason:"cannot be loaded in an iframe"}:{eligible:!0}}getPartnerSDKEligibility(){var t,n;try{return(n=(t=eo(this.walletParams.sdkUrl))==null?void 0:t.Buttons)!=null&&n.call(t).isEligible()?{eligible:!0}:{eligible:!1,reason:"PayPal SDK not eligible"}}catch(r){throw new rt({code:"paypal-sdk-eligibility-check-failed",message:"PayPal SDK 'isEligible' method failed unexpectedly: ".concat(r)})}}};d(Ft,"paypalSDKPromiseByUrl",new Map);let Tr=Ft;const id=".apple-pay-button{display:flex;align-items:center;justify-content:center;width:100%;padding:0!important;cursor:pointer;border:none}.apple-pay-button:hover:not(:disabled){filter:brightness(92%)}.apple-pay-button:disabled{opacity:.5;cursor:not-allowed}.apple-pay-button svg{height:100%;flex-shrink:0}.apple-pay--content{font-size:16px;font-family:San Francisco,sans-serif;width:100%;height:100%;flex-grow:1;display:flex;align-items:center;justify-content:center;white-space:pre}.apple-pay--light{background:#fff;color:#000}.apple-pay--light svg{fill:#000}.apple-pay--dark{background:#000;color:#fff}.apple-pay--dark svg{fill:#fff}",Nr={UK:"GB",JA:"JP"},sd={EG:"EG",AE:"AE"},no=["AS","GU","MP","PR","VI"];no.forEach(e=>{Nr[e]="US"});const ld=/^[A-Z]{1,2}[0-9]{1,2}[A-Z]?$/,cd=/^[A-Z][0-9][A-Z]$/;function dd({postalCode:e,countryCode:t}){let n=e;const r=e.trim().toUpperCase();return t==="CA"&&cd.test(r)?n="".concat(r," 0Z0"):t==="GB"&&ld.test(r)&&(n="".concat(r," 0ZZ")),n}function Re(e,t=!1){var n,r;const a=e.countryCode,o={firstName:e.givenName||void 0,lastName:e.familyName||void 0,address1:(n=e==null?void 0:e.addressLines)==null?void 0:n[0],address2:((r=e==null?void 0:e.addressLines)==null?void 0:r[1])||void 0,city:e.locality||void 0,zip:e.postalCode||void 0,province:e.administrativeArea||e.subLocality||void 0,country:ud(e.countryCode),phone:e.phoneNumber||void 0};return a&&Object.keys(sd).includes(a.toUpperCase())&&(o.province=e.locality||void 0,o.city=e.administrativeArea||e.subLocality||void 0),t&&o.zip&&(o.zip=dd({postalCode:o.zip,countryCode:o.country})),o.country==="HK"&&(o.zip=void 0,o.province=e.postalCode),a&&no.includes(a)&&(o.province=a),o.lastName||(o.lastName=o.firstName),o}function ud(e){if(!e)return"ZZ";const t=e.toUpperCase();return Object.keys(Nr).includes(t)?Nr[t]:t}function hd(e,t){return e.map(n=>{const{title:r,deliveryPromise:a}=gd(n,t);return{title:r,estimatedCost:{amount:md(n),currencyCode:n[0].estimatedCost.currencyCode},handle:oo(n),deliveryPromise:a}})}function pd(e,t){return e.map(n=>{const{title:r,description:a}=yd(n,t);return{title:r,description:a,handle:oo(n)}})}function ao({deliveryGroups:e}){return e.map(t=>t.deliveryOptions.filter(({deliveryMethodType:n})=>n==="SHIPPING").map(n=>({...n,groupType:t.groupType}))).reduce((t,n)=>t.flatMap(r=>n.map(a=>[...r,a])),[[]])}function md(e){return e.reduce((t,n)=>t+Number(n.estimatedCost.amount),0).toFixed(2)}function gd(e,t){const n=e.find(l=>l.groupType===Dt.OneTimePurchase),r=e.find(l=>l.groupType===Dt.Subscription),a=[...new Set([n==null?void 0:n.title,r==null?void 0:r.title])].filter(Boolean),o=[...new Set([n==null?void 0:n.deliveryPromise,r==null?void 0:r.deliveryPromise])].filter(Boolean),i=a.length===2?t.translate("shipping_methods.connect_shipping_methods",{methodOne:a[0],methodTwo:a[1]}):a[0],s=o.length===2?t.translate("delivery_promises.connect_delivery_promises",{promiseOne:o[0],promiseTwo:o[1]}):o[0];return{title:i,deliveryPromise:s}}function yd(e,t){const n=e.find(i=>i.groupType===Dt.OneTimePurchase),r=e.find(i=>i.groupType===Dt.Subscription),a=e.map(fd).filter(Boolean).join(", ");let o=(n==null?void 0:n.title)||(r==null?void 0:r.title);return n&&r&&(o=t.translate("shipping_methods.connect_shipping_methods",{methodOne:n.title,methodTwo:r.title})),{title:o,description:a}}function fd(e){const t=Number(e.estimatedCost.amount).toFixed(2),n=e.estimatedCost.currencyCode,r=e.deliveryPromise;return r?"(".concat(r,") ").concat(t," ").concat(n):"".concat(t," ").concat(n)}function oo(e){return e.map(t=>t.handle).join(",")}function io({deliveryGroups:e,i18n:t}){const n=e.some(r=>r.groupType===Dt.Subscription);return e.map(r=>{var a;let o=t.translate("order_summary.shipping");return n&&(o=r.groupType===Dt.Subscription?t.translate("order_summary.shipping_subscription"):t.translate("order_summary.shipping_one_time_purchase")),{label:o,amount:yt(((a=r.selectedDeliveryOption)==null?void 0:a.estimatedCost.amount)||0)}})}function bd(e,t){return he({label:e,possibleLines:[t]})[0]}function wd({subtotal:e,deliveryGroups:t,duties:n,taxes:r,discountAllocations:a,i18n:o,formattedRecurringTotals:i,lineItems:s}){var l;const c=he({label:o.translate("order_summary.subtotal"),possibleLines:[e]}),u=io({deliveryGroups:t,i18n:o}),m=he({label:o.translate("order_summary.duties"),possibleLines:[n]}),h=he({label:o.translate("order_summary.taxes"),possibleLines:[r]}),g=i.map(A=>({label:A,amount:"0.00",type:"pending"})),y=g.length?[{label:o.translate("order_summary.subscriptions.recurring_total_tooltip_line"),amount:"0.00",type:"pending"}]:[],f=(l=a==null?void 0:a.flatMap(A=>{var E;const D=(E=A.title)!=null?E:A.code;return he({label:D!=null?D:o.translate("order_summary.discount"),possibleLines:[A.discountedAmount],isDiscount:!0})}))!=null?l:[];return[...za(s,(A,E)=>({label:A,amount:E,type:"final"})),...c,...u,...m,...h,...f,...g,...y]}function he({label:e,possibleLines:t,isDiscount:n=!1}){return t.filter(r=>(r==null?void 0:r.amount)!==void 0).map(r=>({label:e,amount:n?"-".concat(yt(r.amount)):yt(r.amount)}))}function Un(e,t){if(!e.length)return[];const n=ao({deliveryGroups:e});return hd(n,t).map(r=>{var a;return{label:r.title||"",amount:r.estimatedCost.amount,identifier:r.handle,detail:(a=r.deliveryPromise)!=null?a:""}})}const _d=["decelerate","abort","show_error","complete","update"];class Qe extends et{constructor(){super(...arguments),d(this,"name","UnhandledActionError")}}class so{constructor(){d(this,"generatePrioritizedPaymentSheetAction",(t,n)=>{let r;const a=[],o=[],i=[],s=n.filter(c=>c.code!=="PAYMENTS_UNACCEPTABLE_PAYMENT_AMOUNT").some(c=>t.get(c)!==void 0);for(const c of t.keys())if(!(c.code==="PAYMENTS_UNACCEPTABLE_PAYMENT_AMOUNT"&&s)){const u=t.get(c)();u.effects&&o.push(...u.effects),u.action!=="complete"&&u.errors&&i.push(...u.errors),a.push(u)}const l=(c=>_d.map(u=>c.find(m=>m.action===u)).find(u=>!!u))(a);return l&&(r=l,r.effects=o,r.action!=="complete"&&(r.errors=i)),r})}getMergedPaymentSheetAction({result:t,errorActions:n}){const r=new Map;n.forEach(o=>{o.matchers.forEach(i=>{const s=t.errors.find(l=>_e(l,i));s&&r.set(s,o.generateAction)})});let a;for(const o of t.errors){const i=r.get(o);if(i){a=i();break}}return{firstPaymentSheetAction:a,prioritizedPaymentSheetAction:this.generatePrioritizedPaymentSheetAction(r,t.errors)}}getUnhandledErrors(t,n){const r=n.flatMap(a=>a.matchers);return t.filter(a=>!r.some(o=>_e(a,o)))}decelerateOrAbort({reason:t,instrumentName:n,errorOrWarning:r,checkoutUrl:a,requestType:o}){return a?{action:"decelerate",redirectUrl:a,reason:t}:{action:"abort",effects:[()=>{w.notify(new Error("[".concat(n,"] unexpected ").concat(r," received in ").concat(o," response, aborting")))}]}}}function Ed({error:e,context:t,result:n}){var r,a;return(a=e.code==="PENDING_PROCESS"&&!t.shippingRequired&&((r=n.data)==null?void 0:r.lineItems.some(o=>o.merchandise.requiresShipping)))!=null?a:!1}class Ad extends so{constructor(t){super(),this.i18n=t}mapMutationResultToPaymentSheetAction({result:t,context:n,checkoutUrl:r,requestType:a}){var o;const i=this.mapCustomValidationFunctionErrorToAction(t.errors);if(i)return i;const s=this.getErrorActions({shippingCountryCode:n==null?void 0:n.shippingCountryCode,billingCountryCode:n==null?void 0:n.billingCountryCode,checkoutUrl:r,requestType:a}),l=t.errors,c=this.getUnhandledErrors(l,s);c.forEach(m=>{Ed({error:m,context:n,result:t})?w.notify(new gn("[".concat(b.ApplePay,"] digital physical mismatch issue, PENDING_PROCESS returned and shipping is not required but items require shipping"))):w.notify(new Qe("[".concat(b.ApplePay,"] mutation result error not handled: ").concat(gt(m)),{groupingHash:"UnhandledActionError:".concat(b.ApplePay,":").concat(gt(m))}))});const{firstPaymentSheetAction:u}=this.getMergedPaymentSheetAction({result:t,errorActions:s});return!u&&((o=t.data)==null?void 0:o.deliveryGroups.length)===0&&n!=null&&n.shippingRequired?{action:"show_error",errors:[new ApplePayError("addressUnserviceable")]}:u||(c.length>0?{action:"abort",effects:[()=>{it(this.i18n.translate("brand.apple_pay"),this.i18n)}]}:{action:"update",errors:[]})}mapCompletionResultToPaymentSheetAction({result:t,context:n,checkoutUrl:r}){if(!t.data)throw new Na(b.ApplePay);switch(t.data.__typename){case"SubmitSuccess":return{action:"complete",redirectUrl:t.data.redirectUrl};case"SubmitAlreadyAccepted":case"SubmitThrottled":case"SubmitFailed":{const a=this.mapCustomValidationFunctionErrorToAction(t.errors);if(a)return a;const o=this.getErrorActions({shippingCountryCode:n==null?void 0:n.shippingCountryCode,billingCountryCode:n==null?void 0:n.billingCountryCode,checkoutUrl:r,requestType:"completion"}),i=t.errors;i.some(l=>l.code==="NO_DELIVERY_GROUP_SELECTED")&&!n.shippingRequired&&w.notify(new gn("[".concat(b.ApplePay,"] digital physical mismatch issue: NO_DELIVERY_GROUP_SELECTED returned but shipping is not required"))),this.getUnhandledErrors(i,o).forEach(l=>{w.notify(new Qe("[".concat(b.ApplePay,"] completion result error not handled: ").concat(gt(l)),{groupingHash:"UnhandledActionError:".concat(b.ApplePay,":").concat(gt(l))}))});const{prioritizedPaymentSheetAction:s}=this.getMergedPaymentSheetAction({result:t,errorActions:o});return s||{action:"abort",effects:[()=>{it(this.i18n.translate("brand.apple_pay"),this.i18n)}]}}default:throw new Error("[".concat(b.ApplePay,"] unknown completion result type: ").concat(t.data.__typename))}}decelerateOrAbort(...t){var n;const r=super.decelerateOrAbort(...t);return r.action==="abort"&&((n=r.effects)==null||n.push(()=>{it(this.i18n.translate("brand.apple_pay"),this.i18n)})),r}getAbortActions(){return[{matchers:Zr,generateAction:()=>({action:"abort",effects:[()=>bt(this.i18n)]})}]}getDecelerateActions({checkoutUrl:t,requestType:n}){return[{matchers:[Be],generateAction:()=>this.decelerateOrAbort({reason:"captcha_required",instrumentName:b.ApplePay,errorOrWarning:Be.code,checkoutUrl:t,requestType:n})},{matchers:[Fe],generateAction:()=>this.decelerateOrAbort({reason:"localization_extension_field_error",instrumentName:b.ApplePay,errorOrWarning:Fe.code,checkoutUrl:t,requestType:n})},{matchers:[Tn],generateAction:()=>this.decelerateOrAbort({reason:"account_info_mismatch",instrumentName:b.ApplePay,errorOrWarning:Tn.code,checkoutUrl:t,requestType:n})},{matchers:[$e],generateAction:()=>this.decelerateOrAbort({reason:"invalid_language",instrumentName:b.ApplePay,errorOrWarning:$e.code,checkoutUrl:t,requestType:n})},{matchers:[He],generateAction:()=>this.decelerateOrAbort({reason:"invalid_country",instrumentName:b.ApplePay,errorOrWarning:He.code,checkoutUrl:t,requestType:n})},{matchers:[Nn],generateAction:()=>this.decelerateOrAbort({reason:"payments_country_invalid",instrumentName:b.ApplePay,errorOrWarning:Nn.code,checkoutUrl:t,requestType:n})},{matchers:[Rn],generateAction:()=>this.decelerateOrAbort({reason:"cart_empty",instrumentName:b.ApplePay,errorOrWarning:Rn.code,checkoutUrl:t,requestType:n})},{matchers:[Ge],generateAction:()=>this.decelerateOrAbort({reason:"missing_cart_id",instrumentName:b.ApplePay,errorOrWarning:Ge.code,checkoutUrl:t,requestType:n})},{matchers:[je],generateAction:()=>this.decelerateOrAbort({reason:"redirect_to_checkout_required",instrumentName:b.ApplePay,errorOrWarning:je.code,checkoutUrl:t,requestType:n})},{matchers:[Ve],generateAction:()=>this.decelerateOrAbort({reason:"unsupported_apple_pay_payment_method",instrumentName:b.ApplePay,errorOrWarning:Ve.code,checkoutUrl:t,requestType:n})},{matchers:[Ir],generateAction:()=>this.decelerateOrAbort({reason:"custom_validation",instrumentName:b.ApplePay,errorOrWarning:Ir.code,checkoutUrl:t,requestType:n})},{matchers:Jr,generateAction:()=>this.decelerateOrAbort({reason:"invalid_payment_amount",instrumentName:b.ApplePay,errorOrWarning:"INVALID_PAYMENT",checkoutUrl:t,requestType:n})},{matchers:Xr,generateAction:()=>this.decelerateOrAbort({reason:"dynamic_tax",instrumentName:b.ApplePay,errorOrWarning:"TAX_NEW_TAX_MUST_BE_ACCEPTED",checkoutUrl:t,requestType:n})},{matchers:[Dn],generateAction:()=>this.decelerateOrAbort({reason:"generic_error",instrumentName:b.ApplePay,errorOrWarning:Dn.code,checkoutUrl:t,requestType:n})},{matchers:Ja,generateAction:()=>this.decelerateOrAbort({reason:"not_enough_stock",instrumentName:b.ApplePay,errorOrWarning:"MERCHANDISE_NOT_ENOUGH_STOCK",checkoutUrl:t,requestType:n})}]}getShowErrorActions({shippingCountryCode:t,billingCountryCode:n}){return[{matchers:we.required,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","emailAddress",this.i18n.translate("errors.missing.email"))]})},{matchers:we.invalid,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","emailAddress",this.i18n.translate("errors.invalid.email"))]})},{matchers:_.required.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.missing.first_name"))]})},{matchers:_.invalid.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.invalid.first_name"))]})},{matchers:_.required.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.missing.last_name"))]})},{matchers:_.invalid.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.invalid.last_name"))]})},{matchers:Qa,generateAction:()=>({action:"show_error",errors:[new ApplePayError("addressUnserviceable")]})},{matchers:_.required.address1,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.missing.address1"))]})},{matchers:_.invalid.address1,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address1"))]})},{matchers:_.emojis.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.emojis.last_name"))]})},{matchers:_.emojis.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.emojis.first_name"))]})},{matchers:_.tooLong.address1,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.too_long.address1"))]})},{matchers:_.tooLong.address2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.too_long.address2"))]})},{matchers:_.tooLong.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.too_long.first_name"))]})},{matchers:_.tooLong.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.too_long.last_name"))]})},{matchers:_.tooLong.city,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.too_long.city"))]})},{matchers:_.containsUrl.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.url.first_name"))]})},{matchers:_.containsUrl.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.url.last_name"))]})},{matchers:_.htmlTags.address1,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.html_tags.address1"))]})},{matchers:_.htmlTags.address2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.html_tags.address2"))]})},{matchers:_.htmlTags.city,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.html_tags.city"))]})},{matchers:_.htmlTags.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.html_tags.first_name"))]})},{matchers:_.htmlTags.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.html_tags.last_name"))]})},{matchers:_.emojis.city,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.emojis.city"))]})},{matchers:_.emojis.address1,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.emojis.address1"))]})},{matchers:_.emojis.address2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.emojis.address2"))]})},{matchers:_.emojis.postalCode,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.emojis.postal_code"))]})},{matchers:_.required.address2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.missing.address2"))]})},{matchers:_.invalid.address2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address2"))]})},{matchers:_.required.city,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.missing.city"))]})},{matchers:_.invalid.city,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.invalid.city"))]})},{matchers:_.invalid.province,generateAction:()=>({action:"show_error",errors:[this.createApplePayZoneError(this.i18n.translate("errors.invalid.zone"),this.i18n.translate("errors.invalid.emirate"),"shippingContactInvalid",t)]})},{matchers:_.required.province,generateAction:()=>({action:"show_error",errors:[this.createApplePayZoneError(this.i18n.translate("errors.missing.zone"),this.i18n.translate("errors.missing.emirate"),"shippingContactInvalid",t)]})},{matchers:_.required.postalCode,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.missing.postal_code"))]})},{matchers:_.invalid.postalCode,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.invalid.postal_code"))]})},{matchers:_.required.country,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","country",this.i18n.translate("errors.missing.country"))]})},{matchers:_.invalid.phoneNumber,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.i18n.translate("errors.invalid.phone"))]})},{matchers:_.invalid.country,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","country",this.i18n.translate("errors.invalid.country"))]})},{matchers:_.required.phoneNumber,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.i18n.translate("errors.missing.phone"))]})},{matchers:C.invalid.generic,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid")]})},{matchers:C.required.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.i18n.translate("errors.missing.first_name"))]})},{matchers:C.required.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.i18n.translate("errors.missing.last_name"))]})},{matchers:C.required.address1,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.i18n.translate("errors.missing.address1"))]})},{matchers:C.required.address2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.i18n.translate("errors.missing.address2"))]})},{matchers:C.required.city,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","locality",this.i18n.translate("errors.missing.city"))]})},{matchers:C.required.phoneNumber,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","phoneNumber",this.i18n.translate("errors.missing.phone"))]})},{matchers:C.required.postalCode,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.i18n.translate("errors.missing.postal_code"))]})},{matchers:C.required.province,generateAction:()=>({action:"show_error",errors:[this.createApplePayZoneError(this.i18n.translate("errors.missing.zone"),this.i18n.translate("errors.missing.emirate"),"billingContactInvalid",n)]})},{matchers:C.emojis.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.i18n.translate("errors.emojis.first_name"))]})},{matchers:C.htmlTags.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.i18n.translate("errors.html_tags.first_name"))]})},{matchers:C.invalid.firstName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.i18n.translate("errors.invalid.first_name"))]})},{matchers:C.emojis.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.i18n.translate("errors.emojis.last_name"))]})},{matchers:C.htmlTags.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.i18n.translate("errors.html_tags.last_name"))]})},{matchers:C.invalid.lastName,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.i18n.translate("errors.invalid.last_name"))]})},{matchers:C.emojis.address1,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.i18n.translate("errors.emojis.address1"))]})},{matchers:C.htmlTags.address1,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.i18n.translate("errors.html_tags.address1"))]})},{matchers:C.invalid.address1,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address1"))]})},{matchers:C.emojis.address2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.i18n.translate("errors.emojis.address2"))]})},{matchers:C.htmlTags.address2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.i18n.translate("errors.html_tags.address2"))]})},{matchers:C.invalid.address2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address2"))]})},{matchers:C.emojis.city,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","locality",this.i18n.translate("errors.emojis.city"))]})},{matchers:C.htmlTags.city,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","locality",this.i18n.translate("errors.html_tags.city"))]})},{matchers:C.invalid.city,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","locality",this.i18n.translate("errors.invalid.city"))]})},{matchers:C.emojis.phoneNumber,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","phoneNumber",this.i18n.translate("errors.emojis.phone"))]})},{matchers:C.invalid.phoneNumber,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","phoneNumber",this.i18n.translate("errors.invalid.phone"))]})},{matchers:C.emojis.postalCode,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.i18n.translate("errors.emojis.postal_code"))]})},{matchers:C.invalid.postalCode,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.i18n.translate("errors.invalid.postal_code"))]})},{matchers:[lc],generateAction:()=>({action:"show_error",errors:[new ApplePayError("unknown")]})},{matchers:[cc],generateAction:()=>({action:"show_error",errors:[new ApplePayError("couponCodeInvalid",void 0,this.i18n.translate("errors.invalid.discount"))]})}]}getErrorActions({shippingCountryCode:t,billingCountryCode:n,checkoutUrl:r,requestType:a}){return[...this.getAbortActions(),...this.getDecelerateActions({checkoutUrl:r,requestType:a}),...this.getShowErrorActions({shippingCountryCode:t,billingCountryCode:n})]}mapCustomValidationFunctionErrorToAction(t){const n=Wr(t);return n?{action:"abort",effects:[()=>{const r=this.i18n.translate("brand.apple_pay");Yr(this.i18n.translate("error_dialogs.wallet.title",{wallet:r}),n.message)}]}:null}createApplePayZoneError(t,n,r,a){const o=a==="AE"?"subLocality":"administrativeArea";return new ApplePayError(r,o,a==="AE"?n:t)}}const Bn=["name","postalAddress"];function Cd({shippingRequired:e,walletParams:t,buyerCurrency:n}){const{phoneRequired:r,emailRequired:a}=t,o=[...a?["email"]:[],...r?["phone"]:[]],i=e?[...Bn,...o]:o;return{countryCode:t.countryCode,currencyCode:n,merchantCapabilities:t.merchantCapabilities,supportedNetworks:t.supportedNetworks,total:{type:"pending",label:t.merchantName,amount:"1.00"},requiredBillingContactFields:Bn,requiredShippingContactFields:i,shippingType:t.shippingType}}const Sd=e=>{const t=e.lineItems.flatMap(n=>n.discountAllocations);return[...e.discountCodes.filter(n=>n.applicable&&e.discountAllocations.findIndex(r=>r.code===n.code)===-1&&t.findIndex(r=>r.code===n.code)===-1).map(n=>({code:n.code,discountedAmount:{amount:"0",currencyCode:e.totalAmount.currencyCode}})),...e.discountAllocations,...t]};class Pd extends et{constructor(){super(...arguments),d(this,"name","ApplePaySessionCreationError"),d(this,"useHashPrefix",!0),d(this,"autogenerateHash",!0)}}const lo=e=>{const t=e.lineItems.reduce((n,r)=>n+Number(r.subtotalAmount.amount),0);return{amount:String(t),currencyCode:e.totalAmount.currencyCode}};function vd(e,t){return e.reduce((n,r)=>{if(!r.sellingPlanAllocation)return n;const{sellingPlanAllocation:{sellingPlan:a,priceAdjustments:o},quantity:i}=r;if(!a.recurringDeliveries||!a.billingPolicy)return n;const s=Id({billingPolicy:a.billingPolicy,i18n:t});if(o.length===0){const l=De({price:Number(r.subtotalAmount.amount)*i,currencyCode:r.subtotalAmount.currencyCode,locale:t.locale});return[...n,t.translate("order_summary.subscriptions.recurring_totals",{fixedPrice:l,interval:s})]}else if(o.length===1){const l=De({price:Number(o[0].price.amount)*i,currencyCode:o[0].price.currencyCode,locale:t.locale});return[...n,t.translate("order_summary.subscriptions.recurring_totals",{fixedPrice:l,interval:s})]}else if(o.length===2){const l=De({price:Number(o[0].price.amount)*i,currencyCode:o[0].price.currencyCode,locale:t.locale}),c=De({price:Number(o[1].price.amount)*i,currencyCode:o[1].price.currencyCode,locale:t.locale}),u=a.priceAdjustments[0].orderCount;return[...n,t.translate("order_summary.subscriptions.recurring_totals_with_policies",{count:u,fixedPrice:l,recurringPrice:c,interval:s})]}return n},[])}function De({price:e,currencyCode:t,locale:n}){return Intl.NumberFormat(n,{style:"currency",currency:t,currencyDisplay:"narrowSymbol"}).format(e)}function Id({billingPolicy:e,i18n:t}){const{interval:n,intervalCount:r}=e,a={YEAR:"order_summary.subscriptions.recurring_total_intervals.year",MONTH:"order_summary.subscriptions.recurring_total_intervals.month",WEEK:"order_summary.subscriptions.recurring_total_intervals.week",DAY:"order_summary.subscriptions.recurring_total_intervals.day"}[n];if(!a)throw new Error("Unknown selling plan interval provided: ".concat(n));return t.translate(a,{count:r})}const sr="GraphQL Client",Fn=0,$n=3,co="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",uo="Response returned unexpected Content-Type:",ho="An unknown error has occurred. The API did not return a data object or any errors in its response.",Rr={json:"application/json",multipart:"multipart/mixed"},Hn="X-SDK-Variant",Gn="X-SDK-Version",kd="shopify-graphql-client",Td="1.4.1",po=1e3,Nd=[429,503],mo=/@(defer)\b/i,Vn="\r\n",Rd=/boundary="?([^=";]+)"?/i,jn=Vn+Vn;function ft(e,t=sr){return e.startsWith("".concat(t))?e:"".concat(t,": ").concat(e)}function ne(e){return e instanceof Error?e.message:JSON.stringify(e)}function go(e){return e instanceof Error&&e.cause?e.cause:void 0}function yo(e){return e.flatMap(({errors:t})=>t!=null?t:[])}function fo({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<Fn||t>$n))throw new Error("".concat(e,': The provided "retries" value (').concat(t,") is invalid - it cannot be less than ").concat(Fn," or greater than ").concat($n))}function q(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function bo(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:bo(e,n)}function wo(e,t){return Object.keys(t||{}).reduce((n,r)=>(typeof t[r]=="object"||Array.isArray(t[r]))&&e[r]?(n[r]=wo(e[r],t[r]),n):(n[r]=t[r],n),Array.isArray(e)?[...e]:{...e})}function _o([e,...t]){return t.reduce(wo,{...e})}function Dd({clientLogger:e,customFetchApi:t=fetch,client:n=sr,defaultRetryWaitTime:r=po,retriableCodes:a=Nd}){const o=async(i,s,l)=>{const c=s+1,u=l+1;let m;try{if(m=await t(...i),e({type:"HTTP-Response",content:{requestParams:i,response:m}}),!m.ok&&a.includes(m.status)&&c<=u)throw new Error;const h=(m==null?void 0:m.headers.get("X-Shopify-API-Deprecated-Reason"))||"";return h&&e({type:"HTTP-Response-GraphQL-Deprecation-Notice",content:{requestParams:i,deprecationNotice:h}}),m}catch(h){if(c<=u){const g=m==null?void 0:m.headers.get("Retry-After");return await Od(g?parseInt(g,10):r),e({type:"HTTP-Retry",content:{requestParams:i,lastResponse:m,retryAttempt:s,maxRetries:l}}),o(i,c,l)}throw new Error(ft("".concat(l>0?"Attempted maximum number of ".concat(l," network retries. Last message - "):"").concat(ne(h)),n))}};return o}async function Od(e){return new Promise(t=>setTimeout(t,e))}function xd({headers:e,url:t,customFetchApi:n=fetch,retries:r=0,logger:a}){fo({client:sr,retries:r});const o={headers:e,url:t,retries:r},i=Ld(a),s=Dd({customFetchApi:n,clientLogger:i,defaultRetryWaitTime:po}),l=Md(s,o),c=zd(l),u=Vd(l);return{config:o,fetch:l,request:c,requestStream:u}}function Ld(e){return t=>{e&&e(t)}}async function Eo(e){const{errors:t,data:n,extensions:r}=await e.json();return{...q("data",n),...q("extensions",r),headers:e.headers,...t||!n?{errors:{networkStatusCode:e.status,message:ft(t?co:ho),...q("graphQLErrors",t),response:e}}:{}}}function Md(e,{url:t,headers:n,retries:r}){return async(a,o={})=>{const{variables:i,headers:s,url:l,retries:c,keepalive:u,signal:m}=o,h=JSON.stringify({query:a,variables:i});fo({client:sr,retries:c});const g=Object.entries({...n,...s}).reduce((f,[A,E])=>(f[A]=Array.isArray(E)?E.join(", "):E.toString(),f),{});!g[Hn]&&!g[Gn]&&(g[Hn]=kd,g[Gn]=Td);const y=[l!=null?l:t,{method:"POST",headers:g,body:h,signal:m,keepalive:u}];return e(y,1,c!=null?c:r)}}function zd(e){return async(...t)=>{if(mo.test(t[0]))throw new Error(ft("This operation will result in a streamable response - use requestStream() instead."));let n=null;try{n=await e(...t);const{status:r,statusText:a}=n,o=n.headers.get("content-type")||"";return n.ok?o.includes(Rr.json)?await Eo(n):{errors:{networkStatusCode:r,message:ft("".concat(uo," ").concat(o)),response:n}}:{errors:{networkStatusCode:r,message:ft(a),response:n}}}catch(r){return{errors:{message:ne(r),...n==null?{}:{networkStatusCode:n.status,response:n}}}}}}function Ud(e){return Ut(this,null,function*(){const t=new TextDecoder;if(e.body[Symbol.asyncIterator])try{for(var n=at(e.body),r,a,o;r=!(a=yield new nt(n.next())).done;r=!1){const i=a.value;yield t.decode(i)}}catch(i){o=[i]}finally{try{r&&(a=n.return)&&(yield new nt(a.call(n)))}finally{if(o)throw o[0]}}else{const i=e.body.getReader();let s;try{for(;!(s=yield new nt(i.read())).done;)yield t.decode(s.value)}finally{i.cancel()}}})}function Bd(e,t){return{[Symbol.asyncIterator](){return Ut(this,null,function*(){try{let i="";try{for(var n=at(e),r,a,o;r=!(a=yield new nt(n.next())).done;r=!1){const s=a.value;if(i+=s,i.indexOf(t)>-1){const l=i.lastIndexOf(t),c=i.slice(0,l).split(t).filter(u=>u.trim().length>0).map(u=>u.slice(u.indexOf(jn)+jn.length).trim());c.length>0&&(yield c),i=i.slice(l+t.length),i.trim()==="--"&&(i="")}}}catch(s){o=[s]}finally{try{r&&(a=n.return)&&(yield new nt(a.call(n)))}finally{if(o)throw o[0]}}}catch(i){throw new Error("Error occured while processing stream payload - ".concat(ne(i)))}})}}}function Fd(e){return{[Symbol.asyncIterator](){return Ut(this,null,function*(){yield{...yield new nt(Eo(e)),hasNext:!1}})}}}function $d(e){return e.map(t=>{try{return JSON.parse(t)}catch(n){throw new Error("Error in parsing multipart response - ".concat(ne(n)))}}).map(t=>{const{data:n,incremental:r,hasNext:a,extensions:o,errors:i}=t;if(!r)return{data:n||{},...q("errors",i),...q("extensions",o),hasNext:a};const s=r.map(({data:l,path:c,errors:u})=>({data:l&&c?bo(c,l):{},...q("errors",u)}));return{data:s.length===1?s[0].data:_o([...s.map(({data:l})=>l)]),...q("errors",yo(s)),hasNext:a}})}function Hd(e,t){if(e.length>0)throw new Error(co,{cause:{graphQLErrors:e}});if(Object.keys(t).length===0)throw new Error(ho)}function Gd(e,t){var n,r;const a=(t!=null?t:"").match(Rd),o="--".concat(a?a[1]:"-");if(!((n=e.body)!=null&&n.getReader)&&!((r=e.body)!=null&&r[Symbol.asyncIterator]))throw new Error("API multipart response did not return an iterable body",{cause:e});const i=Ud(e);let s={},l;return{[Symbol.asyncIterator](){return Ut(this,null,function*(){var c,u;try{let f=!0;try{for(var m=at(Bd(i,o)),h,g,y;h=!(g=yield new nt(m.next())).done;h=!1){const A=g.value,E=$d(A);l=(u=(c=E.find(P=>P.extensions))==null?void 0:c.extensions)!=null?u:l;const D=yo(E);s=_o([s,...E.map(({data:P})=>P)]),f=E.slice(-1)[0].hasNext,Hd(D,s),yield{...q("data",s),...q("extensions",l),hasNext:f}}}catch(A){y=[A]}finally{try{h&&(g=m.return)&&(yield new nt(g.call(m)))}finally{if(y)throw y[0]}}if(f)throw new Error("Response stream terminated unexpectedly")}catch(f){const A=go(f);yield{...q("data",s),...q("extensions",l),errors:{message:ft(ne(f)),networkStatusCode:e.status,...q("graphQLErrors",A==null?void 0:A.graphQLErrors),response:e},hasNext:!1}}})}}}function Vd(e){return async(...t)=>{if(!mo.test(t[0]))throw new Error(ft("This operation does not result in a streamable response - use request() instead."));try{const n=await e(...t),{statusText:r}=n;if(!n.ok)throw new Error(r,{cause:n});const a=n.headers.get("content-type")||"";switch(!0){case a.includes(Rr.json):return Fd(n);case a.includes(Rr.multipart):return Gd(n,a);default:throw new Error("".concat(uo," ").concat(a),{cause:n})}}catch(n){return{[Symbol.asyncIterator](){return Ut(this,null,function*(){const r=go(n);yield{errors:{message:ft(ne(n)),...q("networkStatusCode",r==null?void 0:r.status),...q("response",r)},hasNext:!1}})}}}}}const jd="mutation cartCreate($input:CartInput!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false)@inContext(country:$country language:$language){result:cartCreate(input:$input){...@defer(if:$withCarrierRates){cart{...CartParts}errors:userErrors{...on CartUserError{message field code}}warnings:warnings{...on CartWarning{code}}}}}",qd="mutation cartUpdateDeliveryAddressAndContact($cartId:ID!$addressInput:[CartSelectableAddressInput!]!$buyerIdentityInput:CartBuyerIdentityInput!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false$prepareCart:Boolean=true)@inContext(country:$country language:$language){buyerIdentityUpdateResult:cartBuyerIdentityUpdate(cartId:$cartId buyerIdentity:$buyerIdentityInput){errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}addressUpdateResult:cartDeliveryAddressesReplace(addresses:$addressInput cartId:$cartId){errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}...PreparedCartFragment}",Wd="mutation cartAttributesUpdate($cartId:ID!$attributes:[AttributeInput!]!$country:CountryCode=CA$language:LanguageCode=EN$withCarrierRates:Boolean=false$prepareCart:Boolean=false)@inContext(country:$country language:$language){result:cartAttributesUpdate(cartId:$cartId attributes:$attributes){...@defer(if:$withCarrierRates)@skip(if:$prepareCart){cart{...CartParts}errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}...@include(if:$prepareCart){errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}}...PreparedCartFragment}",Yd="mutation cartBillingAddressUpdate($cartId:ID!$billingAddress:MailingAddressInput$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false$prepareCart:Boolean=false)@inContext(country:$country language:$language){result:cartBillingAddressUpdate(cartId:$cartId billingAddress:$billingAddress){...@defer(if:$withCarrierRates)@skip(if:$prepareCart){cart{...CartParts}errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}...@include(if:$prepareCart){errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}}...PreparedCartFragment}",Kd="mutation cartBuyerIdentityUpdate($cartId:ID!$buyerIdentity:CartBuyerIdentityInput!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false$prepareCart:Boolean=false)@inContext(country:$country language:$language){result:cartBuyerIdentityUpdate(cartId:$cartId buyerIdentity:$buyerIdentity){...@defer(if:$withCarrierRates)@skip(if:$prepareCart){cart{...CartParts}errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}...@include(if:$prepareCart){errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}}...PreparedCartFragment}",Qd="mutation cartSelectedDeliveryOptionsUpdate($cartId:ID!$selectedDeliveryOptions:[CartSelectedDeliveryOptionInput!]!$country:CountryCode=CA$language:LanguageCode=EN$withCarrierRates:Boolean=false$prepareCart:Boolean=false)@inContext(country:$country language:$language){result:cartSelectedDeliveryOptionsUpdate(cartId:$cartId selectedDeliveryOptions:$selectedDeliveryOptions){...@defer(if:$withCarrierRates)@skip(if:$prepareCart){cart{...CartParts}errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}...@include(if:$prepareCart){errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}}...PreparedCartFragment}",Jd="mutation applePaySessionCreate($validationUrl:URL!){applePaySessionCreate(validationUrl:$validationUrl){...@defer{applePaySession{body}}}}",Xd="mutation PayPalBuyerDetailsFetch($token:String!$cartId:ID){paypalBuyerDetailsFetch(token:$token cartId:$cartId){...@defer{paypalDetails{email expiresAt remoteOrderId destinationAddress{...on MailingAddress{address1 address2 city company country firstName lastName phone province zip}}billingAddress{...on MailingAddress{address1 address2 city company country firstName lastName phone province zip}}payerApprovedAmount{currencyCode amount}}}}}",Zd="mutation PayPalTokenCreate($cartId:ID!$billingAgreement:Boolean!){paypalTokenCreate(cartId:$cartId billingAgreement:$billingAgreement){...@defer{paypalToken{token}}}}",tu="query cartQuery($id:ID!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false)@inContext(country:$country language:$language){cart(id:$id){...@defer(if:$withCarrierRates){...CartParts}}}",eu="query limitedCartQuery($id:ID!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cart(id:$id){id lines(first:50){edges{node{merchandise{...on ProductVariant{requiresShipping}}sellingPlanAllocation{sellingPlan{id}}}}}}}",ru="query subscriptionPolicyQuery($country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){shop{subscriptionPolicy(sanitized:true){body}}}",nu="mutation cartPaymentUpdate($cartId:ID!$input:CartPaymentInput!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false$prepareCart:Boolean=false)@inContext(country:$country language:$language){result:cartPaymentUpdate(cartId:$cartId payment:$input){...@defer(if:$withCarrierRates)@skip(if:$prepareCart){cart{...CartParts}errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}...@include(if:$prepareCart){errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}}...PreparedCartFragment}",Oe="fragment CartParts on Cart{id checkoutUrl deliveryGroups(first:10 withCarrierRates:$withCarrierRates){edges{node{id groupType selectedDeliveryOption{code title handle deliveryPromise deliveryMethodType estimatedCost{amount currencyCode}}deliveryOptions{code title handle deliveryPromise deliveryMethodType estimatedCost{amount currencyCode}}}}}cost{subtotalAmount{amount currencyCode}totalAmount{amount currencyCode}totalTaxAmount{amount currencyCode}totalDutyAmount{amount currencyCode}}discountAllocations{discountedAmount{amount currencyCode}...on CartCodeDiscountAllocation{code}...on CartAutomaticDiscountAllocation{title}...on CartCustomDiscountAllocation{title}}discountCodes{code applicable}lines(first:10){edges{node{...on CartLine{parentRelationship{parent{id}}}quantity cost{subtotalAmount{amount currencyCode}totalAmount{amount currencyCode}}discountAllocations{discountedAmount{amount currencyCode}...on CartCodeDiscountAllocation{code}...on CartAutomaticDiscountAllocation{title}...on CartCustomDiscountAllocation{title}}merchandise{...on ProductVariant{requiresShipping title product{title}}}sellingPlanAllocation{remainingBalanceChargeAmount{amount}priceAdjustments{price{amount currencyCode}}sellingPlan{billingPolicy{...on SellingPlanRecurringBillingPolicy{interval intervalCount}}priceAdjustments{orderCount}recurringDeliveries}}}}}}",wr="fragment CartErrorParts on CartUserError{message field code}",qn="fragment PreparedCartFragment on Mutation{preparedCart:cartPrepareForCompletion(cartId:$cartId)@include(if:$prepareCart){...@defer(if:$withCarrierRates){result{__typename ...on CartStatusReady{cart{...CartParts}}...on CartStatusNotReady{cart{...CartParts}errors{code message}}...on CartThrottled{cart{...CartParts}pollAfter}}errors:userErrors{...CartErrorParts}}}}",au="mutation prepareCart($cartId:ID!$country:CountryCode$language:LanguageCode$withCarrierRates:Boolean=false$prepareCart:Boolean=true)@inContext(country:$country language:$language){...PreparedCartFragment}",ou="mutation cartSubmitForCompletion($cartId:ID!$attemptToken:String!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartSubmitForCompletion(cartId:$cartId attemptToken:$attemptToken){result{__typename ...on SubmitSuccess{redirectUrl}...on SubmitThrottled{pollAfterV2:pollAfter}...on SubmitFailed{errors{code message}checkoutUrl}}errors:userErrors{...on CartUserError{code field message}}}}",iu="mutation cartRemovePersonalData($cartId:ID!){cartRemovePersonalData(cartId:$cartId){errors:userErrors{...CartErrorParts}warnings:warnings{...on CartWarning{code}}}}";async function su(e,t){var n,r;if(!t.errors)return;const a=yu(t.errors,e),o=await gu(t.errors.response),i=((r=(n=t.errors.response)==null?void 0:n.headers)==null?void 0:r.get("content-type"))||void 0,s=[];if(t.errors.graphQLErrors)for(const l of t.errors.graphQLErrors)l.code&&s.push(l.code);return{operationName:e,statusCode:t.errors.networkStatusCode,contentType:i,message:a,responseBody:o,errorCodes:s}}const lu=[/API multipart response did not return an iterable body/,/Error in parsing multipart response/,/GraphQL Client: Response returned unexpected Content-Type:/,/GraphQL Client: (?:null|undefined) is not an object/i,/Internal error/,/Carrier-calculated rates through @defer is temporarily unavailable/,/Throttled/,/Request blocked/,/Network request failed/,/Load failed/,/Failed to fetch/,/when attempting to fetch resource/],cu=[/signal is aborted/i,/fetch is aborted/i,/operation was aborted/i,/\[Apple Pay\] Payment sheet cancelled/],du=[/timed?.out/i,/error occured while processing stream payload/i,/response stream terminated/i],uu=/provided invalid value/,hu=["quantity","sellingPlanId","attributes"];function pu(e){var t;return uu.test(e)&&(t=hu.find(n=>e.includes(n)))!=null?t:null}function mu(e,{hasBeenVisible:t=!1}={}){if(e.statusCode&&e.statusCode!==200)return{isIgnorable:!0,reason:"statusCode-".concat(e.statusCode)};if(e.message){if(du.some(r=>r.test(e.message)))return{isIgnorable:!0,reason:"timeout"};if(cu.some(r=>r.test(e.message)))return{isIgnorable:!0,reason:"abort"};if(lu.some(r=>r.test(e.message)))return{isIgnorable:!0,reason:"message"};const n=pu(e.message);if(n)return{isIgnorable:!0,reason:"graphql-input-validation-".concat(n)}}return t?{isIgnorable:!1,reason:void 0}:{isIgnorable:!0,reason:"component-not-visible"}}async function gu(e){if(!e||e.bodyUsed)return"";try{return(await e.text()).slice(0,1024)}catch(t){return console.error("Failed to read response body:",t),""}}function yu(e,t){var n,r;if(!e)return"";const a=(r=(n=e.graphQLErrors)==null?void 0:n.map(s=>s.message).join(", "))!=null?r:"",o="".concat(e.message).concat(a.length>0?" - ".concat(a):""),i=e.networkStatusCode?"with status ".concat(e.networkStatusCode," => ").concat(o):"=> ".concat(o);return"GraphQL response error for ".concat(t,": ").concat(i)}const Wn="UNKNOWN";function fu({url:e,accessToken:t}){return{headers:{"Content-Type":"application/json",Accept:"application/json","X-Shopify-Storefront-Access-Token":t,"X-SDK-Variant":"portable-wallets"},url:e,retries:0,customFetchApi:(n,r)=>(w.leaveBreadcrumb("Request ".concat((r==null?void 0:r.method)||Wn,": ").concat(n),{url:n,method:r==null?void 0:r.method},"request"),fetch(n,r)),logger:n=>{try{switch(n.type){case"HTTP-Response":{const[r,a]=n.content.requestParams,{status:o,statusText:i,headers:s,type:l}=n.content.response;w.leaveBreadcrumb("Response ".concat((a==null?void 0:a.method)||Wn,": ").concat(r),{statusCode:o,statusText:i,responseHeaders:bu(s),responseType:l,url:r,method:a==null?void 0:a.method,headers:a==null?void 0:a.headers,body:a==null?void 0:a.body},"log");break}case"HTTP-Retry":{const{retryAttempt:r,maxRetries:a,lastResponse:o,requestParams:[i,s]=[]}=n.content;w.leaveBreadcrumb("GraphQL Retry Attempt ".concat(r,"/").concat(a,": ").concat(i),{retryAttempt:r,maxRetries:a,url:i,method:s==null?void 0:s.method,lastResponseStatus:o==null?void 0:o.status},"log");break}case"HTTP-Response-GraphQL-Deprecation-Notice":{const{deprecationNotice:r,requestParams:a}=n.content,[o,i]=a||[];w.leaveBreadcrumb("GraphQL Deprecation Notice: ".concat(o),{deprecationNotice:r,url:o,method:i==null?void 0:i.method},"log");break}default:{const r=n;w.leaveBreadcrumb("GraphQL Logger: ".concat(r.type),{type:r.type,content:r.content},"log")}}}catch(r){}}}}function bu(e){if("fromEntries"in Object)return Object.fromEntries(e);const t={};for(const[n,r]of e.entries())t[n]=r;return t}function wu({streetAddress:e,validateAddress:t}){return[{selected:!0,oneTimeUse:!0,validationStrategy:t?"STRICT":"COUNTRY_CODE_ONLY",address:{deliveryAddress:_u(e)}}]}function _u(e){return{address1:e.address1,address2:e.address2,city:e.city,firstName:e.firstName,lastName:e.lastName,phone:e.phone,zip:e.zip,company:e.company,countryCode:e.country,provinceCode:e.province}}const Eu="unstable";class lr{constructor({accessToken:t,country:n,locale:r,apiVersion:a=Eu,withCarrierRates:o=!1}){if(d(this,"OPERATION_NAME_REGEX",/[^ ]+ (\w+)/),d(this,"LANGUAGES_WITH_REGION",["zh-CN","zh-TW","pt-BR","pt-PT"]),d(this,"client"),d(this,"country"),d(this,"url"),d(this,"locale"),d(this,"withCarrierRates"),d(this,"lastValidCart"),d(this,"hasBeenVisible",!1),d(this,"checkoutState","building"),!t||!n)throw new rt({code:"invalid-webcomponent",message:"accelerated checkout rendered without required webcomponent attributes"});if(!r)throw new Error("StorefrontApiClient constructed with no locale");this.country=n,this.locale=r,this.withCarrierRates=o,this.url="/api/".concat(a,"/graphql.json"),this.client=xd(fu({url:this.url,accessToken:t}))}async createCart(t,n,r){var a,o,i;const s=await this.requestStream([jd,Oe],{input:{lines:Cu()?t.lines.map(h=>({merchandiseId:h.merchandiseId,quantity:h.quantity,sellingPlanId:h.sellingPlanId,attributes:this.stringifyAttributes(h.lineItemProperties),parent:h.parent})):[{merchandiseId:t.merchandiseId,quantity:t.quantity,sellingPlanId:t.sellingPlanId,attributes:this.stringifyAttributes(t.lineItemProperties)}],discountCodes:t.discountCodes,buyerIdentity:t.buyerIdentity},country:this.country,language:this.formatLanguage(this.locale)},{instrumentName:t.instrumentName,startingCheckout:!0,operationName:"createCart"});try{for(var l=at(s),c,u,m;c=!(u=await l.next()).done;c=!1){const h=u.value;h.errors&&await this.onError({operationName:"createCart",response:h});const g=(a=h.data)==null?void 0:a.result;if(g&&!h.hasNext){g.errors.length>0&&this.onResultError(g.errors);const y=this.parseMutationWarnings((i=(o=h.data)==null?void 0:o.result)==null?void 0:i.warnings),f=g.cart?this.parseCartResponse(g.cart):null;return{data:f,errors:this.parseMutationErrors({result:h,key:"result",operationName:"cartCreate"}),warnings:y,decelerationReason:yr({cart:f,warnings:y,supportsSubscriptions:n,supportsDeferredPurchaseOptions:r}),abortReason:xn({cart:f,warnings:y})}}}}catch(h){m=[h]}finally{try{c&&(u=l.return)&&await u.call(l)}finally{if(m)throw m[0]}}throw new ut("Cart create operation returned no response")}async updateCartBillingAddress(t){const{cartId:n,billingAddress:r,instrumentName:a}=t;return this.requestDeferredCart(Yd,{cartId:n,billingAddress:r},{instrumentName:a,operationName:"updateCartBillingAddress"})}async updateCartBuyerIdentity(t,n){const{cartId:r,instrumentName:a,validateAddress:o=!1,streetAddress:i}=t;if(this.checkoutState=o?"authorized":"building",ce()){const{deliveryAddressPreferences:s,...l}=Yn(t);return await this.requestDeferredCart(qd,{cartId:r,buyerIdentityInput:l,addressInput:i?wu({streetAddress:i,validateAddress:o}):[]},{instrumentName:a,operationName:"cartUpdateDeliveryAddressAndContact",abortSignal:n})}else return this.requestDeferredCart(Kd,{cartId:r,buyerIdentity:Yn(t)},{instrumentName:a,operationName:"updateCartBuyerIdentity",abortSignal:n})}async updateSelectedDeliveryOptions(t,n,r,a){let o=n;const i=ot()+2e4;for(;ot()<i;){const s=await this.requestDeferredCart(Qd,{cartId:t,selectedDeliveryOptions:o},{instrumentName:r,operationName:"updateSelectedDeliveryOptions",abortSignal:a});if(ce())return s.errors=s.errors.filter(c=>c.code!=="PENDING_DELIVERY_GROUPS"),s;if(!s.errors.some(c=>c.code==="PENDING_DELIVERY_GROUPS"))return s;const l=s.data.deliveryGroups.flatMap(c=>c.deliveryOptions.map(u=>({deliveryOptionHandle:u.handle,deliveryGroupId:c.id})));o=o.map(c=>{var u;return(u=l.find(m=>m.deliveryOptionHandle===c.deliveryOptionHandle))!=null?u:c})}throw new Error("Selected delivery options update operation timed out")}async applePaySessionCreate(t){var n,r,a;const o=await this.requestStream([Jd],{validationUrl:t.toString()},{instrumentName:b.ApplePay,operationName:"applePaySessionCreate"});try{for(var i=at(o),s,l,c;s=!(l=await i.next()).done;s=!1){const u=l.value;u.errors&&await this.onError({operationName:"applePaySessionCreate",response:u});const m=(a=(r=(n=u.data)==null?void 0:n.applePaySessionCreate)==null?void 0:r.applePaySession)==null?void 0:a.body;if(m)return m}}catch(u){c=[u]}finally{try{s&&(l=i.return)&&await l.call(i)}finally{if(c)throw c[0]}}throw new ut("Apple Pay session create operation returned no response")}async paypalBuyerDetailsFetch(t,n){var r,a;const o=await this.requestStream([Xd],{token:t,cartId:n},{instrumentName:b.PayPal,operationName:"paypalBuyerDetailsFetch"});try{for(var i=at(o),s,l,c;s=!(l=await i.next()).done;s=!1){const u=l.value;if(u.hasNext)continue;if(u.errors){if(u.errors.graphQLErrors){const h=Mn(u.errors.graphQLErrors);if(h!=null&&h.code)throw new tt(h.code)}await this.onError({operationName:"paypalBuyerDetailsFetch",response:u})}const m=(a=(r=u.data)==null?void 0:r.paypalBuyerDetailsFetch)==null?void 0:a.paypalDetails;if(m)return m}}catch(u){c=[u]}finally{try{s&&(l=i.return)&&await l.call(i)}finally{if(c)throw c[0]}}throw new ut("PayPal buyer details fetch operation returned no response")}async paypalTokenCreate({cartId:t,billingAgreement:n}){var r,a,o;const i=await this.requestStream([Zd],{cartId:t,billingAgreement:n},{instrumentName:b.PayPal,operationName:"paypalTokenCreate"});try{for(var s=at(i),l,c,u;l=!(c=await s.next()).done;l=!1){const m=c.value;if(m.errors){if(m.errors.graphQLErrors){const g=Mn(m.errors.graphQLErrors);if(g!=null&&g.code)throw g.isLoggable&&(p.log({body:"PayPal Token Create ".concat(g.code," Error")}),p.paypalTokenCreationError({errorCode:g.code})),new tt(g.code)}await this.onError({operationName:"paypalTokenCreate",response:m})}const h=(o=(a=(r=m.data)==null?void 0:r.paypalTokenCreate)==null?void 0:a.paypalToken)==null?void 0:o.token;if(h)return h}}catch(m){u=[m]}finally{try{l&&(c=s.return)&&await c.call(s)}finally{if(u)throw u[0]}}throw new ut("PayPal token create operation returned no response")}async fetchLimitedCart({id:t,startingCheckout:n,instrumentName:r}){var a,o;const i=await this.request([eu],{id:t},{instrumentName:r,startingCheckout:n});if(i.errors&&await this.onError({operationName:"limitedCartQuery",response:i}),!((a=i.data)!=null&&a.cart))throw new Si("Limited cart query returned no response");return w.leaveBreadcrumb("limitedCartQuery response",{operationName:"limitedCartQuery",body:(o=i.data)==null?void 0:o.cart},"log"),{id:i.data.cart.id,shippingRequired:i.data.cart.lines.edges.some(s=>s.node.merchandise.requiresShipping),sellingPlan:i.data.cart.lines.edges.some(s=>s.node.sellingPlanAllocation!=null)}}async fetchCart({id:t,startingCheckout:n,instrumentName:r}){var a;const o=this.formatLanguage(this.locale),i=ce(),s=i?"Prepare cart":"Fetch cart",l=i?au:tu,c=i?[Oe,wr,qn]:[Oe],u=i?{cartId:t,country:this.country,language:o,withCarrierRates:!1,prepareCart:!0}:{id:t,country:this.country,language:o,withCarrierRates:this.withCarrierRates},m=await this.requestStream([l,...c],u,{instrumentName:r,startingCheckout:n,operationName:"fetchCart"});try{for(var h=at(m),g,y,f;g=!(y=await h.next()).done;g=!1){const A=y.value;A.errors&&await this.onError({operationName:"fetchCart",response:A});let E=null,D;if(!A.data)throw new ut("".concat(s," operation returned no data in response"));if(Au(A.data)){const P=A.data.preparedCart;E=(a=P==null?void 0:P.result)==null?void 0:a.cart,D=this.parsePreparedCartMutationErrors(A.errors,this.extractPreparedCartMutationErrors(P,r),"prepareCart")}else E=A.data.cart;if(w.leaveBreadcrumb("".concat(s," response"),{operationName:s,body:E,errors:D,hasNext:A.hasNext},"log"),E&&!A.hasNext){const P=this.parseCartResponse(E);return this.lastValidCart=P,P}}}catch(A){f=[A]}finally{try{g&&(y=h.return)&&await y.call(h)}finally{if(f)throw f[0]}}throw new ut("".concat(s," operation returned no response"))}async updateCartPayment(t,n,r,a){var o,i,s,l,c,u,m,h,g,y;const f={cartId:t,input:n},{amount:A,currencyCode:E}=n.amount;let D,P,st=!1,B;this.checkoutState="authorized";try{const x=ot()+1e4;for(;ot()<x;){const S=await this.requestDeferredCart(nu,f,{instrumentName:r,operationName:"updateCartPayment",abortSignal:a});if(D||(D=S),P=S,!ce()&&S.errors.length>0&&S.errors.some(zt=>Jr.some(wa=>_e(zt,wa)))){parseFloat((i=(o=S.data.totalTaxAmount)==null?void 0:o.amount)!=null?i:"0")===0&&await new Promise(zt=>setTimeout(zt,500)),f.input.amount={amount:S.data.totalAmount.amount,currencyCode:S.data.totalAmount.currencyCode},B!=null||(B={retryCount:0,retryStartTime:ot()}),B.retryCount++;continue}return qe({currentCart:{totalAmount:S.data.totalAmount},previousCart:{totalAmount:{amount:A,currencyCode:E}}})!=="inc"&&S.data.totalAmount.currencyCode===E?(st=!0,S):D}throw p.updateCartPaymentTimeout({instrument:r}),new jt("Payment update operation timed out",{reason:"timeout",errorDetails:{operationName:"updateCartPayment"}})}finally{if(B){const x=ot()-B.retryStartTime,S=(s=P==null?void 0:P.data)==null?void 0:s.totalAmount.amount;let zt;P!=null&&P.data&&A&&(zt=qe({currentCart:{totalAmount:P.data.totalAmount},previousCart:{totalAmount:{amount:A,currencyCode:E}}})),p.cartPaymentUpdateRetryResult({instrument:r,retryCount:B.retryCount,retryDuration:x,success:st,totalAmountChange:zt,originalAmount:A,originalCurrencyCode:E,finalAmount:S,finalCurrencyCode:(l=P==null?void 0:P.data)==null?void 0:l.totalAmount.currencyCode,finalSubtotalAmount:(u=(c=P==null?void 0:P.data)==null?void 0:c.subtotalAmount)==null?void 0:u.amount,finalTotalTaxAmount:(h=(m=P==null?void 0:P.data)==null?void 0:m.totalTaxAmount)==null?void 0:h.amount,finalTotalDutyAmount:(y=(g=P==null?void 0:P.data)==null?void 0:g.totalDutyAmount)==null?void 0:y.amount})}}}async updateCartAttributes({cartId:t,attributes:n,instrumentName:r,startingCheckout:a}){const o={cartId:t,attributes:n};return await this.requestDeferredCart(Wd,o,{instrumentName:r,operationName:"updateCartAttributes",startingCheckout:a})}async submitForCompletion(t,n,r){var a,o;const i=this.formatLanguage(this.locale),s=await this.request([ou],{cartId:t,attemptToken:n,country:this.country,language:i,withCarrierRates:this.withCarrierRates},{instrumentName:r,operationName:"submitForCompletion"});return s.errors&&await this.handleGraphQLErrorResponse("submitForCompletion",s),{data:(o=(a=s.data)==null?void 0:a.cartSubmitForCompletion)==null?void 0:o.result,errors:this.parseCompletionErrors(s)}}async fetchSubscriptionPolicy(){var t,n;const{data:r}=await this.request([ru],{country:this.country,language:this.formatLanguage(this.locale)},{operationName:"fetchSubscriptionPolicy"});return(n=(t=r==null?void 0:r.shop)==null?void 0:t.subscriptionPolicy)==null?void 0:n.body}async cartRemovePersonalData({cartId:t,instrumentName:n}){var r,a;let o,i,s;try{const c=await this.request([iu,wr],{cartId:t},{instrumentName:n,keepalive:!0});o=this.parseMutationWarnings((a=(r=c.data)==null?void 0:r.cartRemovePersonalData)==null?void 0:a.warnings),i=this.parseMutationErrors({result:c,key:"cartRemovePersonalData",operationName:"cartRemovePersonalData"})}catch(c){s=c.toString()}const l=!(o!=null&&o.length||i!=null&&i.length||s);p.removePersonalDataResult({success:l}),l||p.log({body:"cartRemovePersonalData failed",attributes:{cartId:t,warnings:o,errors:i,exception:s}})}setVisible(){this.hasBeenVisible=!0}generateURLWithOperationName(t){const n=t.match(this.OPERATION_NAME_REGEX);if(n){const r=this.url.includes("?")?"&":"?",a="operation_name=".concat(n[1]);return"".concat(this.url).concat(r).concat(a)}return this.url}async request(t,n,r){return this.client.request(t.join(""),{variables:n,headers:Kn(r),url:this.generateURLWithOperationName(t[0]),keepalive:r.keepalive})}async requestStream(t,n,r){return this.client.requestStream(t.join(""),{variables:n,headers:Kn(r),url:this.generateURLWithOperationName(t[0]),signal:r.abortSignal})}async requestDeferredCart(t,n,r){var a,o,i,s,l;const c=this.formatLanguage(this.locale),u=ce(),m=await this.requestStream([t,Oe,wr,qn],{...n,country:this.country,language:c,withCarrierRates:this.withCarrierRates&&!u,prepareCart:u},r);try{for(var h=at(m),g,y,f;g=!(y=await h.next()).done;g=!1){const A=y.value;A.errors&&await this.onError({operationName:r.operationName,response:A,abortSignal:r.abortSignal});const E=this.extractMutationErrors(A,r),D=this.extractMutationWarnings(A),P=(o=(a=A.data)==null?void 0:a.preparedCart)==null?void 0:o.result,st=(l=(s=(i=A.data)==null?void 0:i.result)==null?void 0:s.cart)!=null?l:P==null?void 0:P.cart;if(st&&!A.hasNext){let B;u?(B=this.parseCartResponse(st),this.lastValidCart=B):B=await this.fetchCart({id:st.id,instrumentName:r.instrumentName,startingCheckout:!1});const x=this.parsePreparedCartMutationErrors(A.errors,E,r.operationName);return{data:B,errors:x,warnings:D,abortReason:xn({cart:B,warnings:D}),decelerationReason:yr({warnings:D,cart:B,cartStatus:P==null?void 0:P.__typename,errors:x})}}if(this.lastValidCart&&E.length>0)return this.onResultError(E),{data:this.lastValidCart,errors:this.parsePreparedCartMutationErrors(A.errors,E,r.operationName),warnings:D,decelerationReason:yr({warnings:D,cart:this.lastValidCart})}}}catch(A){f=[A]}finally{try{g&&(y=h.return)&&await y.call(h)}finally{if(f)throw f[0]}}throw new ut("Deferred cart operation returned no response")}async handleGraphQLErrorResponse(t,n){const r=await su(t,n);if(!r)return;const{message:a,...o}=r,{isIgnorable:i,reason:s}=mu(r,{hasBeenVisible:this.hasBeenVisible});if(w.leaveBreadcrumb(a,{ignored:i,ignoredReason:s,...n,...o},"error"),i)throw p.log({body:"Ignored GraphQL response error",attributes:{message:a,reason:s,...o}}),new jt(a,{reason:s,errorDetails:o});return{message:a,errorDetails:o}}async onError({operationName:t,response:n,abortSignal:r}){if(r!=null&&r.aborted)throw p.log({body:"Request aborted",attributes:{operationName:t,reason:r.reason}}),new jt("Request aborted",{reason:"abort",errorDetails:{operationName:t}});const a=await this.handleGraphQLErrorResponse(t,n);if(!a)return;const{message:o,errorDetails:i}=a;throw new Ie(o,{errorDetails:i})}onResultError(t){w.leaveBreadcrumb("GraphQL result error",t,"error")}formatLanguage(t){return t.includes("-")?this.LANGUAGES_WITH_REGION.includes(t)?t.toUpperCase().replace("-","_"):t.split("-")[0].toUpperCase():t.toUpperCase()}parseCartResponse(t){var n,r,a;const o=t.lines.edges.map(s=>{var l,c,u,m;const h=s.node,g="parentRelationship"in h&&((c=(l=h.parentRelationship)==null?void 0:l.parent)==null?void 0:c.id)!==void 0;return{quantity:h.quantity,totalAmount:{amount:h.cost.totalAmount.amount,currencyCode:h.cost.totalAmount.currencyCode},subtotalAmount:{amount:(u=h.cost.subtotalAmount)==null?void 0:u.amount,currencyCode:(m=h.cost.subtotalAmount)==null?void 0:m.currencyCode},merchandise:{requiresShipping:h.merchandise.requiresShipping,title:h.merchandise.title,product:{title:h.merchandise.product.title}},discountAllocations:h.discountAllocations,sellingPlanAllocation:h.sellingPlanAllocation,isNestedLine:g}}),i=t.deliveryGroups.edges.map(s=>s.node);return{id:t.id,totalAmount:t.cost.totalAmount,subtotalAmount:(n=t.cost.subtotalAmount)!=null?n:void 0,totalTaxAmount:(r=t.cost.totalTaxAmount)!=null?r:void 0,totalDutyAmount:(a=t.cost.totalDutyAmount)!=null?a:void 0,discountAllocations:t.discountAllocations,discountCodes:t.discountCodes,lineItems:o,deliveryGroups:i,checkoutUrl:t.checkoutUrl}}parseGraphQlErrors(t){var n,r;return(r=(n=t==null?void 0:t.graphQLErrors)==null?void 0:n.map(a=>({code:a.message.replace(/\(Expected.*\)/,"").trim()})))!=null?r:[]}parseErrorIntoCartError({message:t,code:n,field:r}){let a;if(r&&r.length===1)a=r.at(0);else if(r&&r.length>1){const o=r[r.length-1];a=["billingAddress","deliveryAddress"].includes(o)?o:r.slice(-2).filter(i=>!i.match(/^\d+$/)).join(".")}return{code:n===null?void 0:n,field:a,message:t}}parseMutationErrors({result:t,key:n,operationName:r}){var a,o,i;const s=this.parseGraphQlErrors(t.errors),l=((i=(o=(a=t.data)==null?void 0:a[n])==null?void 0:o.errors)==null?void 0:i.map(this.parseErrorIntoCartError).filter(u=>u))||[],c=[...s,...l];return c.length>0&&w.leaveBreadcrumb("GraphQL errors on mutation '".concat(r,"'"),c,"error"),c}parseMutationWarnings(t){return!t||t.length===0?[]:t.map(n=>n.code)}stringifyAttributes(t){return t&&t.map(n=>({key:n.key,value:typeof n.value=="string"?n.value:JSON.stringify(n.value)}))}extractPreparedCartMutationErrors(t,n){var r,a;const o=(r=t==null?void 0:t.errors)!=null?r:[];if(((a=t==null?void 0:t.result)==null?void 0:a.__typename)==="CartStatusNotReady"){const i=[];o.push(...t.result.errors.filter(s=>{const l=_c[this.checkoutState];return l.length===0?!0:l.some(c=>c.code===s.code)?(i.push(s.code),!1):!0})),i.includes("DELIVERY_WRONG_NUMBER_OF_LINES")&&p.deliveryWrongNumberOfLines({instrument:n}),i.length>0&&w.leaveBreadcrumb("Filtered errors on mutation prepareCart",i,"log")}return o}extractMutationErrors(t,{instrumentName:n,operationName:r}){var a;if(!t.data)return[];const{preparedCart:o,__typename:i,...s}=t.data,l=Object.values(s).map(u=>{var m;return(m=u==null?void 0:u.errors)!=null?m:[]}).flat(),c=this.extractPreparedCartMutationErrors((a=t.data)==null?void 0:a.preparedCart,n);return c.length>0&&r==="updateCartAttributes"?(p.log({body:"Update cart attributes errors from prepareCart mutation",attributes:{instrumentName:n,errors:JSON.stringify(c)}}),l):[...l,...c]}extractMutationWarnings(t){if(!t.data)return[];const{preparedCart:n,__typename:r,...a}=t.data;return Object.values(a).map(o=>{var i;return this.parseMutationWarnings((i=o==null?void 0:o.warnings)!=null?i:[])}).flat()}parsePreparedCartMutationErrors(t,n,r){const a=this.parseGraphQlErrors(t),o=n.map(this.parseErrorIntoCartError).filter(s=>s),i=[...a,...o];return i.length>0&&w.leaveBreadcrumb("GraphQL errors on mutation '".concat(r,"'"),i,"error"),i}parseCompletionErrors(t){var n,r,a,o,i,s;const l=this.parseGraphQlErrors(t.errors);let c=[];((a=(r=(n=t.data)==null?void 0:n.cartSubmitForCompletion)==null?void 0:r.result)==null?void 0:a.__typename)==="SubmitFailed"&&(c=(o=t.data.cartSubmitForCompletion.result.errors.map(m=>({code:m.code})))!=null?o:[]);const u=[...l,...c];return u.length>0?w.leaveBreadcrumb("GraphQL errors on completion",u,"error"):t.errors&&w.leaveBreadcrumb("Errors on submitForCompletion",{errors:t.errors,hasData:!!t.data,hasResult:!!((s=(i=t.data)==null?void 0:i.cartSubmitForCompletion)!=null&&s.result)},"error"),u}}function Au(e){return!("cart"in e)}function ce(){return G.enabled(Rt)}function Cu(){return G.enabled(Qr)}function Yn({emailAddress:e,countryCode:t,phone:n,streetAddress:r,validateAddress:a,preferences:o}){return{email:e,countryCode:t!=null?t:r==null?void 0:r.country,phone:n!=null?n:r==null?void 0:r.phone,deliveryAddressPreferences:r?[{deliveryAddressValidationStrategy:a?"STRICT":"COUNTRY_CODE_ONLY",deliveryAddress:r}]:[],preferences:o}}function Kn({instrumentName:e,startingCheckout:t}){const n={};return e&&(n["X-Wallet-Name"]="".concat(e)),t&&(n["X-Start-Wallet-Checkout"]="".concat(t)),n}async function Ao({cartId:e,cartClient:t,instrumentName:n,selectedDeliveryOptions:r,abortSignal:a}){try{if(!e)throw new Error("[".concat(n,"] provided no cart ID when updating shipping method"));if(!t)throw new Error("[".concat(n,"] provided invalid cart client when updating shipping method"));return await t.updateSelectedDeliveryOptions(e,r,n,a)}catch(o){throw p.updateFailed({instrument:n,request:"updateSelectedDeliveryOptions",error:o}),o}}async function Co({cartId:e,token:t,cartClient:n,instrumentName:r}){try{if(!e)throw new Error("[".concat(r,"] provided no cart ID when submitting for completion"));if(!n)throw new Error("[".concat(r,"] provided invalid cart client when submitting for completion"));if(!t)throw new Error("[".concat(r,"] provided no token when submitting for completion"));return await n.submitForCompletion(e,t,r)}catch(a){throw p.updateFailed({instrument:r,request:"submitForCompletion",error:a}),a}}function So({selectedDeliveryOptionHandles:e,deliveryGroups:t,instrumentName:n}){return t.map(r=>{const a=r.deliveryOptions.filter(o=>e.includes(o.handle));if(!a.length)return{deliveryGroupId:"",deliveryOptionHandle:""};if(a.length>1)throw new Su("[".concat(n,"] found multiple delivery options with selectedDeliverOptionHandle in group: ").concat(r.id),{groupingHash:"getSelectedDeliveryOptions::MultipleOptions"});return{deliveryGroupId:r.id,deliveryOptionHandle:a[0].handle}}).filter(r=>!!r.deliveryGroupId)}class Su extends et{constructor(){super(...arguments),d(this,"name","GetSelectedDeliveryOptionsError")}}async function Pu(e){const{cartClient:t,instrumentName:n}=e;try{if(!e.cartId)throw new Error("[".concat(n,"] provided no cart ID when updating billing address"));if(!t)throw new Error("[".concat(n,"] provided invalid cart client when updating billing address"));return await t.updateCartBillingAddress(e)}catch(r){throw p.updateFailed({instrument:n,request:"updateBillingAddress",error:r}),r}}function ge({result:e,instrument:t}){var n;const r=(n=e.errors)!=null?n:[];Ec(r,Xr)&&p.dynamicTaxFailed({instrument:t})}const Qn=["cart_throttled","not_enough_stock","payment_method_not_applicable","account_info_mismatch","price_increased","nested_line_subscription","nested_line_deferred_payment"];class vu{constructor({accessToken:t,buyerCountry:n,buyerCurrency:r,button:a,i18n:o,merchantName:i,dataSource:s,apiClient:l,walletParams:c}){d(this,"name",b.ApplePay),d(this,"accessToken"),d(this,"button"),d(this,"buyerCountry"),d(this,"cart"),d(this,"apiClient"),d(this,"dataSource"),d(this,"i18n"),d(this,"merchantName"),d(this,"session"),d(this,"paymentSheetActionGenerator"),d(this,"cancelled"),d(this,"buyerCurrency"),d(this,"customerAccountEmail"),d(this,"abortController",null),d(this,"isPersonalDataCleared",!1),d(this,"isSheetLoaded",!1),d(this,"walletParams"),d(this,"shouldPadPostalCode"),d(this,"onvalidatemerchant",async u=>{var m,h,g,y;try{w.leaveBreadcrumb("ApplePay onvalidatemerchant: Starting merchant validation",{validationURL:u.validationURL},"log");const f=new URL(u.validationURL),A=this.getMerchantSession(f);w.leaveBreadcrumb("ApplePay onvalidatemerchant: Calling handleCreateCart",{},"log");const{cart:E,decelerationReason:D,customValidationError:P,unrecoverableError:st}=await Et({element:this.button,instrumentName:this.name,dataSource:this.dataSource});if(w.leaveBreadcrumb("ApplePay onvalidatemerchant: handleCreateCart result",{hasCart:!!E,cartId:(m=E==null?void 0:E.id)!=null?m:"null"},"log"),st){w.leaveBreadcrumb("ApplePay Session unrecoverable error",{unrecoverableError:st},"error"),p.sheetClicked({instrument:this.name,result:"rejected",reason:"unrecoverable_error"}),this.withActiveSession("abort",()=>this.session.abort()),(h=this.abortController)==null||h.abort("[Apple Pay] Unrecoverable error ".concat(st)),Mt(this.i18n,st);return}if(P){w.leaveBreadcrumb("ApplePay Session custom validation error",{customValidationError:P},"error"),p.sheetClicked({instrument:this.name,result:"rejected",reason:"custom_validation_error"}),this.withActiveSession("abort",()=>this.session.abort()),(g=this.abortController)==null||g.abort("[Apple Pay] Custom validation error"),Lt(this.i18n,P.message);return}this.cart=E,xa({cart_token:qr(E)});const B=await A;if(w.leaveBreadcrumb("ApplePay Session completeMerchantValidation",{session:B},"log"),D&&Qn.includes(D)){p.sheetClicked({instrument:this.name,result:"success",reason:"deceleration"}),await this.terminateSession(),U({checkoutUrl:(y=E==null?void 0:E.checkoutUrl)!=null?y:"",instrumentName:this.name,reason:D,stage:"onValidateMerchant::createCart"});return}if(this.sessionIsCancelled()){p.sheetClicked({instrument:this.name,result:"rejected",reason:"cancelled"});return}this.withActiveSession("completeMerchantValidation",()=>this.session.completeMerchantValidation(B)),p.sheetClicked({instrument:this.name,result:"success"})}catch(f){p.sheetClicked({instrument:b.ApplePay,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in Apple Pay sheet clicked",attributes:{error:String(f),location:"onvalidatemerchant"}}),this.terminateSession({error:f})}}),d(this,"onshippingcontactselected",async u=>{if(!this.sessionIsCancelled())try{const m=Re(u.shippingContact,this.shouldPadPostalCode),h=await Wt({cartId:this.cart.id,streetAddress:m,cartClient:this.apiClient,instrumentName:this.name});if(await this.decelerateOrAbort({result:h,stage:"onShippingContactSelected::updateBuyerIdentity"}))return;await this.applyPaymentSheetActions({result:h,onProceed:g=>this.completeShippingContactSelection(h.data,g),context:{shippingRequired:this.isShippingRequired,shippingCountryCode:m.country},checkoutUrl:this.cart.checkoutUrl,requestType:"onShippingContactSelected::updateBuyerIdentity",afterAuthorization:!1})}catch(m){this.terminateSession({error:m})}}),d(this,"onshippingmethodselected",async u=>{var m,h,g;if(!this.sessionIsCancelled()){w.leaveBreadcrumb("ApplePay onshippingmethodselected: START",{hasCart:!!this.cart,cartId:(h=(m=this.cart)==null?void 0:m.id)!=null?h:"null",shippingMethodId:u.shippingMethod.identifier},"log");try{const y=u.shippingMethod.identifier.split(","),f=So({selectedDeliveryOptionHandles:y,deliveryGroups:this.cart.deliveryGroups,instrumentName:this.name});if(f.length===0){this.handleShippingMethodNotFoundInCart(y);return}const A=await Ao({cartId:this.cart.id,cartClient:this.apiClient,instrumentName:this.name,selectedDeliveryOptions:f,abortSignal:(g=this.abortController)==null?void 0:g.signal});if(await this.decelerateOrAbort({result:A,stage:"onShippingMethodSelected::updateSelectedDeliveryOptions"}))return;await this.applyPaymentSheetActions({result:A,onProceed:()=>this.completeShippingMethodSelection(A.data),context:{shippingRequired:this.isShippingRequired,shippingCountryCode:void 0},checkoutUrl:this.cart.checkoutUrl,requestType:"onShippingMethodSelected::updateSelectedDeliveryOptions",afterAuthorization:!1}),this.onSheetLoaded()}catch(y){this.terminateSession({error:y})}}}),d(this,"onpaymentmethodselected",async u=>{var m,h;if(!this.sessionIsCancelled()){w.leaveBreadcrumb("ApplePay onpaymentmethodselected: START",{hasCart:!!this.cart,cartId:(h=(m=this.cart)==null?void 0:m.id)!=null?h:"null"},"log");try{const{billingContact:g}=u.paymentMethod,y=this.cart.id;if(!this.isShippingRequired&&g){const E=Re(g,!1),D=await Wt({cartId:this.cart.id,countryCode:E.country,cartClient:this.apiClient,instrumentName:this.name});if(await this.decelerateOrAbort({result:D,stage:"onPaymentMethodSelected::updateBuyerIdentity"}))return;await this.applyPaymentSheetActions({result:D,onProceed:()=>{this.cart=D.data},context:{shippingRequired:this.isShippingRequired,shippingCountryCode:E.country},checkoutUrl:this.cart.checkoutUrl,requestType:"onPaymentMethodSelected::updateBuyerIdentity",afterAuthorization:!1});const P=await Pu({billingAddress:E,cartId:this.cart.id,cartClient:this.apiClient,instrumentName:this.name});if(await this.decelerateOrAbort({result:P,stage:"onPaymentMethodSelected::updateBillingAddress"}))return;await this.applyPaymentSheetActions({result:P,onProceed:()=>{this.cart=P.data},context:{shippingRequired:this.isShippingRequired,shippingCountryCode:E.country},checkoutUrl:this.cart.checkoutUrl,requestType:"onPaymentMethodSelected::updateBillingAddress",afterAuthorization:!1}),this.cart||p.log({body:"[ApplePay] Cart is null after onPaymentMethodSelected::updateBillingAddress",attributes:{cartId:y,result:P,walletParams:this.walletParams,isShippingRequired:this.isShippingRequired,session:this.sessionIsCancelled()}})}const{newTotal:f,newLineItems:A}=this.getNewTotalAndLineItems(this.cart);if(w.leaveBreadcrumb("ApplePay Session completePaymentMethodSelection",{newTotal:f,newLineItems:A},"log"),this.sessionIsCancelled())return;this.withActiveSession("completePaymentMethodSelection",()=>this.session.completePaymentMethodSelection({newTotal:f,newLineItems:A})),this.isShippingRequired||this.onSheetLoaded()}catch(g){this.terminateSession({error:g})}}}),d(this,"oncancel",()=>{var u;this.cancelled=!0,this.removePersonalData(),Q(M.SheetLoad,this.name),p.sheetCancelled(this.name),this.button.disabled=!1,(u=this.abortController)==null||u.abort("[Apple Pay] Payment sheet cancelled")}),d(this,"onpaymentauthorized",async u=>{var m,h;w.leaveBreadcrumb("ApplePay onpaymentauthorized: START",{hasCart:!!this.cart,cartId:(h=(m=this.cart)==null?void 0:m.id)!=null?h:"null",hasToken:!!u.payment.token},"log"),p.authorizationAttempt(this.name),re(M.AuthorizationLatency,this.name);const g=async x=>{var S,zt,wa;switch((S=x.effects)==null||S.forEach(z=>z()),x.action){case"complete":{const z=ApplePaySession.STATUS_SUCCESS;try{await this.completePayment(z),wt(x.redirectUrl)}catch(ae){this.terminateSession({error:ae,afterAuthorization:!0})}break}case"show_error":{const z=(zt=x.errors)!=null?zt:[];try{await this.completePayment(ApplePaySession.STATUS_FAILURE,z)}catch(ae){this.terminateSession({error:ae,afterAuthorization:!0})}break}case"abort":{try{this.abortPaymentSheetAndShowError(),this.removePersonalData()}catch(z){this.terminateSession({error:z,afterAuthorization:!0})}break}case"decelerate":{try{await this.completePayment(ApplePaySession.STATUS_FAILURE),Iu()?V({event:H.RecoveryFlowInitiated,checkoutToken:ze((wa=this.cart)==null?void 0:wa.id),instrumentId:this.name}):await this.removePersonalData(),U({checkoutUrl:x.redirectUrl,instrumentName:this.name,reason:x.reason,stage:"onPaymentAuthorized::submitForCompletion"})}catch(z){this.terminateSession({error:z,afterAuthorization:!0})}break}default:this.terminateSession({error:new Error("[".concat(this.name,"] completion action not handled: ").concat(x.action)),afterAuthorization:!0})}},{token:y,billingContact:f,shippingContact:A}=u.payment;let E=null,D=null;try{if(!f){await this.completePayment(ApplePaySession.STATUS_FAILURE);return}if(E=Re({...f,phoneNumber:A==null?void 0:A.phoneNumber},!1),this.isShippingRequired){if(!A){await this.completePayment(ApplePaySession.STATUS_FAILURE);return}D=Re(A,this.shouldPadPostalCode)}}catch(x){this.terminateSession({error:x,afterAuthorization:!0});return}const P=async()=>{var x,S;try{const zt=this.isShippingRequired?{validateAddress:!0,streetAddress:D}:{},wa=(x=this.customerAccountEmail)!=null?x:A==null?void 0:A.emailAddress,z=await Wt({cartId:this.cart.id,emailAddress:wa,cartClient:this.apiClient,instrumentName:this.name,...zt});ge({result:z,instrument:this.name});const ae=qe({currentCart:z.data,previousCart:this.cart});if(G.enabled(Rt)&&z.data&&ae!=="inc"&&(this.cart=z.data),G.enabled(Rt)&&ae==="inc"&&(z.decelerationReason||(z.decelerationReason="price_increased")),await this.decelerateOrAbort({result:z,stage:"onPaymentAuthorized::updateBuyerIdentity"}))return;const ap=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction({result:z,context:{shippingRequired:this.isShippingRequired,shippingCountryCode:D==null?void 0:D.country,billingCountryCode:E==null?void 0:E.country},checkoutUrl:this.cart.checkoutUrl,requestType:"onPaymentAuthorized::updateBuyerIdentity"});(S=ap.effects)==null||S.forEach(Uo=>Uo()),await this.handlePaymentSheetAction({paymentSheetAction:ap,onProceed:async Uo=>{Uo&&Uo.length>0?await this.completePayment(ApplePaySession.STATUS_FAILURE,Uo):await st()},afterAuthorization:!0,stage:"onPaymentAuthorized::updateBuyerIdentity"})}catch(zt){this.terminateSession({error:zt,afterAuthorization:!0})}},st=async()=>{var x,S;try{const zt=this.cart.lineItems.some(ae=>!!ae.sellingPlanAllocation),wa=await on({cartId:this.cart.id,totalAmount:this.cart.totalAmount,paymentMethod:{walletPaymentMethod:{applePayWalletContent:{billingAddress:E,data:y.paymentData.data,header:y.paymentData.header,lastDigits:y.paymentMethod.displayName.split(" ")[1],signature:y.paymentData.signature,version:y.paymentData.version}}},canUsePaymentMethodForFreeOrder:!1,billingAddress:E,cartClient:this.apiClient,instrumentName:this.name,hasSellingPlan:zt,abortSignal:(x=this.abortController)==null?void 0:x.signal});if(ge({result:wa,instrument:this.name}),await this.decelerateOrAbort({result:wa,stage:"onPaymentAuthorized::updatePayment"}))return;const z=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction({result:wa,context:{shippingRequired:this.isShippingRequired,shippingCountryCode:D==null?void 0:D.country,billingCountryCode:E==null?void 0:E.country},checkoutUrl:this.cart.checkoutUrl,requestType:"onPaymentAuthorized::updatePayment"});(S=z.effects)==null||S.forEach(ae=>ae()),await this.handlePaymentSheetAction({paymentSheetAction:z,onProceed:async ae=>{ae&&ae.length>0?await this.completePayment(ApplePaySession.STATUS_FAILURE,ae):await B()},afterAuthorization:!0,stage:"onPaymentAuthorized::updatePayment"})}catch(zt){this.terminateSession({error:zt,afterAuthorization:!0})}},B=async()=>{var x;try{const S=await Co({cartId:this.cart.id,token:y.transactionIdentifier,cartClient:this.apiClient,instrumentName:this.name});ge({result:S,instrument:this.name}),(x=S.errors)!=null&&x.some(wa=>wa.code==="ERROR")&&(w.leaveBreadcrumb("ApplePay Generic ERROR encountered during completion",{errorCodes:S.errors},"error"),p.log({body:"[ApplePay] Generic ERROR code encountered during completion",attributes:{errorCodes:S.errors}}));const zt=this.paymentSheetActionGenerator.mapCompletionResultToPaymentSheetAction({result:S,context:{shippingRequired:this.isShippingRequired,shippingCountryCode:D==null?void 0:D.country,billingCountryCode:E==null?void 0:E.country},checkoutUrl:S.data&&"checkoutUrl"in S.data&&S.data.checkoutUrl?S.data.checkoutUrl:this.cart.checkoutUrl});await g(zt)}catch(S){this.terminateSession({error:S,afterAuthorization:!0})}};await P()}),d(this,"terminateSession",async({error:u,afterAuthorization:m=!1}={})=>{var h;try{this.button.disabled=!1,u&&w.notify(u),m?p.authorizationComplete({instrument:this.name,measurement:Q(M.AuthorizationLatency,this.name),result:"failed"}):(Q(M.SheetLoad,this.name),p.sheetFailed(this.name,u)),w.leaveBreadcrumb("ApplePay Session abort",{afterAuthorization:m},"log");try{this.withActiveSession("abort",()=>this.session.abort()),(h=this.abortController)==null||h.abort("[Apple Pay] Payment sheet terminated")}catch(g){}if(u){const g=this.i18n.translate("brand.apple_pay");it(g,this.i18n)}}finally{await this.removePersonalData()}}),d(this,"getMostRecentNonNullCart",(u,m)=>u?(this.cart=u,u):m),d(this,"handleNullCart",u=>{if(!u)throw new Error("[".concat(this.name,"] no cart returned on mutation, aborting"))}),d(this,"completeShippingContactSelection",(u,m)=>{try{const h=this.getMostRecentNonNullCart(u,this.cart),{newTotal:g,newLineItems:y}=this.getNewTotalAndLineItems(h),f=Un(h.deliveryGroups,this.i18n);w.leaveBreadcrumb("ApplePay Session completeShippingContactSelection",{errors:m,newTotal:g,newLineItems:y,newShippingMethods:f},"log"),this.withActiveSession("completeShippingContactSelection",()=>this.session.completeShippingContactSelection({errors:m!=null?m:[],newTotal:g,newLineItems:y,newShippingMethods:f}))}catch(h){this.terminateSession({error:h})}}),d(this,"completeShippingMethodSelection",u=>{try{this.handleNullCart(u),this.cart=u;const{newTotal:m,newLineItems:h}=this.getNewTotalAndLineItems(u);w.leaveBreadcrumb("ApplePay Session completeShippingContactSelection",{newTotal:m,newLineItems:h},"log"),this.withActiveSession("completeShippingMethodSelection",()=>this.session.completeShippingMethodSelection({newTotal:m,newLineItems:h}))}catch(m){this.terminateSession({error:m})}}),d(this,"sessionIsCancelled",()=>this.cancelled),this.accessToken=t,this.buyerCountry=n,this.button=a,this.cart=null,this.apiClient=l,this.shouldPadPostalCode=G.enabled(Rt),this.dataSource=s,this.i18n=o,this.merchantName=i,this.cancelled=!1,this.buyerCurrency=r,this.customerAccountEmail=c.customerAccountEmail,this.walletParams=c;try{this.session=new ApplePaySession(_a,Cd({shippingRequired:this.isShippingRequired,walletParams:c,buyerCurrency:r}))}catch(u){throw new Pd(String(u),{cause:u})}this.session.onvalidatemerchant=this.onvalidatemerchant,this.session.onshippingcontactselected=this.onshippingcontactselected,this.session.onshippingmethodselected=this.onshippingmethodselected,this.session.onpaymentmethodselected=this.onpaymentmethodselected,this.session.oncancel=this.oncancel,this.session.onpaymentauthorized=this.onpaymentauthorized,this.paymentSheetActionGenerator=new Ad(o)}begin(){w.leaveBreadcrumb("ApplePay Session begin",{shippingRequired:this.isShippingRequired,buyerCurrency:this.buyerCurrency,walletParams:this.walletParams},"log"),this.abortController=Ot("AbortController"),this.session.begin()}handleShippingMethodNotFoundInCart(t){var n,r;const a=Un((r=(n=this.cart)==null?void 0:n.deliveryGroups)!=null?r:[],this.i18n);w.leaveBreadcrumb("ApplePay Session selected shipping method(s) not found in current cart, updating payment sheet",{attemptedDeliveryOptionHandles:t,currentShippingMethods:a},"log"),this.completeShippingMethodSelection(this.cart)}async applyPaymentSheetActions({result:t,onProceed:n,context:r,checkoutUrl:a,requestType:o,afterAuthorization:i}){var s;const l=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction({result:t,context:r,checkoutUrl:a,requestType:o});(s=l.effects)==null||s.forEach(c=>c()),!this.sessionIsCancelled()&&await this.handlePaymentSheetAction({paymentSheetAction:l,onProceed:n,afterAuthorization:i,stage:o})}async getMerchantSession(t){const n=await new lr({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale,apiVersion:"unstable"}).applePaySessionCreate(t);return JSON.parse(n)}abortPaymentSheetAndShowError(){w.leaveBreadcrumb("ApplePay Session abort",{},"log"),this.withActiveSession("abort",()=>this.session.abort()),this.button.disabled=!1,this.emitPaymentCompleteTelemetry(ApplePaySession.STATUS_FAILURE)}abortPaymentSheetAndShowOutOfStockModal(){w.leaveBreadcrumb("ApplePay Session abort",{},"log"),this.withActiveSession("abort",()=>this.session.abort()),this.button.disabled=!1,bt(this.i18n),this.emitPaymentCompleteTelemetry(ApplePaySession.STATUS_FAILURE)}emitPaymentCompleteTelemetry(t){p.authorizationComplete({instrument:this.name,measurement:Q(M.AuthorizationLatency,this.name),result:t===ApplePaySession.STATUS_SUCCESS?"success":"failed"})}async completePayment(t,n=void 0){w.leaveBreadcrumb("ApplePay Session completePayment",{status:t,errors:n},"log");const r=this.withActiveSession("completePayment",()=>{this.session.completePayment({status:t,errors:n})});this.emitPaymentCompleteTelemetry(t),r===void 0&&t===ApplePaySession.STATUS_SUCCESS&&p.paymentCompletedAfterAbort({instrument:this.name,error:"Session already terminated"})}getNewTotalAndLineItems(t){return{newTotal:bd(this.merchantName,t.totalAmount),newLineItems:wd({subtotal:lo(t),discountAllocations:Sd(t),deliveryGroups:t.deliveryGroups,duties:t.totalDutyAmount,taxes:t.totalTaxAmount,i18n:this.i18n,formattedRecurringTotals:vd(this.cart.lineItems,this.i18n),lineItems:G.enabled(Ha)?t.lineItems:[]})}}async decelerateOrAbort({result:t,stage:n}){return t.abortReason==="out_of_stock"?(p.sheetClicked({instrument:this.name,result:"rejected",reason:"out_of_stock"}),this.abortPaymentSheetAndShowOutOfStockModal(),!0):this.decelerateIfNeeded({result:t,stage:n})}async decelerateIfNeeded({result:t,stage:n}){if(!t.data)return!1;const{checkoutUrl:r,totalAmount:a}=t.data;let o;if(t.decelerationReason&&Qn.includes(t.decelerationReason)?o=t.decelerationReason:tn({currentCartTotal:a,initialBuyerCurrency:this.buyerCurrency})&&(o="currency_changed"),o){p.sheetClicked({instrument:this.name,result:"success",reason:"deceleration"});try{await this.terminateSession()}finally{U({checkoutUrl:r,instrumentName:this.name,reason:o,stage:n})}return!0}return!1}get isShippingRequired(){return this.button.isShippingRequired}async removePersonalData(){this.isPersonalDataCleared||!this.cart||(await this.apiClient.cartRemovePersonalData({cartId:this.cart.id,instrumentName:this.name}),this.isPersonalDataCleared=!0)}onSheetLoaded(){if(this.isSheetLoaded)return;this.isSheetLoaded=!0;const t=Q(M.SheetLoad,this.name);t&&(V({event:H.SheetLoaded,ttl:t}),p.sheetLoaded({instrument:this.name,measurement:t}))}withActiveSession(t,n){var r,a;if((a=(r=this.abortController)==null?void 0:r.signal)!=null&&a.aborted){p.walletSessionAbortError({instrument:this.name,errorName:"SessionAlreadyTerminated",methodName:t});return}try{return n()}catch(o){if(o instanceof Error&&o.name==="InvalidAccessError"){p.walletSessionAbortError({instrument:this.name,errorName:"InvalidAccessError",methodName:t});return}throw o}}async handlePaymentSheetAction({paymentSheetAction:t,onProceed:n,afterAuthorization:r,stage:a}){switch(t.action){case"abort":this.terminateSession({afterAuthorization:r});break;case"show_error":await n(t.errors);break;case"update":await n(t.errors);break;case"decelerate":try{await this.terminateSession({afterAuthorization:r})}finally{U({instrumentName:this.name,checkoutUrl:t.redirectUrl,reason:t.reason,stage:a})}break;default:throw new Error('Missing handler for payment sheet action "'.concat(t.action,'"'))}}}function Iu(){return G.enabled(ol)}function sn({translate:e,logoElement:t,setAriaHidden:n}){const r=document.createElement("div");return e("buy_with_button_content",{wallet:"LOGO_PLACEHOLDER"}).split(new RegExp("(LOGO_PLACEHOLDER)")).filter(Boolean).forEach(a=>{let o;a==="LOGO_PLACEHOLDER"?o=t:(o=document.createElement("span"),o.innerText=a,n&&o.setAttribute("aria-hidden","true")),r.appendChild(o)}),r}const Je=new Map;function ku({instrumentName:e,logoType:t="LIGHT",logoContent:n}){const r=Je.get(e)||{};r[t]||(r[t]=n,Je.set(e,r))}function Ee({instrumentName:e,logoType:t="LIGHT"}){var n;const r=(n=Je.get(e))==null?void 0:n[t];if(!r)throw new Error("".concat(e," ").concat(t," logo not loaded"));return r}class Tu extends At{constructor(){super(...arguments),d(this,"name",b.ApplePay),d(this,"button",null)}static get observedAttributes(){return["disabled"]}get merchantName(){return this.walletParams.merchantName}connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name)}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button)}async handleClick(t){if(t.preventDefault(),this.disabled||!this.button||this.button.hasAttribute("aria-disabled"))return;this.disabled=!0;const[n,r,a]=await Promise.all([this.i18n,this.dataSource,this.apiClient]);re(M.SheetLoad,this.name);let o;try{if(o=new vu({accessToken:this.accessToken,buyerCountry:this.buyerCountry,buyerCurrency:this.buyerCurrency,button:this,i18n:n,merchantName:this.merchantName,dataSource:r,apiClient:a,walletParams:this.walletParams}),!o)throw new Error("missing ApplePaySession");o.begin()}catch(i){w.leaveBreadcrumb("Failed to create ApplePay Session",{error:i},"error"),o||(p.sheetClicked({instrument:this.name,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in Apple Pay session creation",attributes:{error:String(i),location:"handleClick"}})),o==null||o.terminateSession(),it(n.translate("brand.apple_pay"),n),this.disabled=!1}}async render(){var t;const n=this.getOrCreateShadowRoot(),{translate:r}=await this.i18n,a=Ee({instrumentName:b.ApplePay}),o=new DOMParser().parseFromString(a,"image/svg+xml").documentElement;if(!this.button){const i=this.isCTA?r("buy_with_button_content",{wallet:r("brand.apple_pay")}):r("brand.apple_pay");if(this.button=or({label:i}),this.button.onclick=s=>this.handleClick(s),this.button.classList.add("apple-pay-button",ei[this.buttonTheme],xt.BUTTON),this.isCTA){const s=sn({translate:r,logoElement:o,setAriaHidden:!0});s.classList.add("apple-pay--content"),this.button.appendChild(s)}else this.button.appendChild(o);this.initializeShadowStyles(n,id),n.appendChild(this.button),this.ensureLightDOMIsNotEmpty(),(t=this.onRendered)==null||t.call(this)}this.disabled&&(this.button.setAttribute("disabled",""),this.button.setAttribute("aria-disabled","true"))}}function ln(e){return function(t,n,r){const a=r.value;return r.value=function(...o){const i=a.apply(this,o);return i.eligible||console.debug("[DEBUG] ".concat(e," could not be rendered. Reason: ").concat(i.reason)),i},r}}async function te({svg:e,instrumentName:t,logoType:n="LIGHT"}){var r;if((r=Je.get(t))!=null&&r[n])return;let a,o,i;try{if(i=Nu(e),a=await fetch(i,{headers:{Accept:"image/svg+xml"}}),!a.ok)throw new Error("Failed to fetch SVG: ".concat(a.status," ").concat(a.statusText));if(o=await a.text(),!o||!o.includes("<svg"))throw new Error("Invalid SVG content received");ku({instrumentName:t,logoType:n,logoContent:o})}catch(s){const l=s instanceof Error?s.message:String(s);throw w.leaveBreadcrumb("SVG fetch failed",{error:l,responseStatus:a==null?void 0:a.status,responseHeaders:a==null?void 0:a.headers,responseBody:o==null?void 0:o.slice(0,100),assetUrl:i}),new tt("SVG fetch failed",{cause:l})}}function Nu(e){const t=new URL(import.meta.url);return new URL("assets/".concat(e),t).href}var Ru=Object.defineProperty,Du=Object.getOwnPropertyDescriptor,Po=(e,t,n,r)=>{for(var a=Du(t,n),o=e.length-1,i;o>=0;o--)(i=e[o])&&(a=i(t,n,a)||a);return a&&Ru(t,n,a),a};class cn extends Ct{constructor(t){super(t),d(this,"companyFieldRequired"),this.companyFieldRequired=!!this.walletParams.companyRequired}static walletName(){return"apple_pay"}getWebComponentName(){return"shopify-apple-pay-button"}getWebComponentClass(){return Tu}getInstrumentName(){return b.ApplePay}getLoadEligibility(){return this.isInIframe()?{eligible:!1,reason:"cannot be loaded in an iframe"}:{eligible:!0}}getPartnerSDKEligibility(){var t,n,r,a;if(typeof window>"u"||window.ApplePaySession===void 0)return{eligible:!1,reason:"window or ApplePaySession is undefined"};try{if(!((n=(t=window.ApplePaySession).supportsVersion)!=null&&n.call(t,_a)))return{eligible:!1,reason:"SDK does not meet minimum version requirement"};if(!((a=(r=window.ApplePaySession).canMakePayments)!=null&&a.call(r)))return{eligible:!1,reason:"failed SDK eligibility check"}}catch(o){return{eligible:!1,reason:"error in SDK eligibility checks"}}return{eligible:!0}}async loadWalletSDK(){await this.loadAppleLogo()}async loadAppleLogo(){await te({svg:"apple-pay-logo.svg",instrumentName:b.ApplePay})}}Po([ln("Apple Pay")],cn.prototype,"getLoadEligibility"),Po([ln("Apple Pay")],cn.prototype,"getPartnerSDKEligibility");const Ou=".buy-with-prime-button{width:100%;height:100%;padding:12px 10px 8px;display:flex;align-items:center;justify-content:center;gap:5px;opacity:1;border-width:0px}.buy-with-prime-button:hover:enabled{background-color:#0684eb!important}.buy-with-prime-button:focus{box-shadow:0 0 0 2px #1a98ff,inset 0 0 0 2px rgb(var(--color-background))!important;outline:none!important}.buy-with-prime-button:active,.buy-with-prime-button:hover:enabled:active{background-color:#0066cd!important;box-shadow:none!important}.buy-with-prime-button>svg{min-width:85px}";class Xe extends Error{constructor(){super(...arguments),d(this,"name","MissingAccessTokenError")}}class dn extends Error{constructor(){super(...arguments),d(this,"name","FetchingWalletsPlatformConfigError")}}class un extends Error{constructor(){super(...arguments),d(this,"name","EmptyLineItemsWalletsPlatformConfigError")}}async function vo({configOptionsEndpoint:e,checkoutUrl:t,sourceId:n,accessToken:r,instrument:a}){try{const o=JSON.stringify({checkout_url:t,checkout_cancel_url:window.location.href,cart_id:n}),i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":r},body:o});if(i.ok)return i.json();const s=await i.json();throw s.error?new Error(s.error):new Error("Could not fetch wallets platform configs: [".concat(i.status,"] ").concat(i.statusText))}catch(o){const{message:i}=o!=null?o:{};switch(i){case"empty_line_items":throw new un("[Fetch Pay Config][".concat(a,"] No eligible line items provided in the config request."));default:throw new dn("[Fetch Pay Config][".concat(a,"] ").concat(i))}}}const xu={[N.Checkout]:"Checkout",[N.CartAjax]:"Cart",[N.CartPage]:"Cart",[N.ProductPage]:"Product",[N.Unknown]:"Product"},$t=class cp extends At{constructor(){super(...arguments),d(this,"name",b.BuyWithPrime),d(this,"button",null),d(this,"apiClientId","")}connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name),this.handleOnSendCheckoutAction=this.handleOnSendCheckoutAction.bind(this)}async createButton(){const{translate:t}=await this.i18n,n=or({label:t("brand.buy_with_prime")});return n.type="button",n.className="buy-with-prime-button",this.applyEnabledStyles(n),n}applyEnabledStyles(t){const n=Ee({instrumentName:b.BuyWithPrime});t.innerHTML=n,t.disabled=!1,me(t,{"background-color":"#1A98FF",color:"#FFFFFF",cursor:"pointer"})}applyDisabledStyles(t){const n=Ee({instrumentName:b.BuyWithPrime,logoType:"DARK"});t.innerHTML=n,t.disabled=!0,me(t,{"background-color":"#C0E3FF",color:"#7292AC",cursor:"not-allowed"})}async handleClick(){var t,n,r;if(!this.button)return;const[a,o]=await Promise.all([this.i18n,this.dataSource]);let i;try{this.applyDisabledStyles(this.button);let s=this.walletParams;if(this.apiClientId=this.apiClientId||s.appId||"",i=this.apiClientId?{apiClientId:this.apiClientId,pageType:this.pageType}:void 0,!s.createCheckoutSessionConfig){const{cart:u,decelerationReason:m,customValidationError:h,unrecoverableError:g}=await Et({element:this,instrumentName:this.name,dataSource:o});if(g){p.sheetClicked({instrument:this.name,result:"rejected",reason:"unrecoverable_error",webPixelMetaData:i}),Mt(a,g);return}if(h){p.sheetClicked({instrument:this.name,result:"rejected",reason:"custom_validation_error",webPixelMetaData:i}),Lt(a,h.message);return}if(m){p.sheetClicked({instrument:this.name,result:"success",reason:"deceleration",webPixelMetaData:i}),U({checkoutUrl:(t=u==null?void 0:u.checkoutUrl)!=null?t:"",instrumentName:this.name,reason:m});return}if(!this.accessToken)throw new Xe("[Fetch Pay Config] could not fetch pay configs since required accessToken is missing.");s={...await vo({configOptionsEndpoint:cp.OPTIMUS_CONFIG_REST_API_URL,checkoutUrl:(n=u==null?void 0:u.checkoutUrl)!=null?n:"",sourceId:(r=qr(u))!=null?r:"",accessToken:this.accessToken,instrument:this.name})}}s.placement=this.getPlacement();const l=this.extractSKUs(s);i&&l&&(i.skus=l),delete s.checkoutSupportsSplitCart,delete s.appId;const c=s;this.pciEnabled&&(c.onSendCheckoutAction=this.handleOnSendCheckoutAction),window.amazon.buywithprime.initCheckout({amazonPayOptions:c}),p.sheetClicked({instrument:this.name,result:"success",webPixelMetaData:i})}catch(s){i&&(i.skus=i.skus||[]),cp.EXPECTED_ERRORS.some(u=>s instanceof u)?p.sheetClicked({instrument:this.name,result:"rejected",reason:"expected_error",webPixelMetaData:i}):(p.sheetClicked({instrument:this.name,result:"failed",reason:"unhandled_error",webPixelMetaData:i}),p.log({body:"Unhandled error detected in Buy with Prime sheet clicked",attributes:{error:String(s),location:"handleClick"}}),w.notify(s));const{name:l}=s!=null?s:{name:"unknown"},{translate:c}=a;ee(c("error_dialogs.wallet.title",{wallet:c("brand.buy_with_prime")}),this.getModalContent(l,c))}finally{this.applyEnabledStyles(this.button)}}getModalContent(t,n){return t==="EmptyLineItemsWalletsPlatformConfigError"?n("error_dialogs.wallet.eligibility_error",{wallet:n("brand.buy_with_prime")}):n("error_dialogs.wallet.generic_error",{wallet:n("brand.buy_with_prime")})}extractSKUs(t){var n;return(n=t.createCheckoutSessionConfig)!=null&&n.payloadJSON?JSON.parse(t.createCheckoutSessionConfig.payloadJSON).cartDetails.lineItems.map(r=>r&&r.sku).filter(r=>r):[]}getPlacement(){return this.pageType&&xu[this.pageType]||"Other"}async render(){var t;const n=this.getOrCreateShadowRoot();this.button||(this.button=await this.createButton(),this.button.onclick=()=>this.handleClick(),this.button.classList.add("buy-with-prime-button"),this.getPlacement().includes("Checkout")||this.button.classList.add(xt.BUTTON),await this.initializeShadowStyles(n,Ou),n.appendChild(this.button),(t=this.onRendered)==null||t.call(this))}buildBwpEventData(t){const n={};return t.createCheckoutSessionConfig&&(n.skus=this.extractSKUs(t),n.apiClientId=this.apiClientId),n}async handleOnSendCheckoutAction(t){const{eventName:n,redirect:r,redirectUrl:a,requestPayload:o}=t;if(r&&a){this.dispatchWalletEvent({eventName:"wallet-redirect",detail:{redirectUrl:a,requestPayload:o}});return}switch(n){case"initCheckout":{const i=this.walletParams;this.dispatchWalletEvent({eventName:"wallet-clicked",detail:{bwpEventData:this.buildBwpEventData(i)}});break}case"initChange":this.dispatchWalletEvent({eventName:"wallet-clicked"});break;case"cancelCheckout":this.dispatchWalletEvent({eventName:"wallet-cancel"});break}}};d($t,"OPTIMUS_CONFIG_REST_API_URL","".concat(window.location.origin,"/wallets/config/optimus")),d($t,"EXPECTED_ERRORS",[dn,Xe,un]);let Dr=$t;async function Io({fn:e,maxRetries:t=3,delay:n=1e3,retryPolicyFn:r=()=>!0,onFinishedFn:a=()=>{}}){const o=()=>new Promise(l=>{setTimeout(l,n)});let i=0;const s=async()=>{try{return await e()}catch(l){if(i++,i<t&&r(l))return await o(),s();throw l}};try{return await s()}finally{a(i)}}async function Lu(e){return new Promise((t,n)=>{if(document.querySelector('script[src="'.concat(e,'"]'))&&window.amazon){t();return}const r=document.createElement("script");r.src=e,r.onload=()=>{window.amazon?t():n(new Error("Amazon SDK not present after loading"))},r.onerror=a=>{const o=a instanceof Event?a.type:String(a);n(new tt("Error loading Amazon SDK: ".concat(o)))},document.head.append(r)})}async function ko({sdkUrl:e=Hr,maxRetries:t=3}){return Io({fn:()=>Lu(e),maxRetries:t,delay:200,retryPolicyFn:()=>!0,onFinishedFn:n=>{p.amazonPaySDKLoadRetries({retries:n})}})}const Ht=class dp extends Ct{static walletName(){return"buy_with_prime"}constructor(t){super(t)}getWebComponentName(){return"shopify-buy-with-prime-button"}getInstrumentName(){return b.BuyWithPrime}getWebComponentClass(){return Dr}async loadWalletSDK(){await ko({sdkUrl:dp.SDK_URL,maxRetries:dp.MAX_RETRIES}),await this.loadLogos()}async loadLogos(){await Promise.all([this.loadPrimeLogo(),this.loadPrimeLogoDark()])}async loadPrimeLogo(){await te({svg:"prime-logo.svg",instrumentName:b.BuyWithPrime})}async loadPrimeLogoDark(){await te({svg:"prime-logo-dark.svg",instrumentName:b.BuyWithPrime,logoType:"DARK"})}};d(Ht,"MAX_RETRIES",3),d(Ht,"SDK_URL",Hr);let Or=Ht;const Mu="shopify-amazon-pay-button div[role=button][slot=amazon-pay-slot][data-testid=amazon-pay-button]{border-radius:0!important;width:100%!important}",zu=':host([page-type="cart_page"]) .accelerated-checkout-button{overflow:hidden;display:flex;justify-content:center}',Jn="amazon-pay-slot";var Ce,Se,Kt,Y,lt,kt;const Gt=class up extends At{constructor(){super(...arguments),d(this,"name",b.AmazonPay),d(this,"resizeObserver",null),j(this,Ce,0),j(this,Se,0),j(this,Kt,!1),j(this,Y,null),j(this,lt,null),j(this,kt,null),d(this,"sdkButton",null)}connectedCallback(){this.resizeObserver=Ot("ResizeObserver",()=>this.onResize()),this.cleanupOnFailure(this.render.bind(this),this.name)}async disconnectedCallback(){var t;this.innerHTML="",this.clearShadowRoot(),this.teardownAmazonButtonContainer(),(t=this.resizeObserver)==null||t.disconnect()}async handleClick(t){var n,r;const[a,o]=await Promise.all([this.i18n,this.dataSource]);try{const{cart:i,decelerationReason:s,customValidationError:l,unrecoverableError:c}=await Et({element:this,instrumentName:this.name,dataSource:o});if(c){p.sheetClicked({instrument:this.name,result:"rejected",reason:"unrecoverable_error"}),Mt(a,c);return}if(l){p.sheetClicked({instrument:this.name,result:"rejected",reason:"custom_validation_error"}),Lt(a,l.message);return}if(s){p.sheetClicked({instrument:this.name,result:"success",reason:"deceleration"}),U({checkoutUrl:(n=i==null?void 0:i.checkoutUrl)!=null?n:"",instrumentName:this.name,reason:s});return}const{totalAmount:{amount:u},checkoutUrl:m}=i;let h=this.walletParams;if(!h.createCheckoutSessionConfig){if(!this.accessToken)throw new Xe("[Fetch Pay Config] could not fetch pay configs since required accessToken is missing.");h={...await vo({configOptionsEndpoint:up.CV2_CONFIG_REST_API_URL,checkoutUrl:m,sourceId:(r=qr(i))!=null?r:"",accessToken:this.accessToken,instrument:this.name}),placement:this.pageType===N.ProductPage?"Product":"Cart"}}delete h.appId,t.initCheckout({...h,...Number(u)!==0&&{estimatedOrderAmount:{amount:u,currencyCode:this.buyerCurrency}}}),p.sheetClicked({instrument:this.name,result:"success"})}catch(i){up.EXPECTED_ERRORS.some(l=>i instanceof l)?p.sheetClicked({instrument:this.name,result:"rejected",reason:"expected_error"}):(p.sheetClicked({instrument:this.name,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in Amazon Pay sheet clicked",attributes:{error:String(i),location:"handleClick"}}),w.notify(i));const s=a.translate("brand.amazon_pay");it(s,a)}}createContainer({containerID:t,height:n}){const r=document.createElement("div");return r.id=t,r.style.display="flex",r.style.minWidth="140px",n!=null&&(r.style.height="".concat(n,"px")),r.slot=Jn,r.setAttribute("data-testid","amazon-pay-button"),r}async onResize(){const t=Ye(v(this,Y))||0,n=Ke(v(this,Y))||0,r=v(this,Ce)!==t||v(this,Se)!==n;!v(this,Kt)&&r&&(this.teardownAmazonButtonContainer(),await this.cleanupOnFailure(()=>this.renderFromAmazonSDK(),this.name))}async render(){var t;const n=this.getOrCreateShadowRoot();try{const r=document.createElement("slot");r.name=Jn;const a=document.createElement("style");a.textContent=Mu,this.appendChild(a),await this.initializeShadowStyles(n,zu);const o=await this.containerInstanceNumber;F(this,lt,"AcceleratedCheckoutAmazonPayButtonContainer".concat(this.pageType).concat(o)),F(this,Y,document.createElement("div")),v(this,Y).classList.add(xt.BUTTON),v(this,Y).appendChild(r),n.appendChild(v(this,Y)),(t=this.resizeObserver)==null||t.observe(v(this,Y)),await this.renderFromAmazonSDK()}catch(r){w.notify(r)}}async renderFromAmazonSDK(){var t;F(this,Kt,!0);const n=Ke(v(this,Y))||0;F(this,kt,this.createContainer({containerID:v(this,lt),height:n})),this.appendChild(v(this,kt));const r=Ye(v(this,Y))||0,a={buttonBorderRadius:"".concat(r,"px")};let o=!1;try{if(this.sdkButton=window.amazon.Pay.renderButton("#".concat(v(this,lt)),{...this.walletParams,style:a,placement:this.pageType===N.ProductPage?"Product":"Cart"}),this.sdkButton){const i=this.sdkButton;this.sdkButton.onClick(()=>this.handleClick(i))}else p.log({body:"Amazon Pay Button rendered null SDK button",attributes:{pageType:this.pageType,containerID:v(this,lt)}});F(this,Se,n),F(this,Ce,r),p.renderSucceeded(this.name),o=!0}catch(i){p.renderFailed(this.name);const s="Amazon Pay Button not able to render into container #".concat(v(this,lt),".");console.error(s),p.log({body:s,attributes:{pageType:this.pageType,containerID:v(this,lt),error:i==null?void 0:i.toString()}})}finally{F(this,Kt,!1)}o&&((t=this.onRendered)==null||t.call(this))}teardownAmazonButtonContainer(){var t;(t=v(this,kt))==null||t.remove(),F(this,kt,null)}};Ce=new WeakMap,Se=new WeakMap,Kt=new WeakMap,Y=new WeakMap,lt=new WeakMap,kt=new WeakMap,d(Gt,"CV2_CONFIG_REST_API_URL","".concat(window.location.origin,"/wallets/config/amazon_pay")),d(Gt,"EXPECTED_ERRORS",[dn,Xe,un]);let xr=Gt;const Vt=class hp extends Ct{static walletName(){return"amazon_pay"}constructor(t){super(t)}getWebComponentName(){return"shopify-amazon-pay-button"}getInstrumentName(){return b.AmazonPay}getWebComponentClass(){return xr}async loadWalletSDK(){await ko({sdkUrl:hp.SDK_URL,maxRetries:hp.MAX_RETRIES})}getLoadEligibility(t){return t.getRootNode()instanceof ShadowRoot?{eligible:!1,reason:"Cannot load Amazon Pay within Shadow DOM"}:{eligible:!0}}};d(Vt,"MAX_RETRIES",3),d(Vt,"SDK_URL",Hr);let Lr=Vt;var _r={Purple:{D50:"#4524DB",P40:"#5433EB"},Grayscale:{L0:"#FFFFFF"}},Uu={16:16},Xn="gravity-font-faces",Bu="\n@font-face {\n  font-family: 'GTStandard-M';\n  src: url('https://cdn.shopify.com/shop-assets/static_uploads/shoplift/GTStandard-MRegular.woff2')\n    format('woff2');\n  font-style: normal;\n  font-weight: 450;\n  font-display: fallback;\n}\n\n@font-face {\n  font-family: 'GTStandard-M';\n  src: url('https://cdn.shopify.com/shop-assets/static_uploads/shoplift/GTStandard-MMedium.woff2')\n    format('woff2');\n  font-style: normal;\n  font-weight: 500;\n  font-display: fallback;\n}\n\n@font-face {\n  font-family: 'GTStandard-M';\n  src: url('https://cdn.shopify.com/shop-assets/static_uploads/shoplift/GTStandard-MSemibold.woff2')\n    format('woff2');\n  font-style: normal;\n  font-weight: 600;\n  font-display: fallback;\n}",Fu=class extends HTMLElement{static get observedAttributes(){return["disabled"]}connectedCallback(){this._loadFonts(),this._updateButton()}attributeChangedCallback(){this._updateButton()}_loadFonts(){if(document.querySelector('style[data-description="'.concat(Xn,'"], style[data-description="shop-js-font-faces"]')))return;let e=document.createElement("style");e.dataset.description=Xn,e.appendChild(document.createTextNode(Bu)),document.head.appendChild(e)}_updateButton(){var e;let t=this._getOrCreateShadowRoot();t.innerHTML=Hu,this.hasAttribute("disabled")&&((e=t.querySelector("button"))==null||e.setAttribute("disabled",""))}_getOrCreateShadowRoot(){return this.shadowRoot||this.attachShadow({mode:"open"}),this.shadowRoot}};function $u(){window.customElements&&(customElements.get("gravity-button")||customElements.define("gravity-button",Fu))}var Hu="\n<style>\n  * {\n    box-sizing: border-box;\n    border-width: 0;\n    border-style: solid;\n    border-color: currentColor;\n    --focused-box-shadow: 0 0 0 3px #DBD1FF, 0 0 #0000;\n  }\n\n  button {\n    text-transform: none;\n    -webkit-appearance: button;\n    background-color: transparent;\n    background-image: none;\n    font-family: GTStandard-M;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    font-size: 100%;\n    font-weight: inherit;\n    line-height: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n    margin: 0;\n    padding: 0;\n    cursor: pointer;\n  }\n\n  button:disabled {\n    cursor: default;\n    opacity: 0.5;\n  }\n\n  .gravity-button {\n    position: relative;\n    display: flex;\n    min-height: var(--gravity-button-min-height);\n    height: var(--gravity-button-height);\n    width: var(--gravity-button-width, 260px);\n    justify-content: center;\n    color: ".concat(_r.Grayscale.L0,";\n    align-items: center;\n    overflow: visible;\n    padding: var(--gravity-button-padding, ").concat(Uu[16],"px 10px);\n    border-radius: var(--gravity-button-border-radius);\n    border: none;\n    background-color: ").concat(_r.Purple.P40,";\n    transition: all;\n  }\n\n  .gravity-button:not([disabled]):focus-visible {\n    box-shadow: var(--focused-base-box-shadow, var(--focused-box-shadow));\n    outline: var(--focused-base-outline, 2px solid transparent);\n    outline-offset: var(--focused-base-outline-offset, 2px);\n  }\n\n  .gravity-button:not([disabled]):hover {\n    background-color: ").concat(_r.Purple.D50,';\n  }\n</style>\n\n<button class="gravity-button">\n  <slot id="button-content"></slot>\n</button>\n');const Gu=".button-content{display:flex;align-items:center;justify-content:center;width:100%;height:100%;gap:3px;white-space:nowrap;container-type:inline-size;container-name:bc}.button-content>span{font-size:16px}.ShopPromise>.separator{margin:0 8px}@container bc (width <= 300px){.ShopPromise{display:none!important}}gravity-button{display:block}shop-pay-iframe-content{height:100%}.credit-card-iframe-container{position:relative;height:100%;left:0;width:0px;transition:width .35s cubic-bezier(.33,0,0,1) .2s;visibility:hidden;opacity:0}shop-pay-iframe-content,.credit-card-iframe-container>iframe.credit-card-iframe{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.credit-card-iframe-visible{width:72px;opacity:1;visibility:visible}.credit-card-iframe{position:absolute;top:0;left:0;object-position:left top;object-fit:none;height:100%;width:80px}",Vu='.accelerated-checkout-button{height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);min-height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}:host([page-type="cart_page"]){display:block;height:100%}:host([page-type="cart_page"]) .accelerated-checkout-button{height:100%;min-height:0;width:100%;border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}:host([page-type="product"]) .accelerated-checkout-button{min-width:150px}@media (forced-colors: active){.accelerated-checkout-button{border:1px solid transparent!important}:host([page-type="cart_page"]) .accelerated-checkout-button{border:1px solid transparent!important}}.accelerated-checkout-button{--gravity-button-height: clamp(25px, var(--shopify-accelerated-checkout-button-block-size, 44px), 55px);--gravity-button-min-height: clamp(25px, var(--shopify-accelerated-checkout-button-block-size, 44px), 55px);--gravity-button-border-radius: var(--shopify-accelerated-checkout-button-border-radius, 0px);--gravity-button-padding: 0px 10px;--gravity-button-width: 100%}:host([page-type="cart_page"]) .accelerated-checkout-button{--gravity-button-height: 100%;--gravity-button-min-height: 100%;--gravity-button-border-radius: var(--shopify-accelerated-checkout-button-border-radius, 4px);--gravity-button-width: 100%}';class To extends Error{constructor(){const t="DeliveryEstimatesResponseIsNullError";super("deliveryEstimates is null or undefined"),this.name=t}}class Er extends Error{constructor(){const t="DeliveryPromiseAPIClientError";super("window.Shopify.ShopPromise.deliveryPromiseAPIClient is undefined"),this.name=t}}const ju=15,qu=200;class Wu{constructor(t){d(this,"storefrontAPIToken"),this.storefrontAPIToken=t}async fetchDeliveryPromise({variant:t,postalCode:n,defaultPostalCode:r,sellingPlanId:a}){const o=await Io({fn:async()=>this.fetchDeliveryOptions(t,n,r,a),maxRetries:ju,delay:qu,retryPolicyFn:i=>i instanceof Er}).catch(i=>{if(i instanceof Er)throw i;return null});if(!o)throw new To;return o}async fetchDeliveryOptions(t,n,r,a){var o,i;const s={variantId:t,sellingPlanId:a,postalCode:n||r,isPostalCodeOverride:!!n},l=(i=(o=window==null?void 0:window.Shopify)==null?void 0:o.ShopPromise)==null?void 0:i.deliveryPromiseAPIClient;if(!l)throw new Er;return l(s,this.storefrontAPIToken)}}function Yu(e,t){switch(e){case 0:return(t==null?void 0:t.translate("shop_promise_delivery.same_day"))||null;case 1:return(t==null?void 0:t.translate("shop_promise_delivery.next_day"))||null;case 2:return(t==null?void 0:t.translate("shop_promise_delivery.two_day"))||null;default:return null}}const Ku="delivery_promise_default_address",Qu="delivery_promise_postal_code";class Ju extends Te{constructor(){super(...arguments),d(this,"lastFetchedProductVariantId"),d(this,"lastFetchSellingPlan"),d(this,"fetching",!1),d(this,"i18n",null),d(this,"daysToDelivery"),d(this,"formObserver",null)}async connectedCallback(){this.formObserver=new an(this,({variantId:t,sellingPlanId:n})=>{this.fetchDeliveryPromise(t,n)}),this.formObserver.setupMutationObservers()}setTranslations(t){this.i18n=t,this.render()}get postalCode(){try{return JSON.parse(be(Qu)||"null")||null}catch(t){return null}}get defaultDeliveryAddress(){try{return JSON.parse(be(Ku)||"null")}catch(t){return null}}async fetchDeliveryPromise(t,n){var r,a,o,i;if(!(!t||!this.accessToken)&&!(t===this.lastFetchedProductVariantId&&n===this.lastFetchSellingPlan))try{this.lastFetchedProductVariantId=t,this.lastFetchSellingPlan=n;const s=((r=this.defaultDeliveryAddress)==null?void 0:r.zip)||"",l=await new Wu(this.accessToken).fetchDeliveryPromise({variant:t,postalCode:this.postalCode||"",defaultPostalCode:s,sellingPlanId:n||""}),c=ja(this),u=(o=(a=l==null?void 0:l.selectedShippingOption)==null?void 0:a.brandedPromise)==null?void 0:o.handle;if((c==null?void 0:c.sellingPlanId)!==n||(c==null?void 0:c.variantId)!==t||u!=="shop_promise")return;this.daysToDelivery=(i=l==null?void 0:l.selectedShippingOption)==null?void 0:i.maxCalendarDaysToDelivery,this.render()}catch(s){s instanceof To&&(this.daysToDelivery=null)}}render(){const t=Yu(this.daysToDelivery,this.i18n);this.classList.add("ShopPromise"),this.innerHTML=t?'<span class="separator">|</span><span>'.concat(t,"</span>"):""}}function Xu({flow:e="default"}){const t=new URLSearchParams({target_origin:window.location.origin,flow:e});return"".concat(window.location.origin,"/services/login_with_shop/authorize?").concat(t.toString())}function Zu(e,t,n){const r=n!=null?n:window.location.origin;if(e.origin!==r||!t)return!1;try{return e.source===t.contentWindow}catch(a){return!1}}const fe=class pp extends Te{constructor(){super(...arguments),d(this,"_userRecognized"),d(this,"iframe",null),d(this,"iframeContainer",null),d(this,"iframeCreationStart",null),d(this,"iframeOrigin",null),d(this,"shopLogo",null),d(this,"iframeState","hidden"),d(this,"impressionTracked",!1),d(this,"pendingAnimation",!1),d(this,"handleMessage",t=>{var n;if(Zu(t,this.iframe,t.origin)&&((n=t.data)==null?void 0:n.type)==="loaded"&&(this.iframeOrigin!==t.origin&&(this.iframeOrigin=t.origin),t.data.type==="loaded")){const r=t.data.recognized===!0;if(this._userRecognized=r,this.iframeCreationStart){const a=ot()-this.iframeCreationStart,o={instrument:b.ShopPay,pageType:jr()};I.histogram({name:T.ShopPayPersonalizedIframeLoadTime,value:a,attributes:o,unit:"ms"}),I.histogram({name:T.ShopPayPersonalizedIframeLoadTimeFromPageLoad,value:window.performance.now(),attributes:o,unit:"ms"})}if(r){this.handleRecognizedUser();return}this.handleUnrecognizedUser()}})}get userRecognized(){return this._userRecognized}async createIframe(){if(this.iframeContainer)return this.iframeContainer;const t=ot();return this.iframeCreationStart=t,this.iframeContainer=document.createElement("div"),this.iframeContainer.classList.add("credit-card-iframe-container"),this.iframeContainer.setAttribute("data-test-id","shop-pay-iframe-container"),this.iframe=document.createElement("iframe"),this.iframe.src=Xu({flow:"shop_pay_button"}),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("frameborder","no"),this.iframe.setAttribute("loading","lazy"),this.iframe.setAttribute("allowtransparency","true"),this.iframe.setAttribute("allowfullscreen","false"),this.iframe.classList.add("credit-card-iframe"),this.iframeContainer.appendChild(this.iframe),this.iframeContainer}async connectedCallback(){if(pp.iframeCreated)return;if(this.querySelector(".credit-card-iframe-container")){w.notify(new Error("[ShopPayPersonalizedIframe] Multiple iframe containers found"));return}pp.iframeCreated=!0;const t=await this.createIframe();this.appendChild(t),this.setupMessageListener()}disconnectedCallback(){this.cleanup()}setShopLogo(t){this.shopLogo=t}setDisabled(t){this.disabled=t,t&&this.iframeState!=="personalized"&&this.hideIframe()}hasPersonalizationOccurred(){return this.iframeState==="personalized"}triggerAnimation(t){const n=this.style.display!=="none";if(!(this.disabled||this.iframeState==="personalized"||!n)){if(this.iframeState==="loaded"){this.trackButtonImpression();return}if(this.iframeState==="ready"){this.showIframe(t);return}this.pendingAnimation=!0}}stopPendingAnimation(){this.pendingAnimation=!1}resetToOriginalState(){var t;this.iframeState="hidden",this.pendingAnimation=!1,(t=this.iframeContainer)==null||t.classList.remove("credit-card-iframe-visible")}trackButtonImpression(){this.impressionTracked||(V({event:H.ShopPayButtonInView,instrumentId:b.ShopPay,eventSubtype:this.userRecognized?"personalized":"not_personalized"}),this.impressionTracked=!0)}setupMessageListener(){window.addEventListener("message",this.handleMessage)}handleRecognizedUser(){const t=this.iframeState==="hidden";t&&(this.iframeState="ready"),this.style.display!=="none"&&t&&!this.disabled&&this.pendingAnimation&&(this.pendingAnimation=!1,this.showIframe())}handleUnrecognizedUser(){this.iframeState="loaded",this.pendingAnimation&&this.trackButtonImpression(),this.cleanup()}animateIn(){this.disabled||!this.iframeContainer||this.iframeState!=="ready"||!this.shopLogo||(this.iframeContainer.classList.add("credit-card-iframe-visible"),this.sendMessageToIframe(),this.iframeState="personalized")}showIframe(t){if(this.trackButtonImpression(),!t){this.animateIn();return}const n=setTimeout(()=>{this.animateIn()},500);return()=>clearTimeout(n)}hideIframe(){var t;this.iframeState!=="hidden"&&this.iframeState!=="personalized"&&(this.iframeState="hidden",(t=this.iframeContainer)==null||t.classList.remove("credit-card-iframe-visible"))}cleanup(){var t;window.removeEventListener("message",this.handleMessage),(t=this.iframeContainer)==null||t.remove(),this.iframeContainer=null,this.iframe=null,this.iframeOrigin=null,this.shopLogo=null}sendMessageToIframe(){var t;if(!((t=this.iframe)!=null&&t.contentWindow)||!this.iframeOrigin)return;const n={timestamp:ot(),type:"animate-in"};this.iframe.contentWindow.postMessage(n,this.iframeOrigin)}};d(fe,"iframeCreated",!1);let Mr=fe;function th(e){const t=e.querySelector(".button-content span");if(!t)return 0;const n=window.getComputedStyle(t);return parseFloat(n.fontSize)}function Zn(){const e=window.TPOConfigs,t=window.optionizeSettings;return!!(e||t)}const xe=220;class eh{constructor({element:t,isCTA:n,onFormStateChange:r,personalized:a,shopPromiseEligible:o,shopPromiseProductPageContent:i}){d(this,"cachedFontSize",null),d(this,"cachedWidth",0),d(this,"element"),d(this,"formObserver",null),d(this,"formState",{disabled:!1,variantId:void 0}),d(this,"initialWidth",null),d(this,"isCTA"),d(this,"lockedNonPersonalized",!1),d(this,"onFormStateChange"),d(this,"pendingFormStateUpdate",null),d(this,"personalized"),d(this,"resizeObserver",null),d(this,"shopPromiseEligible"),d(this,"shopPromiseProductPageContent");var s;this.element=t,this.isCTA=n,this.onFormStateChange=r,this.personalized=a,this.shopPromiseEligible=o,this.shopPromiseProductPageContent=i,this.personalized&&(Zn()||(this.formObserver=new an(this.element,({disabled:l,variantId:c})=>{this.formState={disabled:l,variantId:c},this.scheduleFormStateChange()}),this.formObserver.setupMutationObservers(),this.resizeObserver=Ot("ResizeObserver",l=>this.handleResize(l)),(s=this.resizeObserver)==null||s.observe(this.element)))}cleanup(){var t,n,r;(n=(t=this.formObserver)==null?void 0:t.addToCartMutationObserver)==null||n.disconnect(),(r=this.resizeObserver)==null||r.disconnect(),this.pendingFormStateUpdate!==null&&(cancelAnimationFrame(this.pendingFormStateUpdate),this.pendingFormStateUpdate=null)}shouldRender(){if(!this.personalized||Zn())return!1;const t=this.cachedWidth;if(this.lockedNonPersonalized)return!1;const n=this.shopPromiseEligible&&this.shopPromiseProductPageContent,r=this.formState.disabled&&this.formState.variantId!==void 0;if(n||r||t<xe)return!1;if(this.isCTA){const a=this.getFontSizeCached();if(a<10||a>18)return!1}return!0}getFontSizeCached(){return this.cachedFontSize!==null?this.cachedFontSize:(this.cachedFontSize=th(this.element),this.cachedFontSize)}scheduleFormStateChange(){this.pendingFormStateUpdate===null&&(this.pendingFormStateUpdate=requestAnimationFrame(()=>{var t;this.pendingFormStateUpdate=null,(t=this.onFormStateChange)==null||t.call(this)}))}get locked(){return this.lockedNonPersonalized}get soldOut(){return this.formState.disabled&&this.formState.variantId!==void 0}handleResize(t){var n,r;const a=(r=(n=t[0])==null?void 0:n.contentRect.width)!=null?r:0;if(this.cachedWidth=a,this.initialWidth===null&&a>0){this.initialWidth=a,this.initialWidth<xe&&(this.lockedNonPersonalized=!0),this.scheduleFormStateChange();return}if(this.initialWidth!==null&&this.initialWidth>=xe&&a>0&&a<xe&&!this.lockedNonPersonalized){this.lockedNonPersonalized=!0,this.scheduleFormStateChange();return}this.scheduleFormStateChange()}}class rh extends At{constructor(){super(...arguments),d(this,"name",b.ShopPay),d(this,"button",null),d(this,"shopPromiseProductPageContent",null),d(this,"shopPromiseEligible",!1),d(this,"shopLogo",null),d(this,"buttonContentDiv",null),d(this,"iframeContent",null),d(this,"iframeRenderEligibility",null),d(this,"intersectionObserver",null),d(this,"inView",!1),d(this,"impressionTracked",!1)}static get observedAttributes(){return["disabled"]}connectedCallback(){this.shopPromiseEligible=Ma(),this.setupIntersectionObserver(),this.cleanupOnFailure(async()=>{$u(),await this.render()},this.name)}disconnectedCallback(){var t,n;(t=this.intersectionObserver)==null||t.disconnect(),this.intersectionObserver=null,(n=this.iframeRenderEligibility)==null||n.cleanup(),this.iframeRenderEligibility=null}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button),t==="disabled"&&this.onDisabledChanged(r)}setupIntersectionObserver(){var t,n;if("IntersectionObserver"in window){const r=((n=(t=this.button)==null?void 0:t.offsetHeight)!=null?n:46)*-1;this.intersectionObserver=new IntersectionObserver(a=>{a.forEach(o=>{var i;o.isIntersecting&&!this.inView&&(this.inView=!0,this.onButtonInView(!0),(i=this.intersectionObserver)==null||i.unobserve(this))})},{threshold:.1,rootMargin:"".concat(r,"px")}),this.intersectionObserver.observe(this)}else this.inView=!0,this.onButtonInView()}onButtonInView(t){var n;const r=(n=this.iframeRenderEligibility)==null?void 0:n.shouldRender();if(r&&this.iframeContent){this.iframeContent.triggerAnimation(t);return}if(r){this.createAndAttachIframe();return}this.impressionTracked||(V({event:H.ShopPayButtonInView,instrumentId:b.ShopPay,eventSubtype:"not_personalized"}),this.impressionTracked=!0)}onDisabledChanged(t){var n;(n=this.iframeContent)==null||n.setDisabled(t!==null)}async addButtonContent(){if(!this.button)return;let t;const n=await this.i18n,r=Ee({instrumentName:b.ShopPay}),a=new DOMParser().parseFromString(r,"image/svg+xml").documentElement;this.shopLogo=a,this.isCTA?t=sn({translate:n.translate,logoElement:a,setAriaHidden:!1}):(t=document.createElement("div"),t.appendChild(a)),t.classList.add("button-content"),this.shopPromiseEligible&&!this.shopPromiseProductPageContent&&(this.shopPromiseProductPageContent=document.createElement("shop-promise-product-page-content"),this.shopPromiseProductPageContent.setTranslations(n),this.shopPromiseProductPageContent.setAttribute("access-token",this.accessToken||""),t.appendChild(this.shopPromiseProductPageContent));const o=this.getAttribute("personalized")==="true",i=()=>{const s=this.iframeContent,l=this.iframeRenderEligibility,c=(l==null?void 0:l.shouldRender())||!1;if(!s){c&&this.createAndAttachIframe();return}if(!c){if(s.hasPersonalizationOccurred()&&l!=null&&l.soldOut&&!(l!=null&&l.locked)){s.style.display="";return}s.style.display="none",l!=null&&l.locked?s.resetToOriginalState():s.stopPendingAnimation();return}s.style.display="",this.inView&&s.triggerAnimation()};this.iframeRenderEligibility=new eh({element:this.button,isCTA:this.isCTA,onFormStateChange:i,personalized:o,shopPromiseEligible:this.shopPromiseEligible,shopPromiseProductPageContent:this.shopPromiseProductPageContent}),this.buttonContentDiv=t,this.button.appendChild(t)}createAndAttachIframe(){!this.buttonContentDiv||this.iframeContent||(this.iframeContent=document.createElement("shop-pay-iframe-content"),this.iframeContent.setShopLogo(this.shopLogo),this.iframeContent.setDisabled(this.disabled),this.shopLogo.insertAdjacentElement("afterend",this.iframeContent),this.inView&&this.iframeContent.triggerAnimation())}handleIframeRenderLogic(){if(!this.iframeRenderEligibility)return;const t=this.iframeRenderEligibility.shouldRender();if(!this.iframeContent&&t){this.createAndAttachIframe();return}this.iframeContent&&(this.iframeContent.style.display=t?"":"none",t&&this.inView?this.iframeContent.triggerAnimation():t||this.iframeContent.stopPendingAnimation())}getShopPayBehavior(){return this.pageType===N.ProductPage?"force_shop_pay_product":this.pageType===N.CartPage?"force_shop_pay_cart":"force_shop_pay"}async handleClick(t){var n,r;if(t.preventDefault(),this.disabled||!this.button||this.button.getAttribute("disabled"))return;this.disabled=!0;const[a,o]=await Promise.all([this.i18n,this.dataSource]);try{const{decelerationReason:i,cart:s,customValidationError:l,unrecoverableError:c}=await Et({element:this,instrumentName:b.ShopPay,dataSource:o});if(c){p.sheetClicked({instrument:this.name,result:"rejected",reason:"unrecoverable_error"}),p.log({body:"Unrecoverable error detected in Shop Pay Button click",attributes:{pageType:this.pageType,error:c}}),Mt(a,c);return}if(l){p.log({body:"Custom validation error detected in Shop Pay Button click",attributes:{pageType:this.pageType,errorCode:l.code,errorMessage:l.message}}),p.sheetClicked({instrument:this.name,result:"rejected",reason:"custom_validation_error"}),Lt(a,l.message);return}if(i){p.sheetClicked({instrument:this.name,result:"success",reason:"deceleration"}),U({checkoutUrl:(n=s==null?void 0:s.checkoutUrl)!=null?n:"",instrumentName:this.name,reason:i});return}p.sheetClicked({instrument:this.name,result:"success"}),wt((r=s==null?void 0:s.checkoutUrl)!=null?r:"",this.getShopPayBehavior())}catch(i){w.notify(new nh("An error occurred when attempting to create a cart using the Shop Pay Button. Details: ".concat(i),{cause:i})),p.sheetClicked({instrument:this.name,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in Shop Pay sheet clicked",attributes:{error:String(i),location:"handleClick"}}),Nt(a)}}async render(){const t=this.getOrCreateShadowRoot();if(t.innerHTML)return;this.button||(this.button=document.createElement("gravity-button"));const n=document.createElement("style");n.innerHTML=[Vu,Gu].join("\n"),t.appendChild(n),await this.addButtonContent(),this.disabled&&this.button.setAttribute("disabled",""),this.button.classList.add(xt.BUTTON),this.button.onclick=r=>this.handleClick(r),t.appendChild(this.button),this.ensureLightDOMIsNotEmpty(),this.handleIframeRenderLogic(),this.onRendered()}}ct("shop-promise-product-page-content",Ju),ct("shop-pay-iframe-content",Mr);class nh extends Error{constructor(){super(...arguments),d(this,"name","ShopPayButtonError")}}var ah=Object.defineProperty,oh=Object.getOwnPropertyDescriptor,ih=(e,t,n,r)=>{for(var a=oh(t,n),o=e.length-1,i;o>=0;o--)(i=e[o])&&(a=i(t,n,a)||a);return a&&ah(t,n,a),a};class No extends Ct{static walletName(){return"shop_pay"}constructor(t){super(t)}getWebComponentName(){return"shop-pay-wallet-button"}getWebComponentClass(){return rh}getInstrumentName(){return b.ShopPay}async createWebComponent(t){var n;const r=await super.createWebComponent(t);return(n=this.walletParams)!=null&&n.personalized&&r.setAttribute("personalized","true"),r}async loadWalletSDK(){await this.loadLogo()}getLoadEligibility(){return{eligible:!0}}async loadLogo(){await te({svg:"shop-logo.svg",instrumentName:b.ShopPay})}}ih([ln("Shop Pay")],No.prototype,"getLoadEligibility");const sh=".button{display:flex;justify-content:center;align-items:center;width:100%;border:none}.button:hover:not(:disabled){filter:brightness(92%);cursor:pointer}.button:disabled{opacity:.5;cursor:not-allowed}.button:focus-visible{box-shadow:inset 0 0 0 2px #1773b0,inset 0 0 0 3px #f8f8f8!important;outline:none}.logo-only>svg{width:50px}.dark{background:#000;color:#fff}.light{background:#fff;color:#000;outline:1px solid #3c4043}@media (forced-colors: active){.light{outline:none}}@media (prefers-contrast: high),(forced-colors: active){.button:focus-visible{outline:.2rem solid;outline-offset:.1rem}}.content{display:flex;justify-content:center;align-items:center;white-space:pre}";function Ar({cart:e,i18n:t}){var n,r,a,o;const i=lo(e),s={label:t.translate("order_summary.subtotal"),type:"SUBTOTAL",price:yt(i.amount)},l=io({deliveryGroups:e.deliveryGroups,i18n:t}).map(y=>lh({lineItem:y,type:"LINE_ITEM"})),c=ch(e,t),u=za(e.lineItems,(y,f)=>({label:y,type:"LINE_ITEM",price:f})),m=[...G.enabled(Ha)?u:[],s,...l,...c];if(e.totalDutyAmount){const y={label:t.translate("order_summary.duties"),type:"LINE_ITEM",price:yt(e.totalDutyAmount.amount)};m.push(y)}if(e.totalTaxAmount){const y={label:t.translate("order_summary.taxes"),type:"TAX",price:yt(e.totalTaxAmount.amount)};m.push(y)}let h;try{const y=(o=(a=(r=(n=window.ShopifyAnalytics)==null?void 0:n.lib)==null?void 0:r.trekkie)==null?void 0:a.defaultAttributes)==null?void 0:o.microSessionId;h=y?"pw-".concat(y):void 0}catch(y){}const g={totalPrice:e.totalAmount.amount,currencyCode:e.totalAmount.currencyCode,totalPriceStatus:"ESTIMATED",totalPriceLabel:t.translate("order_summary.total"),displayItems:m};return h&&(g.transactionId=h),g}function lh({lineItem:e,type:t,status:n="FINAL"}){return{label:e.label,type:t,price:e.amount,status:n}}function ch(e,t){return[...e.lineItems.flatMap(n=>n.discountAllocations),...e.discountAllocations].flatMap(n=>{var r;const a=(r=n.title)!=null?r:n.code;return{label:a!=null?a:t.translate("order_summary.discount"),type:"LINE_ITEM",price:"-".concat(yt(Number(n.discountedAmount.amount)))}})}const Ro=["PAYMENT_AUTHORIZATION"],dh=Ro.concat(["SHIPPING_ADDRESS","SHIPPING_OPTION"]),uh=["PAN_ONLY"];function hh({walletParams:e,isShippingRequired:t,hasSellingPlan:n,i18n:r,buyerCurrency:a,authJwt:o}){var i,s,l,c;let u;try{const g=(c=(l=(s=(i=window.ShopifyAnalytics)==null?void 0:i.lib)==null?void 0:s.trekkie)==null?void 0:l.defaultAttributes)==null?void 0:c.microSessionId;u=g?"pw-".concat(g):void 0}catch(g){}const m={totalPrice:"0.01",currencyCode:a,totalPriceStatus:"ESTIMATED",totalPriceLabel:r.translate("order_summary.total"),displayItems:[{label:r.translate("order_summary.subtotal"),type:"SUBTOTAL",price:"0.01"}]};u&&(m.transactionId=u);const h={...e.paymentData,shippingAddressRequired:t,shippingOptionRequired:t,transactionInfo:m};return h.merchantInfo.authJwt=o,t||delete h.shippingAddressParameters,h.callbackIntents=t?dh:Ro,n&&ph(h),h}function ph(e){e.allowedPaymentMethods.forEach(t=>{t.parameters.allowedAuthMethods=t.parameters.allowedAuthMethods.filter(n=>uh.includes(n))})}class mh extends so{constructor(t){super(),d(this,"brandName"),d(this,"completionResult"),this.i18n=t,this.brandName=this.i18n.translate("brand.google_pay"),this.completionResult=void 0}mapMutationResultToPaymentSheetAction({result:t,checkoutUrl:n,requestType:r}){const a=this.mapCustomValidationFunctionErrorToAction(t.errors);if(a)return a;const o=this.getErrorActions({checkoutUrl:n,requestType:r}),i=t.errors,s=this.getUnhandledErrors(i,o);s.forEach(c=>{w.notify(new Qe("[".concat(b.GooglePay,"] mutation result error not handled: ").concat(gt(c)),{groupingHash:"UnhandledActionError:".concat(b.GooglePay,":").concat(gt(c))}))});const{firstPaymentSheetAction:l}=this.getMergedPaymentSheetAction({result:t,errorActions:o});return l||(s.length>0?{action:"abort"}:{action:"update",errors:[]})}mapCompletionResultToPaymentSheetAction({result:t,checkoutUrl:n,requestType:r}){if(!t.data)throw new Na(b.GooglePay);switch(this.completionResult=t,t.data.__typename){case"SubmitSuccess":return{action:"complete",redirectUrl:t.data.redirectUrl};case"SubmitAlreadyAccepted":case"SubmitThrottled":case"SubmitFailed":{const a=this.mapCustomValidationFunctionErrorToAction(t.errors);if(a)return a;const o=this.getErrorActions({checkoutUrl:n,requestType:r}),i=t.errors;this.getUnhandledErrors(i,o).forEach(l=>{w.notify(new Qe("[".concat(b.GooglePay,"] completion result error not handled: ").concat(gt(l)),{groupingHash:"UnhandledActionError:".concat(b.GooglePay,":").concat(gt(l))}))});const{prioritizedPaymentSheetAction:s}=this.getMergedPaymentSheetAction({result:t,errorActions:o});return s||(it(this.brandName,this.i18n),{action:"abort"})}default:throw new Error("[".concat(b.GooglePay,"] unknown completion result type: ").concat(t.data.__typename))}}getErrorActions({checkoutUrl:t,requestType:n}){return[{matchers:[Be],generateAction:()=>this.decelerateOrAbort({reason:"captcha_required",instrumentName:b.GooglePay,errorOrWarning:Be.code,checkoutUrl:t,requestType:n})},{matchers:[$e],generateAction:()=>this.decelerateOrAbort({reason:"invalid_language",instrumentName:b.GooglePay,errorOrWarning:$e.code,checkoutUrl:t,requestType:n})},{matchers:[He],generateAction:()=>this.decelerateOrAbort({reason:"invalid_country",instrumentName:b.GooglePay,errorOrWarning:He.code,checkoutUrl:t,requestType:n})},{matchers:[Ge],generateAction:()=>this.decelerateOrAbort({reason:"missing_cart_id",instrumentName:b.GooglePay,errorOrWarning:Ge.code,checkoutUrl:t,requestType:n})},{matchers:[je],generateAction:()=>this.decelerateOrAbort({reason:"redirect_to_checkout_required",instrumentName:b.GooglePay,errorOrWarning:je.code,checkoutUrl:t,requestType:n})},{matchers:Xr,generateAction:()=>this.decelerateOrAbort({reason:"dynamic_tax",instrumentName:b.GooglePay,errorOrWarning:"TAX_NEW_TAX_MUST_BE_ACCEPTED",checkoutUrl:t,requestType:n})},{matchers:[Ve],generateAction:()=>this.decelerateOrAbort({reason:"unsupported_google_pay_payment_method",instrumentName:b.GooglePay,errorOrWarning:Ve.code,checkoutUrl:t,requestType:n})},{matchers:Jr,generateAction:()=>this.decelerateOrAbort({reason:"invalid_payment_amount",instrumentName:b.GooglePay,errorOrWarning:"INVALID_PAYMENT",checkoutUrl:t,requestType:n})},{matchers:ic,generateAction:()=>({action:"abort",effects:[()=>it(this.brandName,this.i18n)]})},{matchers:Zr,generateAction:()=>({action:"abort",effects:[()=>bt(this.i18n)]})},{matchers:Ja,generateAction:()=>this.decelerateOrAbort({reason:"not_enough_stock",instrumentName:b.GooglePay,errorOrWarning:"MERCHANDISE_NOT_ENOUGH_STOCK",checkoutUrl:t,requestType:n})},{matchers:Qa,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_UNSERVICEABLE",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.shipping_address")}]})},{matchers:_.invalid.postalCode,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.postal_code")}]})},{matchers:[fc],generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_OPTION_INVALID",intent:"SHIPPING_OPTION",message:this.i18n.translate("errors.missing.shipping_option")}]})},{matchers:we.invalid,generateAction:()=>({action:"show_error",errors:[{reason:"OTHER_ERROR",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.email")}]})},{matchers:we.required,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.email")}]})},{matchers:_.required.address2,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.address2")}]})},{matchers:_.invalid.address2,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.address2")}]})},{matchers:_.required.city,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.city")}]})},{matchers:_.invalid.city,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.city")}]})},{matchers:_.required.province,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.zone")}]})},{matchers:_.invalid.province,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.zone")}]})},{matchers:_.required.postalCode,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.postal_code")}]})},{matchers:_.invalid.postalCode,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.postal_code")}]})},{matchers:_.required.phoneNumber,generateAction:()=>({action:"show_error",errors:[{reason:"OTHER_ERROR",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.phone_number")}]})},{matchers:_.invalid.phoneNumber,generateAction:()=>({action:"show_error",errors:[{reason:"OTHER_ERROR",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.phone_number")}]})},{matchers:_.invalid.country,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.country")}]})},{matchers:_.required.firstName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.first_name")}]})},{matchers:_.invalid.firstName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.first_name")}]})},{matchers:_.required.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.last_name")}]})},{matchers:_.invalid.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.last_name")}]})},{matchers:_.required.address1,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.missing.address1")}]})},{matchers:_.invalid.address1,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.invalid.address1")}]})},{matchers:_.emojis.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.last_name")}]})},{matchers:_.emojis.city,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.city")}]})},{matchers:_.emojis.address1,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.address1")}]})},{matchers:_.emojis.address2,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.address2")}]})},{matchers:_.emojis.postalCode,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.emojis.postal_code")}]})},{matchers:_.tooLong.address1,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.address1")}]})},{matchers:_.tooLong.address2,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.address2")}]})},{matchers:_.tooLong.firstName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.first_name")}]})},{matchers:_.tooLong.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.last_name")}]})},{matchers:_.tooLong.city,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.too_long.city")}]})},{matchers:_.containsUrl.firstName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.url.first_name")}]})},{matchers:_.containsUrl.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.url.last_name")}]})},{matchers:_.htmlTags.address1,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.address1")}]})},{matchers:_.htmlTags.address2,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.address2")}]})},{matchers:_.htmlTags.city,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.city")}]})},{matchers:_.htmlTags.firstName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.first_name")}]})},{matchers:_.htmlTags.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"SHIPPING_ADDRESS_INVALID",intent:"SHIPPING_ADDRESS",message:this.i18n.translate("errors.html_tags.last_name")}]})},{matchers:C.invalid.generic,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.invalid.billing_address")}]})},{matchers:[Fe],generateAction:()=>this.decelerateOrAbort({reason:"localization_extension_field_error",instrumentName:b.GooglePay,errorOrWarning:Fe.code,checkoutUrl:t,requestType:n})},{matchers:C.required.firstName,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.missing.first_name")}]})},{matchers:C.required.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.missing.last_name")}]})},{matchers:C.required.address1,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.missing.address1")}]})},{matchers:C.required.address2,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.missing.address2")}]})},{matchers:C.required.city,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.missing.city")}]})},{matchers:C.required.phoneNumber,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.missing.phone")}]})},{matchers:C.required.postalCode,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.missing.postal_code")}]})},{matchers:C.invalid.postalCode,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.invalid.postal_code")}]})},{matchers:C.required.province,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.missing.zone")}]})},{matchers:C.emojis.firstName,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.emojis.first_name")}]})},{matchers:C.htmlTags.firstName,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.html_tags.first_name")}]})},{matchers:C.invalid.firstName,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.invalid.first_name")}]})},{matchers:C.emojis.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.emojis.last_name")}]})},{matchers:C.htmlTags.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.html_tags.last_name")}]})},{matchers:C.invalid.lastName,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.invalid.last_name")}]})},{matchers:C.emojis.address1,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.emojis.address1")}]})},{matchers:C.htmlTags.address1,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.html_tags.address1")}]})},{matchers:C.invalid.address1,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.invalid.address1")}]})},{matchers:C.emojis.address2,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.emojis.address2")}]})},{matchers:C.htmlTags.address2,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.html_tags.address2")}]})},{matchers:C.invalid.address2,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.invalid.address2")}]})},{matchers:C.emojis.city,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.emojis.city")}]})},{matchers:C.htmlTags.city,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.html_tags.city")}]})},{matchers:C.invalid.city,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.invalid.city")}]})},{matchers:C.emojis.phoneNumber,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.emojis.phone")}]})},{matchers:C.invalid.phoneNumber,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.invalid.phone")}]})},{matchers:C.emojis.postalCode,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.emojis.postal_code")}]})},{matchers:C.invalid.postalCode,generateAction:()=>({action:"show_error",errors:[{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_METHOD",message:this.i18n.translate("errors.invalid.postal_code")}]})}]}mapCustomValidationFunctionErrorToAction(t){const n=Wr(t);return n?(Yr(this.i18n.translate("error_dialogs.wallet.title",{wallet:this.brandName}),n.message),{action:"abort"}):null}}function gh({deliveryGroups:e,i18n:t}){var n;const r=pd(ao({deliveryGroups:e}),t),a=r.map(({handle:i,title:s,description:l})=>({id:i,label:s!=null?s:"",description:l})),o=(n=r.find(i=>{var s;return i.handle.includes(((s=e[0].selectedDeliveryOption)==null?void 0:s.handle)||"")}))==null?void 0:n.handle;return{shippingOptions:a,defaultSelectedOptionId:o}}function Cr(e,t=!1,{addressType:n="unknown"}={}){let r,a=e.locality;t&&e.iso3166AdministrativeArea?(r=e.iso3166AdministrativeArea,e.countryCode==="AE"&&(a=e.administrativeArea)):(t&&(p.googlePayIso3166AdministrativeAreaFallback(),p.log({body:"Google Pay address missing iso3166AdministrativeArea",attributes:{addressType:n,countryCode:e.countryCode,administrativeArea:e.administrativeArea,userAgent:navigator==null?void 0:navigator.userAgent}})),r=e.administrativeArea,e.countryCode==="AE"&&(a=e.administrativeArea,e.administrativeArea in ta&&(r=ta[e.administrativeArea])),e.countryCode==="MX"&&r&&(r=yh(r)));let o,i;if(e.name){const[s,...l]=(e.name||"").split(" ");l.length===0?i=s:i=l.join(" "),o=s}return{firstName:o,lastName:i,address1:e.address1,address2:e.address2,city:a,province:r,country:e.countryCode,phone:e.phoneNumber,zip:e.postalCode}}const ta={"\u0623\u0628\u0648 \u0638\u0628\u064A":"AZ","\u0625\u0645\u0627\u0631\u0629 \u0627\u0644\u0634\u0627\u0631\u0642\u0629\u0651":"SH",\u0627\u0644\u0641\u062C\u064A\u0631\u0629:"FU",\u0639\u062C\u0645\u0627\u0646:"AJ","\u0631\u0623\u0633 \u0627\u0644\u062E\u064A\u0645\u0629":"RK","\u0625\u0645\u0627\u0631\u0629 \u0631\u0623\u0633 \u0627\u0644\u062E\u064A\u0645\u0629":"RK","\u0623\u0645 \u0627\u0644\u0642\u064A\u0648\u064A\u0646":"UQ","\u0627\u0645 \u0627\u0644\u0642\u064A\u0648\u064A\u0646":"UQ",\u062F\u0628\u064A:"DU","\u0625\u0645\u0627\u0631\u0629 \u062F\u0628\u064A\u0651":"DU"};function yh(e){return e==="M\xE9x."?"MEX":e==="Q.R."?"Q ROO":e.replace(/\./g,"").toUpperCase()}class ea extends Error{constructor(){super(...arguments),d(this,"name","GooglePayError")}}function Do(e){const t=e.auth;if(!(Array.isArray(t)&&t.length>0))return{result:"error",reason:"invalidAuthParams"};const n=ot();for(const r of t)if(n<r.expiresAt*1e3)return{result:"success",jwt:r.jwt};return{result:"error",reason:"authJwtExpired"}}const fh=27e3,ra="Google Pay Timeout";var Pe,Z,Qt;class bh{constructor({walletParams:t,isShippingRequired:n,hasSellingPlan:r,dataSource:a,button:o,i18n:i,cartClient:s,buyerCurrency:l,abortController:c}){d(this,"name",b.GooglePay),d(this,"walletParams"),d(this,"cart",null),d(this,"isShippingRequired"),d(this,"hasSellingPlan"),d(this,"dataSource"),d(this,"button"),d(this,"paymentsClient"),d(this,"i18n"),d(this,"actionGenerator"),d(this,"cartClient"),d(this,"initialBuyerCurrency"),d(this,"useISO3166Format"),d(this,"terminalCartCreationError"),j(this,Pe),j(this,Z),j(this,Qt),d(this,"onPaymentDataChanged",async h=>{var g,y;const{callbackTrigger:f,shippingAddress:A,shippingOptionData:E}=h,{translate:D}=this.i18n;switch(w.leaveBreadcrumb("Google Pay onPaymentDataChanged",{callbackTrigger:f},"log"),f){case"INITIALIZE":{if(!this.cart)try{const{cart:st,customValidationError:B,decelerationReason:x,unrecoverableError:S}=await Et({element:this.button,instrumentName:b.GooglePay,dataSource:this.dataSource});if(B||S)return p.sheetClicked({instrument:this.name,result:"rejected",reason:B?"custom_validation_error":"unrecoverable_error"}),this.terminalCartCreationError=B?B.message:wh(this.i18n,S),this.showPaymentDataRequestError({error:{reason:"OTHER_ERROR",message:this.terminalCartCreationError,intent:"SHIPPING_ADDRESS"}});if(x)return p.sheetClicked({instrument:this.name,result:"success",reason:"deceleration"}),U({checkoutUrl:(g=st==null?void 0:st.checkoutUrl)!=null?g:"",instrumentName:this.name,reason:x}),this.showPaymentDataRequestError({error:{intent:"SHIPPING_ADDRESS",reason:"OTHER_ERROR",message:""}});this.cart=st,p.sheetClicked({instrument:this.name,result:"success"})}catch(st){return p.sheetClicked({instrument:this.name,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in Google Pay sheet clicked",attributes:{error:String(st),location:"onPaymentDataChanged_INITIALIZE"}}),this.showPaymentDataRequestError({intent:"SHIPPING_ADDRESS"})}let P=!1;if(A)try{return await this.handleShippingAddressChange(this.cart.id,A)}catch(st){P=!0}return{newTransactionInfo:Ar({cart:this.cart,i18n:this.i18n}),...P?this.showPaymentDataRequestError():{}}}case"SHIPPING_ADDRESS":return this.terminalCartCreationError?this.showPaymentDataRequestError({error:{reason:"OTHER_ERROR",message:this.terminalCartCreationError,intent:"SHIPPING_ADDRESS"}}):this.cart?A?this.handleShippingAddressChange(this.cart.id,A):{newTransactionInfo:Ar({cart:this.cart,i18n:this.i18n})}:this.showPaymentDataRequestError({intent:f});case"SHIPPING_OPTION":{if(!this.cart)return this.showPaymentDataRequestError({intent:f});if(!E||!E.id)return{error:{reason:"SHIPPING_OPTION_INVALID",message:D("shipping_methods.choose_delivery_strategy"),intent:"SHIPPING_OPTION"}};const P=await this.handleDeliveryOptionChange(E.id.split(","));return P.data?(this.cart=P.data,P.abortReason==="out_of_stock"?this.showPaymentDataRequestError({error:{intent:"SHIPPING_OPTION",reason:"OTHER_ERROR",message:this.i18n.translate("error_dialogs.product.out_of_stock")}}):P.decelerationReason?(U({checkoutUrl:(y=this.cart.checkoutUrl)!=null?y:"",instrumentName:this.name,reason:P.decelerationReason}),this.showPaymentDataRequestError({error:{intent:"SHIPPING_OPTION",reason:"OTHER_ERROR",message:""}})):this.handlePaymentDataRequestUpdate({result:P,intent:f,checkoutUrl:this.cart.checkoutUrl,requestType:"onPaymentDataChanged::updateCartDeliveryOptions"})):this.showPaymentDataRequestError({intent:f})}default:return this.logException("Payment data changed callback returned unexpected intent: ".concat(f),{severity:"warning"}),this.showPaymentDataRequestError({intent:"SHIPPING_ADDRESS"})}}),d(this,"onPaymentAuthorized",async h=>{var g,y,f,A,E;if(p.authorizationAttempt(this.name),re(M.AuthorizationLatency,this.name),!this.cart)return p.googlePayNullCartOnAuthorize(),this.handlePaymentAuthorizationError();const D=(g=h.paymentMethodData.info)==null?void 0:g.billingAddress,P=h.shippingAddress,{signature:st,signedMessage:B,protocolVersion:x}=JSON.parse(h.paymentMethodData.tokenizationData.token);if(!D)return this.handlePaymentAuthorizationError({error:{reason:"PAYMENT_DATA_INVALID",intent:"PAYMENT_AUTHORIZATION",message:this.i18n.translate("errors.invalid.billing_address")}});if(this.isShippingRequired&&!P)return this.handlePaymentAuthorizationError({error:{reason:"SHIPPING_ADDRESS_INVALID",intent:"PAYMENT_AUTHORIZATION",message:this.i18n.translate("errors.invalid.shipping_address")}});const S=async()=>{var z,ae;const ap=(z=v(this,Pe))!=null?z:h.email,Uo=this.isShippingRequired?{validateAddress:!0,streetAddress:Cr(P,this.useISO3166Format,{addressType:"shipping"})}:{};return await Wt({cartClient:this.cartClient,cartId:this.cart.id,instrumentName:this.name,emailAddress:ap,abortSignal:(ae=v(this,Z))==null?void 0:ae.signal,...Uo})},zt=async()=>{var z;const ae=Cr(D,this.useISO3166Format,{addressType:"billing"});return await on({cartId:this.cart.id,totalAmount:this.cart.totalAmount,paymentMethod:{walletPaymentMethod:{googlePayWalletContent:{billingAddress:ae,signature:st,signedMessage:B,protocolVersion:x}}},canUsePaymentMethodForFreeOrder:!1,billingAddress:ae,cartClient:this.cartClient,instrumentName:this.name,hasSellingPlan:this.hasSellingPlan,abortSignal:(z=v(this,Z))==null?void 0:z.signal})},wa=setTimeout(()=>{var z;(z=v(this,Z))==null||z.abort(ra)},fh);try{const z=await S(),ae=qe({currentCart:z.data,previousCart:this.cart}),ap=G.enabled(Rt);ap&&z.data&&(this.cart=z.data);const Uo=this.handleIntermediatePaymentAuthorizationResult({result:z,checkoutUrl:this.cart.checkoutUrl,requestType:"onPaymentAuthorized::updateBuyerIdentity"});if(Uo)return clearTimeout(wa),Uo;const lp=await zt();ap&&ae==="inc"&&(lp.decelerationReason||(lp.decelerationReason="price_increased"));const mp=this.handleIntermediatePaymentAuthorizationResult({result:lp,checkoutUrl:this.cart.checkoutUrl,requestType:"onPaymentAuthorized::updateCartPayment"});if(mp)return clearTimeout(wa),mp;if(clearTimeout(wa),(f=(y=v(this,Z))==null?void 0:y.signal)!=null&&f.aborted)return this.handlePaymentAuthorizationError();const op=await Co({cartId:this.cart.id,token:st,cartClient:this.cartClient,instrumentName:this.name});ge({result:op,instrument:this.name});const wp=this.actionGenerator.mapCompletionResultToPaymentSheetAction({result:op,checkoutUrl:op.data&&"checkoutUrl"in op.data&&op.data.checkoutUrl?op.data.checkoutUrl:this.cart.checkoutUrl,requestType:"completion"});return this.handlePaymentAuthorizationResult(wp)}catch(z){clearTimeout(wa);const{message:ae}=z;return ae!=null&&ae.includes(ra)?(p.log({body:"Google Pay onPaymentAuthorized timed out",attributes:{instrument:this.name,requestType:"onPaymentAuthorized"}}),this.handlePaymentAuthorizationError({status:"timeout"})):(!(z instanceof jt)&&!((E=(A=v(this,Z))==null?void 0:A.signal)!=null&&E.aborted)&&this.logException(ae),this.handlePaymentAuthorizationError())}}),d(this,"handlePaymentAuthorizationResult",async h=>{var g,y;switch((g=h.effects)==null||g.forEach(f=>f()),h.action){case"complete":return this.emitAuthorizationCompleteMetric("success"),wt(h.redirectUrl),{transactionState:"SUCCESS"};case"show_error":return this.handlePaymentAuthorizationError({error:(y=h.errors)==null?void 0:y[0]});case"decelerate":return U({checkoutUrl:h.redirectUrl,instrumentName:this.name,reason:h.reason}),this.emitAuthorizationCompleteMetric("failed"),{transactionState:"SUCCESS"};case"abort":default:return this.emitAuthorizationCompleteMetric("failed"),{transactionState:"SUCCESS"}}}),this.walletParams=t,this.isShippingRequired=n,this.hasSellingPlan=r,this.dataSource=a,this.button=o,this.i18n=i,this.cartClient=s,this.initialBuyerCurrency=l,F(this,Pe,t.customerAccountEmail),F(this,Z,c),this.useISO3166Format=G.enabled(il);const u=Do(this.walletParams);if(u.result==="error")throw w.leaveBreadcrumb("Google Pay Invalid AuthJwt detected on click",{reason:u.reason,walletParams:this.walletParams},"error"),new ea(u.reason);F(this,Qt,u.jwt);const m={environment:this.walletParams.environment,merchantInfo:{...this.walletParams.paymentData.merchantInfo,authJwt:v(this,Qt)},paymentDataCallbacks:{onPaymentDataChanged:this.isShippingRequired?this.onPaymentDataChanged:void 0,onPaymentAuthorized:this.onPaymentAuthorized}};this.paymentsClient=new window.google.payments.api.PaymentsClient(m),this.actionGenerator=new mh(this.i18n)}async handleClick(){if(!this.isShippingRequired)throw new tt("Google Pay checkout started for digital cart");const t=hh({walletParams:this.walletParams,isShippingRequired:this.isShippingRequired,hasSellingPlan:this.hasSellingPlan,i18n:this.i18n,buyerCurrency:this.initialBuyerCurrency,authJwt:v(this,Qt)});w.leaveBreadcrumb("Google Pay handleClick",{paymentDataRequest:t},"log"),await this.paymentsClient.loadPaymentData(t)}showPaymentDataRequestError({error:t,intent:n="SHIPPING_ADDRESS"}={}){return t?{error:t}:{error:{intent:n,reason:"OTHER_ERROR",message:this.i18n.translate("error_dialogs.wallet.generic_error",{wallet:this.i18n.translate("brand.google_pay")})}}}handlePaymentAuthorizationError({error:t,status:n="failed"}={}){return this.emitAuthorizationCompleteMetric(n),{transactionState:"ERROR",...this.showPaymentDataRequestError({error:t,intent:"PAYMENT_AUTHORIZATION"})}}handlePaymentDataRequestUpdate({result:t,intent:n,checkoutUrl:r,requestType:a}){var o,i,s;const l=this.actionGenerator.mapMutationResultToPaymentSheetAction({result:t,checkoutUrl:r,requestType:a});switch((o=l.effects)==null||o.forEach(c=>c()),l.action){case"update":{const c=l,{data:u,decelerationReason:m}=t;return u?m?(U({checkoutUrl:u.checkoutUrl,instrumentName:this.name,reason:m}),this.showPaymentDataRequestError({error:{reason:"OTHER_ERROR",message:"",intent:"OFFER"}})):this.isShippingRequired&&u.deliveryGroups.length===0?this.showPaymentDataRequestError({error:{reason:"SHIPPING_ADDRESS_INVALID",message:this.i18n.translate("errors.address_unserviceable",{shopName:this.walletParams.paymentData.merchantInfo.merchantName}),intent:"SHIPPING_ADDRESS"}}):{newTransactionInfo:Ar({cart:u,i18n:this.i18n}),newShippingOptionParameters:this.isShippingRequired?gh({deliveryGroups:u.deliveryGroups,i18n:this.i18n}):void 0,error:(i=c.errors)==null?void 0:i[0]}:this.showPaymentDataRequestError({intent:n})}case"show_error":return{error:(s=l.errors)==null?void 0:s[0]};case"decelerate":return U({checkoutUrl:l.redirectUrl,instrumentName:this.name,reason:l.reason}),this.showPaymentDataRequestError({error:{reason:"OTHER_ERROR",message:"",intent:"OFFER"}});case"abort":return this.showPaymentDataRequestError({intent:n});default:return this.logException("Payment sheet update returned unexpected action (see request tab for details)",{metadata:{request:{action:l.action,intent:n}}}),this.showPaymentDataRequestError({intent:n})}}handleIntermediatePaymentAuthorizationResult({result:t,checkoutUrl:n,requestType:r}){var a,o,i,s,l;if(ge({result:t,instrument:this.name}),t.abortReason==="out_of_stock")return bt(this.i18n),{transactionState:"SUCCESS"};if(t.decelerationReason)return U({checkoutUrl:(o=(a=t.data)==null?void 0:a.checkoutUrl)!=null?o:"",instrumentName:this.name,reason:t.decelerationReason}),{transactionState:"SUCCESS"};const c=this.actionGenerator.mapMutationResultToPaymentSheetAction({result:t,checkoutUrl:n,requestType:r});switch((i=c.effects)==null||i.forEach(u=>u()),c.action){case"show_error":return this.handlePaymentAuthorizationError({error:(s=c.errors)==null?void 0:s[0]});case"abort":return this.handlePaymentAuthorizationError({error:(l=c.errors)==null?void 0:l.at(0)});case"decelerate":return this.emitAuthorizationCompleteMetric("success"),U({checkoutUrl:c.redirectUrl,instrumentName:this.name,reason:c.reason}),{transactionState:"SUCCESS"};default:return}}handleCurrencyChange(t,n){tn({currentCartTotal:n,initialBuyerCurrency:this.initialBuyerCurrency})&&U({checkoutUrl:t,instrumentName:this.name,reason:"currency_changed"})}async handleShippingAddressChange(t,n){var r,a;let o=await Wt({cartClient:this.cartClient,cartId:t,streetAddress:n?Cr(n,this.useISO3166Format,{addressType:"shipping"}):{},instrumentName:b.GooglePay,abortSignal:(r=v(this,Z))==null?void 0:r.signal});if(!o.data)return this.showPaymentDataRequestError({intent:"SHIPPING_ADDRESS"});if(this.cart=o.data,o.abortReason==="out_of_stock")return this.showPaymentDataRequestError({error:{intent:"SHIPPING_ADDRESS",reason:"OTHER_ERROR",message:this.i18n.translate("error_dialogs.product.out_of_stock")}});if(o.decelerationReason)return U({checkoutUrl:(a=this.cart.checkoutUrl)!=null?a:"",instrumentName:this.name,reason:o.decelerationReason}),this.showPaymentDataRequestError({error:{intent:"SHIPPING_ADDRESS",reason:"OTHER_ERROR",message:""}});const i=this.cart.deliveryGroups.map(({selectedDeliveryOption:s,deliveryOptions:l})=>{var c;return s!=null&&s.handle&&s.deliveryMethodType!=="LOCAL"?s.handle:(c=l.filter(({deliveryMethodType:u})=>u==="SHIPPING")[0])==null?void 0:c.handle}).filter(Boolean);if(i.length>0){if(o=await this.handleDeliveryOptionChange(i),!o.data)return this.showPaymentDataRequestError({intent:"SHIPPING_ADDRESS"});this.cart=o.data}return this.handleCurrencyChange(this.cart.checkoutUrl,this.cart.totalAmount),this.handlePaymentDataRequestUpdate({result:o,intent:"SHIPPING_ADDRESS",checkoutUrl:this.cart.checkoutUrl,requestType:"onPaymentDataChanged::updateBuyerIdentity"})}async handleDeliveryOptionChange(t){var n;const r=So({deliveryGroups:this.cart.deliveryGroups,instrumentName:b.GooglePay,selectedDeliveryOptionHandles:t});return await Ao({cartClient:this.cartClient,cartId:this.cart.id,instrumentName:b.GooglePay,selectedDeliveryOptions:r,abortSignal:(n=v(this,Z))==null?void 0:n.signal})}logException(t,{severity:n,metadata:r}={}){w.notify(new ea(t),{severity:n!=null?n:"error",metadata:r})}emitAuthorizationCompleteMetric(t){p.authorizationComplete({instrument:this.name,measurement:Q(M.AuthorizationLatency,this.name),result:t})}}Pe=new WeakMap,Z=new WeakMap,Qt=new WeakMap;function wh(e,t){switch(t){case $.VariantRequiresSellingPlan:case $.SellingPlanNotApplicable:case $.InvalidQuantity:case $.MerchandiseIdInvalid:case $.IgnoredResponseError:case $.NoResponse:return e.translate("error_dialogs.checkout.generic_error");default:return e.translate("error_dialogs.checkout.generic_error")}}const _h={LIGHT:"light",DARK:"dark"};class Eh extends At{constructor(){super(...arguments),d(this,"name",b.GooglePay),d(this,"paymentsClient",null),d(this,"button",null),d(this,"handleClick",async()=>{if(this.disabled)return;this.disabled=!0;const t=Ot("AbortController");let n=!1;try{await this.createPaymentsClient(t),n=!0,await this.paymentsClient.handleClick()}catch(r){if(this.disabled=!1,r.statusCode==="CANCELED"){t==null||t.abort("[Google Pay] Payment sheet cancelled"),p.sheetCancelled(b.GooglePay);return}t==null||t.abort("[Google Pay] Payment sheet failure"),this.expectedError(r)?p.sheetClicked({instrument:this.name,result:"failed",reason:"expected_error"}):w.notify(r),n||(p.sheetClicked({instrument:this.name,result:"failed",reason:"unhandled_error"}),p.log({body:"Unhandled error detected in Google Pay client creation",attributes:{error:String(r),location:"handleClick"}}));const a=await this.i18n,o=a.translate("brand.google_pay");it(o,a)}})}static get observedAttributes(){return["disabled"]}attributeChangedCallback(t,n,r){super.attributeChangedCallback(t,n,r,this.button)}async connectedCallback(){this.cleanupOnFailure(this.render.bind(this),this.name)}async createPaymentsClient(t){this.paymentsClient=new bh({walletParams:this.walletParams,isShippingRequired:this.isShippingRequired,hasSellingPlan:this.hasSellingPlan,dataSource:await this.dataSource,button:this,cartClient:await this.apiClient,i18n:await this.i18n,buyerCurrency:this.buyerCurrency,abortController:t})}async render(){const t=this.getOrCreateShadowRoot();if(this.button)return;await this.initializeShadowStyles(t,sh);const{translate:n}=await this.i18n,r=this.isCTA?n("buy_with_button_content",{wallet:n("brand.google_pay")}):n("brand.google_pay"),a=or({label:r});this.disabled&&a.setAttribute("disabled",""),a.classList.add("button",xt.BUTTON,_h[this.buttonTheme]),a.onclick=this.handleClick,await this.renderButtonContent(a,n),this.button=a,t.appendChild(a),this.ensureLightDOMIsNotEmpty(),this.onRendered()}async renderButtonContent(t,n){const r=Ee({instrumentName:b.GooglePay,logoType:this.buttonTheme}),a=new DOMParser().parseFromString(r,"image/svg+xml").documentElement;if(t.style.font=window.getComputedStyle(this).font,this.isCTA){const o=sn({translate:n,logoElement:a,setAriaHidden:!0});o.classList.add("content"),t.appendChild(o)}else t.classList.add("logo-only"),t.appendChild(a)}expectedError(t){return t==="failed to open window"}}const It=class ip extends Ct{static walletName(){return"google_pay"}constructor(t){super(t)}getWebComponentName(){return"shopify-google-pay-button"}getInstrumentName(){return b.GooglePay}getWebComponentClass(){return Eh}async loadWalletSDK(){if(ip.googlePaySDKPromise)return ip.googlePaySDKPromise;const t=document.createElement("script");t.setAttribute("src",this.walletParams.sdkUrl);const n=new Promise((r,a)=>{t.onload=()=>r(),t.onerror=o=>{t.remove(),a(o)},document.body.appendChild(t)});return ip.googlePaySDKPromise=Promise.all([n,this.loadLogos()]),ip.googlePaySDKPromise}getLoadEligibility(){const t=Do(this.walletParams);switch(t.result){case"success":return{eligible:!0};case"error":return{eligible:!1,reason:t.reason}}}getPartnerSDKEligibility(){return{eligible:!0}}async loadLogos(){return Promise.all([this.loadGooglePayLogo(),this.loadGooglePayLogoDark()])}async loadGooglePayLogo(){await te({svg:"google-pay-logo.svg",instrumentName:b.GooglePay})}async loadGooglePayLogoDark(){await te({svg:"google-pay-logo-dark.svg",instrumentName:b.GooglePay,logoType:"DARK"})}};d(It,"googlePaySDKPromise");let zr=It;const Ah=[Vc,Tr,cn,zr,Or,Lr,No],Ch=new Map(Ah.map(e=>[e.walletName(),t=>new e(t)]));function ye(e){if(!e)return null;const t=Ch.get(e.name);return t?t(e):(console.debug("Can't build wallet with name ".concat(e.name)),null)}function Sh(e){return e.map(t=>ye(t)).filter(t=>t!=null)}const Oo="*{box-sizing:border-box}.wallet-button-fade-in{animation:animation-fade-in .3s cubic-bezier(.1,.79,1,1)}@keyframes animation-fade-in{0%{opacity:0}to{opacity:1}}button[aria-disabled=true]{opacity:.5;cursor:not-allowed}";function Ph({styleId:e,styles:t,cssFileName:n}){var r,a;(a=(r=window.Shopify)==null?void 0:r.PaymentButton)!=null&&a.isStorefrontPortableWallets&&(vh({styleId:e})||Ih({styleId:e,styles:t}))}function vh({styleId:e}){const t=document.querySelector("style#".concat(e)),n=document.querySelector("link#".concat(e));return!!(t||n)}function Ih({styleId:e,styles:t}){const n=document.createElement("style");n.id=e,n.innerHTML=t,document.head.insertBefore(n,document.head.firstChild)}const X={buttonBlockSize:"--shopify-accelerated-checkout-button-block-size",buttonBorderRadius:"--shopify-accelerated-checkout-button-border-radius",buttonBoxShadow:"--shopify-accelerated-checkout-button-box-shadow",inlineAlignment:"--shopify-accelerated-checkout-inline-alignment"};function na(e){let t=0,n=0,r=0;const a=e.split(/\s+/);for(let o=0;o<a.length;o++){const i=a[o];i!==">"&&(i.includes("#")&&(t+=(i.match(/#/g)||[]).length),i.includes(".")&&(n+=(i.match(/\./g)||[]).length),i.includes("[")&&(n+=(i.match(/\[/g)||[]).length),i.includes(":")&&(n+=(i.match(/:[^:]/g)||[]).length),/^[A-Za-z]/.test(i)&&(r+=1))}return[t,n,r]}function kh(e,t){for(let n=0;n<3;n++)if(e[n]!==t[n])return t[n]-e[n];return 0}function aa(e){return[...e].sort((t,n)=>{const r=na(t.selector),a=na(n.selector);return kh(r,a)})}const Th=/\.cart__dynamic-checkout-buttons|\.dynamic-checkout-buttons\s*(>\s*)?li(?![a-zA-Z0-9_.:#-])/,Nh=/\.cart__dynamic-checkout-buttons|\.dynamic-checkout-buttons\s*\[role="?button"?\](?![:\w-])/,Rh=/\.additional-checkout-buttons\s*(?:div\s*)?\[role="?button"?\](?![:\w-])/,xo=/\[data-shopify-buttoncontainer\](?![:\w-])/,Lo=/.dynamic-checkout-buttons .shopify-payment-button__button/,Dh=/(?!.*\.shopify-cleanslate)\.shopify-payment-button__button(?:--branded)?(?![\w-:.#>])/,Oh=/\.(shopify-payment-button|shopify-payment-button__button|shopify-payment-button__button--branded)\s*\[role="?button"?\](?![:\w-])/,xh=/(?:only\s+)?(?:screen\s+and\s+)?\((?:min|max)-(?:width|height):\s*\d+px\)/,Lh=[Nh,xo,Th,Rh,Lo],Mh=[Dh,Oh,Lo],zh=.001;function oa(e){return e.split(",").map(t=>t.trim())}function Mo(e){const t=e.pageType,n=t===N.ProductPage?Mh:Lh,r=[...document.styleSheets].filter(Uh),a=new Set;function o(B){for(const x of n){const S=B.match(x);if(S)return a.add(S[0]),!0}return!1}const i=[],s=[];r.forEach(B=>{try{for(const x of B.cssRules)if(x instanceof CSSMediaRule){const S=x;if(!xh.test(S.conditionText))continue;for(const zt of S.cssRules){if(!(zt instanceof CSSStyleRule))continue;const wa=oa(zt.selectorText);for(const z of wa)o(z)&&s.push({selector:z,conditionText:S.conditionText,...da(zt)})}}else if(x instanceof CSSStyleRule){const S=x,zt=oa(S.selectorText);for(const wa of zt)o(wa)&&i.push({selector:wa,...da(S)})}}catch(x){Me()("shopify-support-debug")&&(console.debug("[shopify-support-debug] stylesheet origin: ".concat(B.href)),console.debug(x))}});const l=Me()("shopify-support-debug");l&&console.table(Array.from(a));const c=i.reverse(),u=s.reverse(),m=aa(c),h=aa(u),g={},y=ia(t)?document.querySelector(".cart__blocks .button"):document.querySelector(".product-form__buttons .button");y&&(g.boxShadow=getComputedStyle(y,":before").boxShadow);for(const B of m){const x=["height","minHeight","borderRadius","marginTop"];ia(t)&&B.selector.match(xo)&&x.push("justifyContent");for(const S of x)g[S]=Hh({rule:B,property:S,currentPropertyValue:g[S]})}const{height:f,borderRadius:A,minHeight:E,marginTop:D,justifyContent:P,boxShadow:st}=g;return l&&console.table([{property:"height",value:f},{property:"borderRadius",value:A},{property:"minHeight",value:E},{property:"marginTop",value:D},{property:"justifyContent",value:P},{property:"boxShadow",value:st}]),t===N.ProductPage?ca({styles:{height:f,minHeight:E,borderRadius:A,marginTop:D,boxShadow:st},mediaRules:h,element:e}):ca({styles:{borderRadius:A,boxShadow:st,justifyContent:P},mediaRules:h,element:e})}function zo({element:e,styles:t,debug:n=!1}){if(!t)return;Vh(t,e,n);const r="global-".concat(e.tagName.toLowerCase(),"-styles");if(document.head.querySelector("style#".concat(r))==null){const a=document.createElement("style");a.id=r,a.innerHTML=t,document.head.appendChild(a)}}function Uh(e){const t=e.ownerNode instanceof HTMLLinkElement&&(e.ownerNode.getAttribute("crossorigin")==="anonymous"||e.ownerNode.getAttribute("crossorigin")==="");return e.href==null||e.href.startsWith(window.location.origin)||t}function ia(e){return e===N.CartPage||e===N.CartAjax}function sa({height:e,minHeight:t}){let n=e,r=t;return(n!=null&&n.includes("var(".concat(X.buttonBlockSize))||n==="auto")&&(n=null),(r!=null&&r.includes("var(".concat(X.buttonBlockSize))||r==="auto")&&(r=null),n===r?n:r&&n?"max(".concat(n,",").concat(r,")"):n||r}function la({existingProperties:e,mediaCondition:t,selector:n,styles:r}){const a={...r};e.forEach(o=>{delete a[o]});for(const[o,i]of Object.entries(a))i!=null&&i.startsWith("var(".concat(o))&&delete a[o];for(const[o,i]of Object.entries(a))(i==null||i==="")&&delete a[o];return Object.keys(a).length===0?"":Bh({mediaCondition:t,selector:n,styles:a})}function Bh({mediaCondition:e,selector:t,styles:n}){let r="".concat(e?"@media ".concat(e," { "):"").concat(t," {");for(const[a,o]of Object.entries(n))o&&(r+="\n  ".concat(a,": ").concat(o,";"));return r+="\n}",e&&(r+="}"),r+="\n",r}function ca({styles:e,element:t,mediaRules:n}){const{height:r,minHeight:a,borderRadius:o,marginTop:i,justifyContent:s,boxShadow:l}=e,c=t.tagName.toLowerCase(),u=getComputedStyle(t),m=new Set;for(const g of Object.values(X))u.getPropertyValue(g)&&m.add(g);let h=la({existingProperties:m,selector:c,styles:{[X.buttonBlockSize]:sa({height:r,minHeight:a}),[X.buttonBorderRadius]:o,[X.buttonBoxShadow]:l,[X.inlineAlignment]:s,"margin-top":i,display:i?"block":void 0}});return n.forEach(g=>{(g.height||g.minHeight||g.borderRadius||g.boxShadow||g.justifyContent||g.marginTop)&&(h+=la({existingProperties:m,mediaCondition:g.conditionText,selector:c,styles:{[X.buttonBlockSize]:sa({height:g.height,minHeight:g.minHeight}),[X.buttonBorderRadius]:g.borderRadius,[X.buttonBoxShadow]:g.boxShadow,[X.inlineAlignment]:g.justifyContent,"margin-top":g.marginTop,display:g.marginTop?"block":void 0}}))}),h.trim()}const Fh=[["height"],["minHeight","min-height"],["borderRadius","border-radius"],["marginTop","margin-top"],["justifyContent","justify-content"]];function da(e){return Fh.reduce((t,[n,r])=>(t[n]=$h({rule:e,property:r!=null?r:n}),t),{})}function $h({rule:e,property:t}){const n=e.style.getPropertyValue(t);return n!==""&&e.style.getPropertyPriority(t)?"".concat(n," !important"):n||null}function Hh({rule:e,property:t,currentPropertyValue:n}){const r=e[t];return!(n!=null&&n.includes("!important"))&&r!=null&&r.includes("!important")?r:n!=null?n:r}function Gh(e){const t=/(--[\w-]+)\s*:/g;let n;const r={};for(;(n=t.exec(e))!==null;){const l=n[1];r[l]=(r[l]||0)+1}const a=/@media\s+([^{]+)/g,o=(e.match(a)||[]).length,i=/margin-top\s*:/g,s=(e.match(i)||[]).length;return{properties:r,mediaQueryCount:o,marginTopCount:s}}function Vh(e,t,n){var r,a,o;const i=(o=(a=(r=window.ShopifyAnalytics)==null?void 0:r.lib)==null?void 0:a.trekkie)==null?void 0:o.defaultAttributes,s=i==null?void 0:i.themeId;if(s&&(n&&p.log({body:"Style backwards compatibility used",attributes:{themeId:"".concat(s)}}),Math.random()<zh)){const l=Gh(e);for(const[c,u]of Object.entries(l.properties))p.styleBackwardsCompatibilityRules({rule:c,count:u,pageType:t.pageType});l.mediaQueryCount>0&&p.styleBackwardsCompatibilityRules({rule:"@media",count:l.mediaQueryCount,pageType:t.pageType}),l.marginTopCount>0&&p.styleBackwardsCompatibilityRules({rule:"margin-top",count:l.marginTopCount,pageType:t.pageType}),p.log({body:"Style backwards compatibility details",attributes:{themeId:"".concat(s),pageType:t.pageType,stylesString:e.length>2e3?e.substring(0,2e3):e}})}}const ua=2e3;class ha extends Error{constructor(){super(...arguments),d(this,"name","AcceleratedCheckoutError")}}var Jt;const Ze=class yp extends rn{constructor(){super(...arguments),d(this,"instanceNumber",++yp.instanceCount),d(this,"pageType",N.ProductPage),d(this,"formObserver"),d(this,"dataSource"),d(this,"wrapper"),d(this,"shopPromiseEligible",!1),d(this,"didInitiateRender",!1),j(this,Jt)}static get observedAttributes(){return["access-token","disabled","has-selling-plan","requires-shipping"]}async connectedCallback(){var t,n;super.connectedCallback();try{if((n=(t=this.wrapper)==null?void 0:t.children)!=null&&n.length||this.didInitiateRender)return;if(!this.validateRenderingSurface()){this.clearUI();return}this.instanceNumber===1&&(nn(this),p.initStarted(),Ph({styleId:"shopify-accelerated-checkout-styles",styles:Dc,cssFileName:"AcceleratedCheckout.css"}),this.extractStyles()),this.shopPromiseEligible=Ma();const r=Zt(M.ButtonDisplay,"dc:".concat(this.instanceNumber));this.i18n=ar(),this.setupFormObserver(),this.didInitiateRender=!0;const a=await this.loadWallet(),o=a.getInstrumentName();this.apiClient=new lr({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale,withCarrierRates:!0}),this.dataSource=new Zl(this,this.apiClient,o);const i=await this.getWebComponentInstance({wallet:a,instrumentName:o,dataSource:this.dataSource,i18n:this.i18n,apiClient:this.apiClient,buttonDisplayBenchmark:r});this.render(i,o),p.initCompleted(),this.instanceNumber===1&&this.triggerLoadedEvent()}catch(r){if(this.clearUI(),p.initCompleted(r),r.name===ve)throw r;w.notify(new ha("An error occurred while attempting to render AcceleratedCheckout: ".concat(r),{cause:r}))}}async attributeChangedCallback(t,n,r){n!==r&&(en(this,t,r),t==="has-selling-plan"&&r===""?this.showBuyerConsent(this.apiClient,this.i18n):t==="has-selling-plan"&&r===null&&this.hideBuyerConsent())}async getWebComponentInstance({wallet:t,instrumentName:n,dataSource:r,i18n:a,apiClient:o,buttonDisplayBenchmark:i}){const s=await t.createWebComponent({walletContainer:this,dataSource:r,i18n:a,apiClient:o,classNames:jh(n),callToAction:"true",pageType:this.pageType,containerInstanceNumber:this.instanceNumber,supportsSubscriptions:t.supportsSubscriptions,supportsDeferredPurchaseOptions:t.supportsDeferredPurchaseOptions,onRendered:()=>p.instrumentLoaded({instrumentOrComponentName:n,result:"success",measurement:i()})});if(!s)throw new ha("No web component instance found for instrument ".concat(n));return s}async render(t,n){this.clearUI();const r=this.getOrCreateShadowRoot(),a=document.createElement("style");a.innerHTML=Oo,r.appendChild(a),this.wrapper=document.createElement("div"),this.wrapper.className="wallet-button-fade-in wallet-button-wrapper";const o=document.createElement("slot");o.name="button",this.wrapper.appendChild(o);const i=document.createElement("slot");i.name="promise",this.wrapper.appendChild(i);const s=document.createElement("slot");s.name="more-options",this.wrapper.appendChild(s),r==null||r.appendChild(this.wrapper),this.hasSellingPlan?this.showBuyerConsent(this.apiClient,this.i18n):this.hideBuyerConsent(),this.setupManagedMarketsHandlers(this.i18n);const l=new DocumentFragment;t&&l.appendChild(t);const c=this.getShopPromiseSlot();c&&l.appendChild(c);const u=this.getMorePaymentOptionsLink(n);u&&l.appendChild(u),this.appendChild(l)}getMorePaymentOptionsLink(t){var n,r;if(t===b.BuyItNow)return null;const a=document.createElement("more-payment-options-link");return ke(a,{"buyer-country":(n=this.buyerCountry)!=null?n:"","access-token":(r=this.accessToken)!=null?r:"",slot:"more-options"}),a.disabled=this.disabled,a.setDataSource(this.dataSource),a.setI18n(this.i18n),a.setClassNames(Sr.MORE_PAYMENT_OPTION_BUTTON),a}getShopPromiseSlot(){if(!this.shopPromiseEligible)return null;const t=document.createElement("div");return t.setAttribute("data-shopify","shop-promise-payment-button-slot"),t.style.height="100%",t.slot="promise",t}validateRenderingSurface(){return Ne({page:"product",element:this})!=null}async loadWallet(){const t=this.recommendedWallet,n=Rc(t,this.fallbackWallet,"AcceleratedCheckout");return await Wh(this,{...n,instanceNumber:this.instanceNumber})}setupFormObserver(){this.formObserver||(this.formObserver=new an(this,({disabled:t,hasSellingPlan:n})=>{this.disabled=t,this.hasSellingPlan=n,this.isShippingRequired=qh(this,this.variantParams)}),this.formObserver.setupMutationObservers())}getOrCreateShadowRoot(){return v(this,Jt)||F(this,Jt,this.attachShadow({mode:"closed"})),v(this,Jt)}extractStyles(){if(this.styleExtractorDisabled){Me()("shopify-support-debug")&&console.debug("[shopify-support-debug] styling backward compatibility disabled"),p.styleBackwardsCompatibility({usedBackwardsCompatibility:!1});return}const t=Zt(M.StyleExtract,"dc:".concat(this.instanceNumber)),n=Mo(this);n&&zo({element:this,styles:n,debug:this.debug});const r=t();r&&p.styleBackwardsCompatibilityExecutionTime({measurement:r,pageType:this.pageType,stylesWritten:!!n}),p.styleBackwardsCompatibility({usedBackwardsCompatibility:!!n})}};Jt=new WeakMap,d(Ze,"instanceCount",0);let Ur=Ze;function jh(e){return e===b.BuyItNow?Sr.UNBRANDED_BUTTON:Sr.BRANDED_BUTTON}function qh(e,t){var n;const r=ja(e);return!!((n=t.find(a=>a.id===Number(r==null?void 0:r.variantId)))!=null&&n.requiresShipping)}async function Wh(e,{recommendedWallet:t,fallbackWallet:n,instanceNumber:r}){const a=t?ye(t):null,o=ye(n),i=async s=>{const l=Za({walletInstrument:s,instanceNumber:r}),c="timeout",u=await Promise.race([l,new Promise(m=>setTimeout(()=>m(c),ua))]);if(u===c)p.instrumentSDKLoaded({instrument:s.getInstrumentName(),measurement:ua,result:"timeout"});else if(u instanceof Ct)return u;return null};if(We(e,a)){const s=await i(a);if(s)return s}if(We(e,o)){const s=await i(o);if(s)return s}return ye(va)}ct("shopify-accelerated-checkout",Ur),ct("more-payment-options-link",Ic,{isChildCustomElement:!0});const Yh=e=>{var t;if(typeof PerformanceObserver>"u"||!((t=PerformanceObserver.supportedEntryTypes)!=null&&t.includes("resource")))return null;const n=new PerformanceObserver(r=>{r.getEntriesByType("resource").some(a=>a.name.includes(de.CartUpdate)||a.name.includes(de.CartChange)||a.name.includes(de.CartAdd)||a.name.includes(de.CartClear))&&e()});return n.observe({entryTypes:["resource"]}),n},Kh=".wallet-cart-button__skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede)}.wallet-button-wrapper{width:100%;container-type:inline-size;container-name:wrapper}.wallet-cart-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(min(100px,100%),1fr));justify-content:center;column-gap:10px;row-gap:var(--shopify-accelerated-checkout-row-gap, 8px);margin:0;padding:0}.wallet-cart-button-container{position:relative}.wallet-cart-button-container,.wallet-cart-button{min-width:100px;height:clamp(25px,var(--shopify-accelerated-checkout-button-inline-size, var(--shopify-accelerated-checkout-button-block-size, 42px)),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);list-style-type:none!important;text-align:center}.wallet-cart-button{width:100%}.wallet-cart-grid.wallet-cart-grid--vertical,.additional-checkout-buttons--vertical .wallet-cart-grid{grid-template-columns:1fr;margin:0;row-gap:var(--shopify-accelerated-checkout-row-gap, 8px)}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container:first-child,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}.wallet-cart-grid.wallet-cart-grid--horizontal,.additional-checkout-buttons--horizontal .wallet-cart-grid{justify-content:stretch;grid-auto-flow:column;grid-template-columns:none;grid-auto-columns:1fr}.wallet-cart-grid.wallet-cart-grid--horizontal .wallet-cart-button-container,.additional-checkout-buttons--horizontal .wallet-cart-grid .wallet-cart-button-container,.wallet-cart-grid.wallet-cart-grid--horizontal .wallet-cart-button,.additional-checkout-buttons--horizontal .wallet-cart-grid .wallet-cart-button{min-width:0}@container wrapper (width < 210px){.wallet-cart-grid{grid-template-columns:1fr}.wallet-cart-button-container,.wallet-cart-button{min-width:0}.wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *)>.wallet-cart-button-container:nth-child(n+3){display:none}.wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))~.wallet-cart-drawer-toggle{display:block}}.wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(7)){grid-template-columns:1fr}.wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(7))>.wallet-cart-button-container{min-width:0}@container wrapper (210px <= width) and (width < 320px){:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:nth-of-type(odd):last-child,shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:nth-of-type(odd):last-child{grid-column:1 / -1;justify-self:var(--shopify-accelerated-checkout-inline-alignment, center);width:calc((100% - 10px)/2)}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))>.wallet-cart-button-container:last-child:nth-child(2n),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))>.wallet-cart-button-container:last-child:nth-child(2n){grid-column:1 / -1;justify-self:var(--shopify-accelerated-checkout-inline-alignment, center);width:calc((100% - 10px)/2)}.wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *)>.wallet-cart-button-container:nth-child(n+5){display:none}.wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5))~.wallet-cart-drawer-toggle{display:block}:host([shop-pay-emphasis]) .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))>.wallet-cart-button-container:nth-child(n+4),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))>.wallet-cart-button-container:nth-child(n+4){display:none}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(4))~.wallet-cart-drawer-toggle,shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(4))~.wallet-cart-drawer-toggle{display:block}}@container wrapper (320px <= width) and (width < 430px){:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(4)):not(:has(>.wallet-cart-button-container:nth-of-type(5))),shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(4)):not(:has(>.wallet-cart-button-container:nth-of-type(5))){grid-template-columns:repeat(2,1fr)}}@container wrapper (320px <= width) and (width < 540px){:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6))),shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6))){grid-template-columns:repeat(6,1fr)}:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container,shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container{grid-column:span 2;justify-self:stretch;width:auto}:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container:nth-child(4),shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container:nth-child(4){grid-column:2 / span 2}}@container wrapper (430px <= width) and (width < 650px){:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7))),shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7))){grid-template-columns:repeat(3,1fr)}}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)) .wallet-cart-button-container:first-child,shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)) .wallet-cart-button-container:first-child{grid-column:1 / -1}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(4)),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(4)){grid-template-columns:repeat(auto-fit,minmax(max(100px,calc((100% - 20px) / 3)),1fr))}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):not(:has(>.wallet-cart-button-container:nth-of-type(4))),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):not(:has(>.wallet-cart-button-container:nth-of-type(4))){grid-template-columns:repeat(auto-fit,minmax(max(100px,calc((100% - 10px)/2)),1fr))}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6))),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6))){grid-template-columns:repeat(auto-fit,minmax(max(100px,calc((100% - 10px)/2)),1fr))}@container wrapper (320px <= width){:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7))),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7))){grid-template-columns:repeat(6,1fr)}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:not(:first-child),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:not(:first-child){grid-column:span 2}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:nth-child(5),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:nth-child(5){grid-column:2 / span 2}:host([shop-pay-emphasis]) .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container:nth-child(n+4),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container:nth-child(n+4){display:none}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5))~.wallet-cart-drawer-toggle,shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5))~.wallet-cart-drawer-toggle{display:block}:host([shop-pay-emphasis]) .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6))>.wallet-cart-button-container:nth-child(n+5),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6))>.wallet-cart-button-container:nth-child(n+5){display:none}}.wallet-cart-drawer-toggle{display:none;background:transparent;border:none;cursor:pointer;font-size:.875em;text-decoration:underline;text-align:center;width:100%;padding:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0;color:inherit}::slotted(.wallet-cart-drawer-toggle){background:transparent;border:none;cursor:pointer;font-size:.875em;text-decoration:underline;text-align:center;width:100%;padding:0;color:inherit}.wallet-cart-drawer-toggle--skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede);height:20px;width:140px;margin:var(--shopify-accelerated-checkout-row-gap, 8px) auto 0;border-radius:4px;text-decoration:none;color:transparent;overflow:hidden}@media screen and (max-width: 750px){.wallet-cart-button-container,.wallet-cart-button{min-width:0}}@supports not (display: grid){.wallet-cart-grid{display:flex;flex-direction:column}.wallet-cart-button-container{width:100%}}.screen-reader-text{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}",Qh=".wallet-cart-button__skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede)}.wallet-button-wrapper{width:100%;container-type:inline-size;container-name:wrapper}.wallet-cart-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(min(100px,100%),1fr));justify-content:center;column-gap:10px;row-gap:var(--shopify-accelerated-checkout-row-gap, 8px);margin:0;padding:0}.wallet-cart-button-container{position:relative}.wallet-cart-button-container,.wallet-cart-button{min-width:100px;height:clamp(25px,var(--shopify-accelerated-checkout-button-inline-size, var(--shopify-accelerated-checkout-button-block-size, 42px)),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);list-style-type:none!important;text-align:center}.wallet-cart-button{width:100%}.wallet-cart-grid.wallet-cart-grid--vertical,.additional-checkout-buttons--vertical .wallet-cart-grid{grid-template-columns:1fr;margin:0;row-gap:var(--shopify-accelerated-checkout-row-gap, 8px)}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container:first-child,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}.wallet-cart-grid.wallet-cart-grid--horizontal,.additional-checkout-buttons--horizontal .wallet-cart-grid{justify-content:stretch;grid-auto-flow:column;grid-template-columns:none;grid-auto-columns:1fr}.wallet-cart-grid.wallet-cart-grid--horizontal .wallet-cart-button-container,.additional-checkout-buttons--horizontal .wallet-cart-grid .wallet-cart-button-container,.wallet-cart-grid.wallet-cart-grid--horizontal .wallet-cart-button,.additional-checkout-buttons--horizontal .wallet-cart-grid .wallet-cart-button{min-width:0}@container wrapper (width < 210px){.wallet-cart-grid{grid-template-columns:1fr}.wallet-cart-button-container,.wallet-cart-button{min-width:0}.wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *)>.wallet-cart-button-container:nth-child(n+3){display:none}.wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))~.wallet-cart-drawer-toggle{display:block}}.wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(7)){grid-template-columns:1fr}.wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(7))>.wallet-cart-button-container{min-width:0}@container wrapper (210px <= width) and (width < 320px){:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:nth-of-type(odd):last-child,shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:nth-of-type(odd):last-child{grid-column:1 / -1;justify-self:var(--shopify-accelerated-checkout-inline-alignment, center);width:calc((100% - 10px)/2)}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))>.wallet-cart-button-container:last-child:nth-child(2n),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))>.wallet-cart-button-container:last-child:nth-child(2n){grid-column:1 / -1;justify-self:var(--shopify-accelerated-checkout-inline-alignment, center);width:calc((100% - 10px)/2)}.wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *)>.wallet-cart-button-container:nth-child(n+5){display:none}.wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5))~.wallet-cart-drawer-toggle{display:block}:host([shop-pay-emphasis]) .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))>.wallet-cart-button-container:nth-child(n+4),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3))>.wallet-cart-button-container:nth-child(n+4){display:none}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(4))~.wallet-cart-drawer-toggle,shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(4))~.wallet-cart-drawer-toggle{display:block}}@container wrapper (320px <= width) and (width < 430px){:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(4)):not(:has(>.wallet-cart-button-container:nth-of-type(5))),shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(4)):not(:has(>.wallet-cart-button-container:nth-of-type(5))){grid-template-columns:repeat(2,1fr)}}@container wrapper (320px <= width) and (width < 540px){:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6))),shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6))){grid-template-columns:repeat(6,1fr)}:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container,shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container{grid-column:span 2;justify-self:stretch;width:auto}:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container:nth-child(4),shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container:nth-child(4){grid-column:2 / span 2}}@container wrapper (430px <= width) and (width < 650px){:host(:not([shop-pay-emphasis])) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7))),shopify-accelerated-checkout-cart:not([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7))){grid-template-columns:repeat(3,1fr)}}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)) .wallet-cart-button-container:first-child,shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)) .wallet-cart-button-container:first-child{grid-column:1 / -1}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(4)),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(4)){grid-template-columns:repeat(auto-fit,minmax(max(100px,calc((100% - 20px) / 3)),1fr))}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):not(:has(>.wallet-cart-button-container:nth-of-type(4))),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):not(:has(>.wallet-cart-button-container:nth-of-type(4))){grid-template-columns:repeat(auto-fit,minmax(max(100px,calc((100% - 10px)/2)),1fr))}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6))),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6))){grid-template-columns:repeat(auto-fit,minmax(max(100px,calc((100% - 10px)/2)),1fr))}@container wrapper (320px <= width){:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7))),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7))){grid-template-columns:repeat(6,1fr)}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:not(:first-child),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:not(:first-child){grid-column:span 2}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:nth-child(5),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6)):not(:has(>.wallet-cart-button-container:nth-of-type(7)))>.wallet-cart-button-container:nth-child(5){grid-column:2 / span 2}:host([shop-pay-emphasis]) .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container:nth-child(n+4),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5)):not(:has(>.wallet-cart-button-container:nth-of-type(6)))>.wallet-cart-button-container:nth-child(n+4){display:none}:host([shop-pay-emphasis]) .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5))~.wallet-cart-drawer-toggle,shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(5))~.wallet-cart-drawer-toggle{display:block}:host([shop-pay-emphasis]) .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6))>.wallet-cart-button-container:nth-child(n+5),shopify-accelerated-checkout-cart[shop-pay-emphasis] .wallet-cart-grid--collapsed:not(.wallet-cart-grid--vertical):not(.wallet-cart-grid--horizontal):not(.additional-checkout-buttons--vertical *):not(.additional-checkout-buttons--horizontal *):has(>.wallet-cart-button-container:nth-of-type(3)):has(>.wallet-cart-button-container:nth-of-type(6))>.wallet-cart-button-container:nth-child(n+5){display:none}}.wallet-cart-drawer-toggle{display:none;background:transparent;border:none;cursor:pointer;font-size:.875em;text-decoration:underline;text-align:center;width:100%;padding:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0;color:inherit}::slotted(.wallet-cart-drawer-toggle){background:transparent;border:none;cursor:pointer;font-size:.875em;text-decoration:underline;text-align:center;width:100%;padding:0;color:inherit}.wallet-cart-drawer-toggle--skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede);height:20px;width:140px;margin:var(--shopify-accelerated-checkout-row-gap, 8px) auto 0;border-radius:4px;text-decoration:none;color:transparent;overflow:hidden}@media screen and (max-width: 750px){.wallet-cart-button-container,.wallet-cart-button{min-width:0}}@supports not (display: grid){.wallet-cart-grid{display:flex;flex-direction:column}.wallet-cart-button-container{width:100%}}.screen-reader-text{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}",Jh=".wallet-cart-button__skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede)}.wallet-button-wrapper{container-type:inline-size;container-name:wrapper;width:100%}.wallet-cart-grid{margin:0 -5px -5px;padding:0;display:flex;flex-direction:row;justify-content:var(--shopify-accelerated-checkout-inline-alignment, start)}.wallet-cart-button-container{position:relative;margin:0 5px 5px}.wallet-cart-button-container,.wallet-cart-button{width:auto;flex:1 1 0px;min-width:100px;height:clamp(25px,var(--shopify-accelerated-checkout-button-inline-size, var(--shopify-accelerated-checkout-button-block-size, 42px)),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);list-style-type:none!important;text-align:center}.wallet-cart-grid.wallet-cart-grid--vertical,.additional-checkout-buttons--vertical .wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container:first-child,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}.wallet-cart-grid.wallet-cart-grid--horizontal,.additional-checkout-buttons--horizontal .wallet-cart-grid{justify-content:stretch}.wallet-cart-grid.wallet-cart-grid--horizontal .wallet-cart-button-container,.additional-checkout-buttons--horizontal .wallet-cart-grid .wallet-cart-button-container,.wallet-cart-grid.wallet-cart-grid--horizontal .wallet-cart-button,.additional-checkout-buttons--horizontal .wallet-cart-grid .wallet-cart-button{min-width:0}@container wrapper (width >= 100px) and (width <= 500px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 210px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 320px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 430px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 540px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(6)){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button-container:first-child{margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}@media screen and (max-width: 750px){.wallet-cart-grid{justify-content:stretch}.wallet-cart-button-container,.wallet-cart-button{min-width:0}}@supports (not (container-type: inline-size)) or (not (selector(:has(*)))){.wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-button-container:first-child{margin:0}.wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}.screen-reader-text{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}",Xh=".wallet-cart-button__skeleton{animation:acceleratedCheckoutLoadingSkeleton var(--shopify-accelerated-checkout-skeleton-animation-duration, 4s) var(--shopify-accelerated-checkout-skeleton-animation-timing-function, ease) infinite;animation-delay:-.168s;background-color:var(--shopify-accelerated-checkout-skeleton-background-color, #dedede)}.wallet-button-wrapper{container-type:inline-size;container-name:wrapper;width:100%}.wallet-cart-grid{margin:0 -5px -5px;padding:0;display:flex;flex-direction:row;justify-content:var(--shopify-accelerated-checkout-inline-alignment, start)}.wallet-cart-button-container{position:relative;margin:0 5px 5px}.wallet-cart-button-container,.wallet-cart-button{width:auto;flex:1 1 0px;min-width:100px;height:clamp(25px,var(--shopify-accelerated-checkout-button-inline-size, var(--shopify-accelerated-checkout-button-block-size, 42px)),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);list-style-type:none!important;text-align:center}.wallet-cart-grid.wallet-cart-grid--vertical,.additional-checkout-buttons--vertical .wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button-container:first-child,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid.wallet-cart-grid--vertical .wallet-cart-button,.additional-checkout-buttons--vertical .wallet-cart-grid .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}.wallet-cart-grid.wallet-cart-grid--horizontal,.additional-checkout-buttons--horizontal .wallet-cart-grid{justify-content:stretch}.wallet-cart-grid.wallet-cart-grid--horizontal .wallet-cart-button-container,.additional-checkout-buttons--horizontal .wallet-cart-grid .wallet-cart-button-container,.wallet-cart-grid.wallet-cart-grid--horizontal .wallet-cart-button,.additional-checkout-buttons--horizontal .wallet-cart-grid .wallet-cart-button{min-width:0}@container wrapper (width >= 100px) and (width <= 500px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(1)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(2))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 210px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(2)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(3))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 320px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(3)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(4))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 430px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(4)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(5))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}@container wrapper (width <= 540px){.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(5)).wallet-cart-grid:not(:has(>.wallet-cart-button-container:nth-of-type(6))) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(6)){justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-grid:not(.wallet-cart-grid--horizontal):has(>.wallet-cart-button-container:nth-of-type(6)) .wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}@media screen and (max-width: 750px){.wallet-cart-grid{justify-content:stretch}.wallet-cart-button-container,.wallet-cart-button{min-width:0}}@supports (not (container-type: inline-size)) or (not (selector(:has(*)))){.wallet-cart-grid{justify-content:flex-start;flex-direction:column;margin:0}.wallet-cart-button-container{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px);margin:var(--shopify-accelerated-checkout-row-gap, 8px) 0 0 0}.wallet-cart-button-container:first-child{margin:8px 0 0}.wallet-cart-button{width:100%;height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 54px),55px)}}.screen-reader-text{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}";function Zh(e){const t=Ne({page:"cart",element:e});return Va({type:"attributes",form:t})}class tp{constructor(t,n,r){this.element=t,this.cartToken=n,this.apiClient=r}async getInitialCart(t){try{const n="gid://shopify/Cart/".concat(this.cartToken),r=Zh(this.element);let a,o=[];if(r.length){const i=await this.apiClient.updateCartAttributes({cartId:n,attributes:r,instrumentName:t,startingCheckout:!0});a=i.data,o=i.errors}else a=await this.apiClient.fetchCart({id:n,instrumentName:t,startingCheckout:!0});return{cart:a,errors:o}}catch(n){if(n instanceof ut)return{cart:null,errors:[{code:"NO_RESPONSE"}]};throw n}}}var Xt;const tr=class bp extends rn{constructor(){super(),d(this,"instanceNumber",++bp.instanceCount),d(this,"pageType",N.CartPage),d(this,"cartObserver",null),d(this,"dataSource",null),d(this,"wrapper"),d(this,"didInitiateRender",!1),j(this,Xt)}static get observedAttributes(){return["access-token","has-selling-plan","requires-shipping","shop-pay-emphasis"]}createDataSource(){if(!this.cartToken){p.cartTokenMissing({reason:"createDataSource"});return}this.apiClient=new lr({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale,withCarrierRates:!0}),this.dataSource=new tp(this,this.cartToken,this.apiClient)}async createWebComponents({shouldRefetchCartAttributes:t}){if(!this.walletConfigs)throw new rt({code:"invalid-wallet-configs",message:"[AcceleratedCheckoutCart] walletConfigs does not exist"});const n=kc(this.walletConfigs,"AcceleratedCheckoutCart");if(!(n instanceof Array))throw new rt({code:"invalid-wallet-configs",message:"[AcceleratedCheckoutCart] invalid walletConfigs found"});const r=M.ButtonDisplay,a=i=>"".concat(i,":").concat(this.instanceNumber),o=await ep(this,{walletConfigs:n,startButtonDisplayBenchmark:i=>re(r,a(i))});return this.createDataSource(),this.dataSource?(t&&await this.updateAttributes(),await Promise.all(o.map(async i=>{const s=i.getInstrumentName();return await i.createWebComponent({walletContainer:this,dataSource:this.dataSource,i18n:this.i18n,apiClient:this.apiClient,pageType:this.pageType,containerInstanceNumber:this.instanceNumber,slot:"button-".concat(i.getInstrumentName()),supportsSubscriptions:i.supportsSubscriptions,supportsDeferredPurchaseOptions:i.supportsDeferredPurchaseOptions,onRendered:(()=>{let l=!1;return()=>{l||(l=!0,p.instrumentLoaded({instrumentOrComponentName:s,result:"success",measurement:Q(r,a(s))}))}})()})}))):[]}async cartChangedCallback(){try{if(!this.dataSource&&this.cartToken){await this.render({shouldRefetchCartAttributes:!0}),p.initCompleted();return}else if(!this.cartToken){p.cartTokenMissing({reason:"cartChangedCallback"});return}await this.updateAttributes()}catch(t){this.clearUI(),w.notify(t)}}async updateAttributes(){var t,n;if(!this.cartToken||!this.apiClient)return;const r=await this.apiClient.fetchLimitedCart({id:"gid://shopify/Cart/".concat(this.cartToken),instrumentName:b.Unknown});this.hasSellingPlan=(t=r.sellingPlan)!=null?t:!1,this.isShippingRequired=(n=r.shippingRequired)!=null?n:!1}async connectedCallback(){super.connectedCallback();try{if(this.didInitiateRender)return;if(this.instanceNumber===1&&nn(this),p.initStarted(),this.cartObserver=Yh(()=>this.cartChangedCallback()),!this.cartObserver){p.log({body:"Cart observer unavailable - PerformanceObserver not supported",attributes:{userAgent:navigator.userAgent}}),this.clearUI();return}if(!this.cartToken){p.cartTokenMissing({reason:"connectedCallback"});return}await this.render({shouldRefetchCartAttributes:!1}),p.initCompleted()}catch(t){this.clearUI(),p.initCompleted(t),w.notify(t)}}disconnectedCallback(){var t;(t=this.cartObserver)==null||t.disconnect()}async attributeChangedCallback(t,n,r){n!==r&&(en(this,t,r),t==="has-selling-plan"&&r===""?this.showBuyerConsent(this.apiClient,this.i18n):t==="has-selling-plan"&&r===null&&this.hideBuyerConsent())}get cartToken(){return be("cart")}async render({shouldRefetchCartAttributes:t}){if(this.i18n=ar(),this.hasLegacyCartCookie()){p.legacyCartCookie(),this.clearUI();return}this.didInitiateRender=!0;const n=Zt(M.ButtonDisplay,"cart:".concat(this.instanceNumber)),r=await this.createWebComponents({shouldRefetchCartAttributes:t});if(this.clearUI(),this.hasSellingPlan?this.showBuyerConsent(this.apiClient,this.i18n):this.hideBuyerConsent(),this.setupManagedMarketsHandlers(this.i18n),r.length===0)return;const a=new DocumentFragment,o=this.getOrCreateShadowRoot(),i=G.enabled(Pn),s=i?Kh:Jh,l=document.createElement("style");l.innerHTML=[Oo,s].join("\n"),o.appendChild(l),this.extractStyles(),this.wrapper=document.createElement("div"),this.wrapper.className="wallet-button-fade-in wallet-button-wrapper";const c=document.createElement("h2");c.className="screen-reader-text",c.textContent=this.i18n.translate("express_checkout"),this.wrapper.appendChild(c);const u=document.createElement("div");if(u.className="wallet-cart-grid ".concat(xt.CONTAINER),Object.entries(rp).forEach(([m,h])=>{document.querySelector(m)&&u.classList.add(h)}),r.forEach(m=>{const h=document.createElement("div"),g=document.createElement("div"),y=document.createElement("slot");y.name="button-".concat(m.name),h.className="wallet-cart-button-container",g.className="wallet-cart-button",h.setAttribute("data-testid","grid-cell"),h.appendChild(g),g.appendChild(y),u.appendChild(h),a.appendChild(m)}),this.wrapper.appendChild(u),i&&r.length>=3){u.classList.add("wallet-cart-grid--collapsed");const m=document.createElement("div");m.className="wallet-cart-drawer-toggle";const h=document.createElement("slot");h.name="drawer-toggle",m.appendChild(h),this.wrapper.appendChild(m);const g=document.createElement("button");g.className="wallet-cart-drawer-toggle",g.setAttribute("slot","drawer-toggle"),g.setAttribute("aria-expanded","false"),g.style.display="block",g.style.padding="0",g.style.whiteSpace="nowrap";const y=document.createElement("span");y.setAttribute("aria-hidden","true"),y.style.display="inline-block",y.style.width="5px",y.style.height="5px",y.style.borderRight="1.5px solid currentColor",y.style.borderBottom="1.5px solid currentColor",y.style.transform="translateY(-1px) rotate(45deg)",y.style.marginLeft="6px",y.style.verticalAlign="middle",g.textContent=this.i18n.translate("show_more_options"),g.appendChild(y),g.addEventListener("click",()=>{const f=u.classList.toggle("wallet-cart-grid--collapsed");g.textContent=f?this.i18n.translate("show_more_options"):this.i18n.translate("hide_more_options"),g.appendChild(y),y.style.transform=f?"translateY(-1px) rotate(45deg)":"rotate(-135deg)",g.setAttribute("aria-expanded",String(!f))}),a.appendChild(g)}o.appendChild(this.wrapper),this.appendChild(a),p.instrumentLoaded({instrumentOrComponentName:"AcceleratedCheckoutCart",result:"success",measurement:n()})}getOrCreateShadowRoot(){return v(this,Xt)||F(this,Xt,this.attachShadow({mode:"closed"})),v(this,Xt)}hasLegacyCartCookie(){var t;return this.cartToken?(t=this.cartToken)==null?void 0:t.match(/^[a-z0-9]+$/):!1}extractStyles(){if(this.styleExtractorDisabled){Me()("shopify-support-debug")&&console.debug("[shopify-support-debug] styling backward compatibility disabled"),p.styleBackwardsCompatibility({usedBackwardsCompatibility:!1});return}const t=Zt(M.StyleExtract,"cart:".concat(this.instanceNumber)),n=Mo(this);if(n){zo({element:this,styles:n,debug:this.debug});const a=this.getOrCreateShadowRoot(),o=G.enabled(Pn),i=document.createElement("style");i.innerHTML=o?Qh:Xh,a.appendChild(i)}const r=t();r&&p.styleBackwardsCompatibilityExecutionTime({measurement:r,pageType:this.pageType,stylesWritten:!!n}),p.styleBackwardsCompatibility({usedBackwardsCompatibility:!!n})}};Xt=new WeakMap,d(tr,"instanceCount",0);let Br=tr;async function ep(e,{walletConfigs:t,startButtonDisplayBenchmark:n=()=>{}}){const r=Nc(e,Sh(t));return(await Promise.all(r.map(a=>(n(a.getInstrumentName()),Za({walletInstrument:a,instanceNumber:e.instanceNumber}))))).filter(a=>a!=null)}const rp={".additional-checkout-buttons--vertical shopify-accelerated-checkout-cart":"wallet-cart-grid--vertical",".additional-checkout-buttons--horizontal shopify-accelerated-checkout-cart":"wallet-cart-grid--horizontal"};ct("shopify-accelerated-checkout-cart",Br);class np{getInitialCart(){throw new Error('[NoOpDataSource] Unexpected call to "getCart"')}}const er=class fp extends rn{constructor(){super(...arguments),d(this,"instanceNumber",++fp.instanceCount),d(this,"pageType",N.Checkout)}get walletConfig(){return this.getAttribute("wallet-config")}async connectedCallback(){var t;super.connectedCallback();try{if(this.i18n=ar(),this.children.length)return;this.instanceNumber===1&&(nn(this),p.initStarted());const n=Zt(M.ButtonDisplay,"dc:".concat(this.instanceNumber)),r=Tc(this.walletConfig,"WalletButton");if(!r)throw new si("[WalletButton] No config provided.");const a=ye(r);if(!a)return;if(!await this.eligibleToShow(a)){this.pciEnabled&&this.dispatchEvent(new CustomEvent("wallet-rendered",{detail:{status:"failure",message:"ineligible"}}));return}if(this.onlySdk){p.initCompleted(),this.pciEnabled&&this.dispatchEvent(new CustomEvent("wallet-rendered",{detail:{status:"success"}}));return}const o=a.getInstrumentName();this.apiClient=new lr({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale});const i=await this.createWebComponent(a,this.i18n,this.apiClient,o,n);this.innerHTML="",this.appendChild(i),p.initCompleted(),this.instanceNumber===1&&this.triggerLoadedEvent()}catch(n){this.innerHTML="",this.pciEnabled&&this.dispatchEvent(new CustomEvent("wallet-rendered",{detail:{status:"failure",message:(t=n.message)!=null?t:"Error loading wallet SDK"}})),p.initCompleted(n),w.notify(n)}}async createWebComponent(t,n,r,a,o){const i=await t.createWebComponent({walletContainer:this,dataSource:new np,i18n:n,apiClient:r,containerInstanceNumber:this.instanceNumber,pageType:this.pageType});return i.onRendered=()=>{this.pciEnabled&&this.dispatchEvent(new CustomEvent("wallet-rendered",{detail:{status:"success"}})),p.instrumentLoaded({instrumentOrComponentName:a,result:"success",measurement:o()})},i}async eligibleToShow(t){return!(!We(this,t)||(await t.loadWalletSDK(),!t.getPartnerSDKEligibility().eligible))}};d(er,"instanceCount",0);let Fr=er;ct("shopify-wallet-button",Fr),Zo(w,{metadata:{custom:{"notify-origin":"window-onerror"}}}),ti(w,{metadata:{custom:{"notify-origin":"unhandled-promise-rejection-handler"}}}),p.startExporter();
