import{aF as e,aG as n,o as t,d as a,q as r,_ as i,T as s,c as l,aH as o,aI as c,aJ as p,aK as m,i as d,am as u,an as y,h,E as f,u as g,l as v,m as b,A as _,Q as C,U as T,V as P,a7 as w,G as I,y as k,aL as x,k as N,s as S,z as B,W as M,g as L,D as j,S as q,b as O,aM as E,af as A,aa as G,aN as F,C as z,R as H}from"./chunk.common_D09lIwZG.en.esm.js";import{M as Z}from"./chunk.modal_CMCqeMIe.en.esm.js";const R={backgroundColor:"#fff",bannerContent:"pay_in_4",canShowSamplePlanModalContent:!1,cartDetails:void 0,checkoutUrl:null,countryCode:"US",currencyCode:"USD",dataLoaded:!1,eligible:!1,financingTermForBanner:null,fullPrice:"",hasZeroInterestLoanType:!1,installmentPlans:[],installmentsBuyerPrequalificationEnabled:!1,isEligibleForPrequalification:!1,isInAdaptiveRangeWithoutZeroInterest:!1,isLegacyBanner:!1,loanTypes:[],maxPrice:"$3000",metaType:"product",minIneligibleMessageType:void 0,minPrice:"$50",isModalOpen:!1,modalToken:"",modalVariant:"splitPay",numberOfPaymentTerms:4,pricePerTerm:"",samplePlans:[],sellerId:void 0,showNewBuyerIncentive:!1,showPrequalAmount:!1,prequalAmountLoaded:!1,setShowPrequalAmount:()=>{throw new Error("Invalid attempt to call setShowPrequalAmount from outside of context")},setPrequalAmountLoaded:()=>{throw new Error("Invalid attempt to call setPrequalAmountLoaded from outside of context")},openModal:e=>{throw new Error("Invalid attempt to call openModal from outside of context")},closeModal:()=>{throw new Error("Invalid attempt to call closeModal from outside of context")},variantAvailable:!1,variantId:void 0,variantInfo:void 0},W=e(R),V=()=>n(W),U="1.1.0-beta",$=()=>{const{analyticsData:{analyticsTraceId:e},produceMonorailEvent:n,getTrekkieAttributes:l}=t(),[o]=a(new Set),c=r((t=>i(void 0,[t],void 0,(function*({bannerContent:t,bannerTemplateCodeSignature:a,eligible:r,hasPrequalLink:i,origin:s,price:c,variantId:p}){const m=p?String(p):"cart";if(o.has(m))return;o.add(m);const d=yield l("uniqToken","visitToken","shopId","microSessionId","contentLanguage","currency"),u=Object.assign(Object.assign({},d),{origin:s,bannerContent:t,eligible:r,bannerTemplateCodeSignature:a,price:c,shopJsVersion:U,hasPrequalLink:i,analyticsTraceId:e});n({event:{schemaId:"shop_pay_installments_banner_ui_impression/3.0",payload:u},trekkieAttributes:d,onError:()=>{o.delete(m)}})}))),[e,l,n,o]),p=r((e=>i(void 0,[e],void 0,(function*({elementType:e,elementName:t}){const a=`element-${e}-${t}`;if(o.has(a))return;o.add(a);const r=yield l("uniqToken","visitToken","microSessionId","microSessionCount","shopId","themeId","themeCityHash","contentLanguage","referer"),i=Object.assign(Object.assign({},r),{elementName:t,elementType:e,shopJsVersion:U});n({event:{schemaId:"shop_js_ui_impression/1.1",payload:i},onError:()=>{o.delete(a)},trekkieAttributes:r})}))),[l,n,o]),m=r((e=>i(void 0,[e],void 0,(function*({eligibleSpiPlanType:e,modalToken:t,origin:a,price:r,spiPlanDetails:i,variantId:s}){let c;if(c="cart"===a?`${a}-open`:`${t}-open`,o.has(c))return;o.add(c);const p=yield l("uniqToken","visitToken","microSessionId","microSessionCount","shopId","currency"),m=Object.assign(Object.assign({},p),{origin:a,modalToken:t,eligibleSpiPlanType:e,price:r,spiPlanDetails:i,variantId:s,shopJsVersion:U});n({event:{schemaId:"shop_pay_installments_dynamic_modal_impression/1.0",payload:m},onError:()=>{o.delete(c)},trekkieAttributes:p})}))),[l,o,n]),d=r((e=>i(void 0,[e],void 0,(function*({modalToken:e,action:t}){const a=`${e}-${t}`;if(o.has(a))return;o.add(a);const r=yield l("uniqToken","visitToken","microSessionId","microSessionCount","shopId"),i=Object.assign(Object.assign({},r),{modalToken:e,action:t,shopJsVersion:U});n({event:{schemaId:"shop_pay_installments_dynamic_modal_user_actions/1.0",payload:i},onError:()=>{o.delete(a)},trekkieAttributes:r})}))),[l,n,o]),u=r(((...e)=>i(void 0,[...e],void 0,(function*(e="product",t){if(o.has("invalidBannerMetadata"))return;o.add("invalidBannerMetadata");const a=yield l("uniqToken","visitToken","microSessionId","microSessionCount","shopId"),r=Object.assign(Object.assign({},a),{origin:e,metadata:t,shopJsVersion:U});n({event:{schemaId:"shop_pay_installments_banner_invalid_metadata/1.0",payload:r},onError:()=>{o.delete("invalidBannerMetadata")},trekkieAttributes:a})}))),[l,n,o]),y=r((t=>i(void 0,[t],void 0,(function*({bannerContent:t,eligible:a,origin:r,prequalLinkClicked:i,price:s}){if(o.has("bannerPrequalInteraction"))return;o.add("bannerPrequalInteraction");const c=yield l("uniqToken","visitToken","shopId","microSessionId","contentLanguage","currency"),p=Object.assign(Object.assign({},c),{origin:r,bannerContent:t,eligible:a,price:s,shopJsVersion:U,prequalLinkClicked:i,analyticsTraceId:e});n({event:{schemaId:"shop_pay_installments_banner_prequal_interaction/3.0",payload:p},onError:()=>{o.delete("bannerPrequalInteraction")},trekkieAttributes:c})}))),[e,l,n,o]),h=r((t=>i(void 0,[t],void 0,(function*({sellerId:t,pageType:a}){if(o.has(a))return;o.add(a);n({event:{schemaId:"shop_pay_installments_prequal_popup_page_impression/3.0",payload:{analyticsTraceId:e,sellerId:t,pageType:a}},onError:()=>{o.delete(a)},trekkieAttributes:void 0})}))),[e,o,n]);return s((()=>({trackElementImpression:p,trackInstallmentsBannerImpression:c,trackInstallmentsBannerPrequalInteraction:y,trackInvalidInstallmentBannerMetadata:u,trackInstallmentsPrequalPopupPageImpression:h,trackModalAction:d,trackModalOpened:m})),[p,c,y,u,h,d,m])},D=e=>{const n=new Map([["font-weight","weight"],["font-display","display"],["font-style","style"],["font-stretch","stretch"],["ascent-override","ascentOverride"],["descent-override","descentOverride"],["font-feature-settings","featureSettings"],["line-gap-override","lineGapOverride"],["unicode-range","unicodeRange"]]),t={};return n.forEach(((n,a)=>{e[a]&&(t[n]=e[a])})),t};function J(e){var n;if(!e||""===e.trim())return[];const t=e=>"CSSFontFaceRule"===e.constructor.name;try{const n=[...l.styleSheets].filter((e=>Boolean(e.cssRules))).flatMap((e=>[...e.cssRules].filter(t))).filter((n=>e.includes(n.style.getPropertyValue("font-family")))).map((e=>{const n={};for(let t=e.style.length;t--;){const a=e.style[t];"src"!==a?n[a]=e.style.getPropertyValue(a):n.src=e.style.getPropertyValue("src").replace(/url\((["']?)([^"')]+)\1\)/gm,((n,t,a)=>{var r,i;if(a.match(/^(https?:)?\/\//))return n;const s=null!==(i=null===(r=e.parentStyleSheet)||void 0===r?void 0:r.href)&&void 0!==i?i:location.href;return`url("${new URL(a,s)}")`}))}return n}));return n.map((e=>({src:e.src,fontFamily:e["font-family"].replace(/["']/g,""),fontFaceDescriptors:D(e)})))}catch(e){return null===(n=console.warn)||void 0===n||n.call(console,"Error while extracting font-face declaration",e),[]}}const K=[{key:"affirmCanadaHelpLink",href:"https://www.affirm.ca/help",text:"affirm.ca/help"},{key:"lendersLink",href:"https://www.affirm.com/lenders",text:"affirm.com/lenders"},{key:"licensesLink",href:"https://www.affirm.com/licenses",text:"affirm.com/licenses"}],Y=["BIF","CLP","DJF","GNF","HUF","ISK","JPY","KMF","KRW","MGA","PYG","RWF","TWD","UGX","VND","VUV","XAF","XOF","XPF"],X={CA:["en","fr"]},Q=`${m}/shopify_pay/prequal_authorize?target_origin=${d.location.origin}`;let ee;const ne=e=>{const n=e.trim().replace(/[^0-9,.]/g,"");return","===n[n.length-3]?parseFloat(n.replace(/\./g,"").replace(/,([^,]*)$/,".$1")):parseFloat(n.replace(/,/g,""))},te=({currencyCode:e="USD",price:n})=>{const t=Y.includes(e)?0:2,a={style:"currency",currency:e,minimumFractionDigits:t,maximumFractionDigits:t};try{return a.currencyDisplay="narrowSymbol",new Intl.NumberFormat(void 0,a).format(n)}catch(r){a.currencyDisplay="symbol";try{return new Intl.NumberFormat(void 0,a).format(n)}catch(a){return(ee||(ee=new u({exporter:y(),attributes:{feature:"PaymentTerms"}})),ee).log({body:"Currency formatting fallback triggered",attributes:{currencyCode:e,price:n,narrowSymbolError:r instanceof Error?r.message:String(r),symbolError:a instanceof Error?a.message:String(a)}}),`${n.toFixed(t)} ${e}`}}},ae=()=>s((()=>K.reduce(((e,{key:n,href:t,text:a})=>Object.assign(Object.assign({},e),{[n]:h("a",{href:t,target:"_blank","aria-describedby":"shopify-payment-terms-modal-warning-text",rel:"noreferrer",className:"text-grayscale-d0 underline hover_text-black focus_text-black active_text-black",children:a})})),{})),[]),re=()=>h("div",{className:"relative inline-block",children:h("svg",{className:"block",fill:"none",height:22,role:"img",viewBox:"0 0 52 58",width:22,xmlns:"http://www.w3.org/2000/svg",children:h("path",{className:"animate-reveal stroke-white stroke-dasharray-reveal",d:"M3 13C5 11.75 10.4968 6.92307 21.5 6.4999C34.5 5.99993 42 13 45 23C48.3 34 42.9211 48.1335 30.5 51C17.5 54 6.6 46 6 37C5.46667 29 10.5 25 14 23",strokeWidth:11})})}),ie=()=>{const{translate:e}=I();return h("svg",{"aria-label":String(e("paymentTerms.installmentsModal.affirm")),xmlns:"http://www.w3.org/2000/svg",height:"16",width:"39",fill:"none",children:[h("path",{fill:"#000",d:"M3.058 14.543c-.482 0-.724-.236-.724-.623 0-.72.812-.965 2.292-1.121 0 .962-.656 1.744-1.569 1.744zm.638-5.413c-1.058 0-2.275.495-2.936 1.017l.604 1.26c.53-.48 1.386-.892 2.159-.892.734 0 1.14.243 1.14.734 0 .33-.269.497-.777.563C1.99 12.056.5 12.575.5 14.026c0 1.15.826 1.846 2.116 1.846.92 0 1.74-.507 2.129-1.176v.99H6.46v-4.148c0-1.712-1.2-2.408-2.764-2.408zm17.224.188v6.367h1.837v-3.068c0-1.458.89-1.886 1.51-1.886.243 0 .57.07.785.23l.334-1.684a2.104 2.104 0 0 0-.822-.147c-.944 0-1.538.415-1.929 1.258v-1.07h-1.714zm12.979-.188c-.971 0-1.697.57-2.075 1.118-.35-.709-1.093-1.118-1.983-1.118-.971 0-1.643.535-1.954 1.15v-.962h-1.77v6.367h1.838v-3.277c0-1.177.621-1.742 1.201-1.742.525 0 1.007.337 1.007 1.207v3.812h1.835v-3.277c0-1.19.606-1.742 1.213-1.742.486 0 .998.35.998 1.193v3.826h1.834v-4.401c0-1.431-.971-2.154-2.144-2.154zm-17.447.187h-1.664v-.648c0-.842.485-1.083.903-1.083.462 0 .822.203.822.203l.566-1.284s-.573-.372-1.617-.372c-1.173 0-2.508.656-2.508 2.716v.468h-2.785v-.648c0-.842.485-1.083.903-1.083.238 0 .557.054.822.203l.566-1.284c-.338-.196-.88-.372-1.617-.372-1.173 0-2.508.656-2.508 2.716v.468H7.269v1.405h1.066v4.963h1.834v-4.963h2.785v4.963h1.834v-4.963h1.664V9.317zm1.095 6.367h1.832V9.317h-1.832v6.367z"}),h("path",{fill:"#5A31F4",d:"M28.24.434c-4.956 0-9.372 3.413-10.625 7.8h1.795C20.457 4.968 24.012 2.1 28.24 2.1c5.14 0 9.582 3.882 9.582 9.925 0 1.356-.177 2.58-.513 3.66h1.743l.017-.059c.286-1.115.431-2.326.431-3.6 0-6.74-4.95-11.59-11.26-11.59z"})]})};function se({className:e}){const{translate:n}=I(),t=String(n("paymentTerms.shopPay",{defaultValue:"Shop Pay"}));return h("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99 25","aria-label":t,role:"img",children:[h("path",{fill:"currentColor",d:"M70.842 7.915h2.25c1.561 0 2.328.642 2.328 1.715 0 1.074-.739 1.715-2.259 1.715h-2.32v-3.43ZM80.525 16.142c-.879 0-1.227-.474-1.227-.948 0-.642.725-.935 2.147-1.102l1.115-.125c-.07 1.227-.892 2.175-2.035 2.175Z"}),h("path",{fill:"currentColor","fill-rule":"evenodd",d:"M65.645.5a3.64 3.64 0 0 0-3.64 3.64V20.7a3.64 3.64 0 0 0 3.64 3.64h29.668a3.64 3.64 0 0 0 3.64-3.64V4.14A3.64 3.64 0 0 0 95.314.5H65.645Zm5.197 16.674v-4.197h2.64c2.412 0 3.695-1.353 3.695-3.402 0-2.05-1.283-3.277-3.695-3.277h-4.341v10.876h1.7Zm9.334.223c1.297 0 2.147-.572 2.538-1.548.112 1.088.767 1.645 2.189 1.269l.014-1.157c-.572.055-.683-.154-.683-.753v-2.845c0-1.673-1.102-2.663-3.138-2.663-2.008 0-3.165 1.004-3.165 2.705h1.562c0-.809.572-1.297 1.576-1.297 1.06 0 1.547.46 1.534 1.255v.363l-1.8.195c-2.021.223-3.137.99-3.137 2.329 0 1.101.781 2.147 2.51 2.147Zm9.906.32c-.711 1.73-1.855 2.245-3.64 2.245h-.766V18.54h.822c.977 0 1.45-.307 1.966-1.185L85.3 9.923h1.757l2.259 5.424 2.008-5.424h1.715l-2.956 7.795Z","clip-rule":"evenodd"}),h("path",{fill:"currentColor",d:"M6.992 11.055c-2.359-.509-3.41-.708-3.41-1.612 0-.85.711-1.274 2.134-1.274 1.25 0 2.165.544 2.839 1.61.05.081.155.11.241.066l2.655-1.335a.186.186 0 0 0 .076-.259c-1.102-1.9-3.137-2.94-5.818-2.94C2.188 5.311 0 7.037 0 9.781c0 2.915 2.664 3.651 5.027 4.16 2.362.51 3.417.709 3.417 1.613s-.769 1.33-2.303 1.33c-1.416 0-2.467-.644-3.102-1.896a.186.186 0 0 0-.251-.082L.14 16.21a.188.188 0 0 0-.083.253c1.051 2.102 3.207 3.285 6.087 3.285 3.668 0 5.885-1.698 5.885-4.527 0-2.83-2.677-3.651-5.037-4.16v-.007ZM21.218 5.311c-1.505 0-2.835.531-3.791 1.477-.06.057-.159.015-.159-.067V.687A.185.185 0 0 0 17.081.5h-3.322a.185.185 0 0 0-.187.187v18.73c0 .104.083.186.187.186h3.322a.185.185 0 0 0 .187-.186V11.2c0-1.587 1.223-2.804 2.87-2.804 1.649 0 2.843 1.191 2.843 2.804v8.216c0 .104.082.186.187.186h3.322a.185.185 0 0 0 .187-.186V11.2c0-3.452-2.274-5.89-5.459-5.89ZM33.415 4.774c-1.803 0-3.493.55-4.706 1.343a.186.186 0 0 0-.06.25l1.464 2.488c.054.089.168.12.257.066a5.853 5.853 0 0 1 3.052-.834c2.899 0 5.03 2.036 5.03 4.726 0 2.292-1.706 3.99-3.868 3.99-1.762 0-2.985-1.022-2.985-2.463 0-.825.352-1.502 1.27-1.98a.183.183 0 0 0 .073-.258l-1.381-2.327a.187.187 0 0 0-.226-.079c-1.85.683-3.15 2.327-3.15 4.533 0 3.338 2.67 5.83 6.396 5.83 4.35 0 7.478-3 7.478-7.303 0-4.612-3.64-7.982-8.644-7.982ZM51.776 5.283c-1.68 0-3.182.62-4.277 1.707a.093.093 0 0 1-.16-.066v-1.31a.185.185 0 0 0-.187-.186h-3.235a.185.185 0 0 0-.188.187v18.702c0 .104.083.186.188.186h3.32a.185.185 0 0 0 .188-.186v-6.133c0-.082.099-.123.16-.07 1.091 1.012 2.536 1.603 4.19 1.603 3.897 0 6.936-3.139 6.936-7.217 0-4.078-3.042-7.217-6.935-7.217Zm-.63 11.266c-2.215 0-3.895-1.754-3.895-4.074S48.928 8.4 51.147 8.4c2.22 0 3.893 1.726 3.893 4.075 0 2.348-1.651 4.074-3.896 4.074h.003Z"})]})}const le=()=>{var e;const{locale:n,translate:t}=I(),{countryCode:a=""}=V(),r=null!==(e=null==n?void 0:n.split("-")[0])&&void 0!==e?e:"en",i=s((()=>{var e;return null!==(e=X[a])&&void 0!==e?e:["en"]}),[a]),l=i.includes(r),o=s((()=>((e,n)=>{if(!Intl.DisplayNames)return n;const t=new Intl.DisplayNames([e],{type:"language"});return n.map((e=>{var n;return null!==(n=t.of(e))&&void 0!==n?n:e}))})(r,i)),[r,i]),c=t(l?"paymentTerms.installmentsModal.partnership":"paymentTerms.installmentsModal.partnershipDisclaimer",{affirmLogo:h("span",{className:"inline-block",children:h(ie,{})}),supportedLanguages:s((()=>Intl.ListFormat?new Intl.ListFormat(n,{type:"conjunction"}).format(o):o.join(", ")),[n,o])});return h("footer",{className:"flex flex-col items-center",children:[h("div",{className:"mb-3 h-5 w-22 text-purple-primary",children:h(se,{})}),h("small",{className:"text-caption font-light tracking-wider text-grayscale-d0",children:c})]})},oe=()=>h("div",{className:"flex w-full items-center justify-center",children:h("svg",{width:64,height:64,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",className:"animate-spin fill-purple-primary",children:h("path",{d:"M15.542 1.487A21.507 21.507 0 00.5 22c0 11.874 9.626 21.5 21.5 21.5 9.847 0 18.364-6.675 20.809-16.072a1.5 1.5 0 00-2.904-.756C37.803 34.755 30.473 40.5 22 40.5 11.783 40.5 3.5 32.217 3.5 22c0-8.137 5.3-15.247 12.942-17.65a1.5 1.5 0 10-.9-2.863z"})})}),ce=({disabled:e})=>{const{translate:n}=I(),{trackPageImpression:a}=t(),r=_(null);k((()=>{a({page:"SIGN_IN_WITH_SHOP_BUTTON"})}),[a]);const i=s((()=>n(e?"paymentTerms.buttons.unavailable":"paymentTerms.buttons.check")),[e,n]);return h(x,{className:"m-auto flex size-full w-full cursor-pointer items-center justify-center rounded-xs border-none px-11 py-2.5 text-button-large font-normal",disabled:e,ref:r,children:h("span",{className:"whitespace-nowrap font-sans text-white","data-testid":"prequal-button-text",children:i})})},pe=()=>{const{translate:e}=I(),{fullPrice:n,samplePlans:t,countryCode:a}=V(),r=e("paymentTerms.samplePlansContent.subtitle",{count:t.length,priceWithoutInterest:h("span",{className:"font-bold",dangerouslySetInnerHTML:{__html:n}})});return h(N,{children:[h("p",{"data-testid":"subtitle",className:"mb-4 text-subtitle font-normal leading-snug text-grayscale-d0",children:r}),h("ul",{className:"m-0 list-none rounded-xs border border-grayscale-l2 bg-grayscale-l4 px-5 py-4",children:t.map((({pricePerTerm:n,apr:t,numberOfPaymentTerms:r,interest:i,totalPriceWithInterest:s,loanType:l})=>{const o="split_pay"===l,c=e(o&&"GB"!==a?"paymentTerms.samplePlansContent.everyTwoWeeks":"paymentTerms.samplePlansContent.monthly"),p=e(o?"paymentTerms.samplePlansContent.splitPayFrequency":"paymentTerms.samplePlansContent.otherFrequency",{pricePerTerm:h("span",{className:"text-body-large font-medium",children:n}),frequency:c});return h("li",{className:"border-b border-grayscale-l2 py-4 text-grayscale-d0 first_pt-0 last_border-b-0 last_pb-0",children:[h("div",{className:"mb-4 flex justify-between text-body-small font-normal",children:h("span",{"data-testid":"list-item__frequency",className:"flex flex-nowrap items-end gap-1",children:[h("span",{className:"font-medium",children:p}),h("span",{"data-testid":"list-item__number-of-terms",children:"GB"===a&&o?e("paymentTerms.samplePlansContent.inNumberOfPayments",{numberOfPayments:3}):e(o?"paymentTerms.samplePlansContent.splitPayNumberOfTerms":"paymentTerms.samplePlansContent.otherNumberOfTerms",{numberOfTerms:o?2*r:r})})]})}),h("div",{className:"flex flex-col space-y-4 text-caption font-normal",children:[h("div",{className:"flex justify-between",children:[h("span",{"data-testid":"list-item__interest-detail-label",children:e("GB"===a?"paymentTerms.samplePlansContent.costOfCredit":"paymentTerms.samplePlansContent.interestDetails",{apr:t})}),h("span",{"data-testid":"list-item__interest-amount",children:i})]}),h("div",{className:"flex justify-between",children:[h(N,{children:e("paymentTerms.samplePlansContent.total")}),h("span",{className:"font-semibold",children:s})]})]})]},`${n}-${r}-${l}`)}))})]})},me=({onClose:e})=>{const{checkoutUrl:n,countryCode:l,fullPrice:o,metaType:c,isModalOpen:p,sellerId:m,variantInfo:u,showNewBuyerIncentive:y}=V(),x=s((()=>Number(m)),[m]),{translate:j}=I(),{trackInstallmentsPrequalPopupPageImpression:q}=$(),O=_(null),E=_("prequal_authorize_loaded"),[A,G]=a(!1),[F,z]=a("mainContent"),[H,Z]=a(!1),{analyticsData:R}=t(),W=ae(),U=s((()=>(({analyticsTraceId:e,hostname:n,origin:t})=>{const a=w.replace("https://",""),r=new URLSearchParams({shopify_domain:n,pay_domain:a,analytics_trace_id:e,redirect_source:t});return`${w}/pay/installments/prequalifications/authorize?${r}`})({analyticsTraceId:R.analyticsTraceId,hostname:d.location.hostname,origin:d.location.origin})),[R.analyticsTraceId]),D=r((()=>i(void 0,void 0,void 0,(function*(){n&&(d.location.assign(n),q({pageType:"prequal_continue_to_checkout_clicked",sellerId:x}))}))),[n,x,q]),{destroy:J}=S({onClose:e,onContinueToCheckout:D,onPrequalError:()=>{K()},onPrequalSuccess:()=>{K()},onPrequalReady:()=>{var e;B({contentWindow:null===(e=O.current)||void 0===e?void 0:e.contentWindow,event:{type:"createprequal",amount:ne(o),currency:"USD",sellerId:x}})},onResizeIframe:({height:e})=>{O.current.style.height=`${Math.max(Math.min(d.innerHeight-75,642),e)}px`},source:O});k((()=>{const e=O.current;return()=>{e&&J()}}),[J]);const K=()=>{z("iframe")},Y=r((()=>{O.current&&(z("loading"),q({pageType:"prequal_results_page_loading",sellerId:x}),Z(!0))}),[x,q]),{startAuth:X}=(e=>{var{onWindoidClosed:n,onWindoidOpened:a,onBuyerOnboardingSuccess:s}=e,l=f(e,["onWindoidClosed","onWindoidOpened","onBuyerOnboardingSuccess"]);const{dispatch:o}=g(),{notify:c}=v(),{trackUserAction:p}=t(),m=b(),d=_(null),{authorizeUrl:u}=C(Object.assign({flow:"prequal",proxy:!0,uxMode:"redirect",clientId:"",returnUri:Q,responseType:"code",analyticsContext:"loginWithShopPrequal"},l)),y=r((({code:e,email:n,message:t})=>{m("error",{code:e,email:n,message:t})}),[m]),h=T({windoidRef:d,handleClose:()=>{o({type:"windoidClosed"}),null==n||n()},handleOpen:()=>{o({type:"windoidOpened"}),null==a||a()},handleError:y,handleComplete:()=>{}}),w=r((e=>i(void 0,void 0,void 0,(function*(){var n;if("prequal_buyer_upsert_successful"===e.data.type)return m("buyerOnboardingSuccess"),null==s||s(),void(null===(n=d.current)||void 0===n||n.close());yield h(e)}))),[h,s,m]);return{startAuth:r((()=>{p({userAction:"SIGN_IN_WITH_SHOP_BUTTON_CLICK"}),u?d.current=P(u,w):c(new Error("Cannot open windoid: authorizeUrl is not defined"))}),[u,w,c,p])}})({proxy:!0,onWindoidOpened:()=>G(!0),onWindoidClosed:()=>G(!1),onBuyerOnboardingSuccess:Y}),ee=r((e=>{switch(X(),E.current){case"prequal_authorize_loaded":q({pageType:"prequal_authorize_loaded",sellerId:Number(m)});break;case"prequal_results_page_loaded":e.stopPropagation(),Y(),G(!1)}}),[Y,m,X,q]),te=M(ee,150,!0),ie=s((()=>h("div",{className:L("w-full",!p&&"hidden"),children:[A&&h("div",{className:"flex h-10 w-full items-center justify-center rounded-login-button bg-purple-primary",children:h(re,{})}),h("div",{className:L("h-10 w-full",A&&"hidden"),"data-testid":"check-if-you-qualify-button",onClick:te,children:h(ce,{disabled:Boolean(u&&!u.available)})})]})),[A,te,p,u]),se=h("div",{class:"flex animate-fade-in flex-col items-center justify-center p-8 font-system","data-testid":"shop-modal-content-processing",children:h("div",{class:"flex h-full flex-col items-center justify-center","data-testid":"shop-modal-content-processing-loading-container",children:[h(oe,{}),h("div",{class:"mt-5 flex flex-col items-center justify-center gap-2",children:[h("p",{"data-testid":"processing-label",children:j("paymentTerms.prequalContent.processing")}),h("p",{class:"text-caption text-grayscale-primary-light","data-testid":"processing-time-label",children:j("paymentTerms.prequalContent.processingTime")})]})]})}),me="iframe"===F,de=j(`paymentTerms.samplePlansContent.legal.${l}`,W);return h("div",{"data-testid":"prequal-modal-content",children:["loading"===F&&se,h("div",{"data-testid":"shop-modal-feature-iframe-wrapper",class:L(!me&&"hidden"),children:h("iframe",{className:"max-h-[80vh] w-[432px] max-w-full","data-testid":"prequal-modal-iframe",ref:O,src:H?U:"",title:String(j("paymentTerms.prequalContent.authorizeIframeLabel",{defaultValue:"Shop Pay Installments pre-qualification"}))})}),"mainContent"===F&&h(N,{children:[h(pe,{}),"checkout"!==c&&h(N,{children:[h("div",{"data-testid":"navigation-buttons",className:"mt-4 flex flex-col items-center",children:ie}),h("div",{className:"my-1 flex flex-col items-center text-caption font-light leading-normal",children:[h("p",{className:"text-center font-light",children:j("paymentTerms.samplePlansContent.informationShared")}),h("p",{"data-testid":"check_eligibility",className:"text-center font-light",children:j("paymentTerms.samplePlansContent.checkingEligibility")})]})]}),h("p",{id:"eligibility-approval","data-testid":"eligibility-approval",className:"mb-5 mt-8 text-caption font-light tracking-wider text-grayscale-d0",children:[y&&"US"===l&&h(N,{children:[j("paymentTerms.samplePlansContent.legal.newBuyerIncentive")," "]}),de]})]}),!me&&h(le,{})]})},de=({eligible:e,loanTypes:n})=>(null==n?void 0:n.length)&&e?n.includes("interest")&&n.includes("split_pay")?"adaptive":n.includes("split_pay")?"split_pay":"interest_only":"ineligible",ue=({modalType:e,numberOfPaymentTerms:n,countryCode:t})=>"GB"===t?he({modalType:e}):ye({modalType:e,numberOfPaymentTerms:n}),ye=({modalType:e,numberOfPaymentTerms:n})=>{switch(e){case"adaptive":return"paymentTerms.splitPayContents.subtitle.interestAndSplitPay";case"split_pay":return 2===n?"paymentTerms.splitPayContents.subtitle.splitPayOnly2":1===n?"paymentTerms.splitPayContents.subtitle.splitPayOnly30":"paymentTerms.splitPayContents.subtitle.splitPayOnly";case"interest_only":return"paymentTerms.splitPayContents.subtitle.interestOnly";default:return}},he=({modalType:e})=>{switch(e){case"split_pay":case"adaptive":return"paymentTerms.splitPayContents.subtitle.splitPayOnly3";case"interest_only":return"paymentTerms.splitPayContents.subtitle.informational";default:return}},fe=({countryCode:e,lendersLink:n,modalType:t,loanTypes:a,showNewBuyerIncentive:r})=>{const i=["paymentTerms.splitPayContents.legal.ratesFromApr",{link:n}];switch(e){case"CA":return["paymentTerms.splitPayContents.legal.CA"];case"US":{const e=r?["paymentTerms.splitPayContents.legal.newBuyerIncentive"]:[];switch(t){case"adaptive":return[...e,"paymentTerms.splitPayContents.legal.interestAndSplitPay",i,"paymentTerms.splitPayContents.legal.caResidentsNotice"];case"split_pay":return[...e,"paymentTerms.splitPayContents.legal.splitPayOnly","paymentTerms.splitPayContents.legal.caResidentsNotice"];case"interest_only":return[...e,"paymentTerms.splitPayContents.legal.interestOnly",i,"paymentTerms.splitPayContents.legal.caResidentsNotice"];case"ineligible":return["paymentTerms.splitPayContents.legal.ineligible","paymentTerms.splitPayContents.legal.caResidentsNotice"];default:return[]}}case"GB":return 0===a.length||1===a.length&&"split_pay"===a[0]||a.includes("split_pay")&&a.includes("interest")?["paymentTerms.splitPayContents.legal.topVariant1GB","paymentTerms.splitPayContents.legal.bottomGB"]:a.includes("split_pay")||a.includes("zero_percent")?["paymentTerms.splitPayContents.legal.topVariant2GB","paymentTerms.splitPayContents.legal.bottomGB"]:["paymentTerms.splitPayContents.legal.topVariant3GB","paymentTerms.splitPayContents.legal.bottomGB"];default:return[]}},ge=({countryCode:e,minIneligibleMessageType:n,numberOfPaymentTerms:t,fullPrice:a,priceRange:r})=>{const i=(null==r?void 0:r.minPrice)?ne(r.minPrice):null,s=a?ne(a):null;if(!i||!(null==r?void 0:r.maxPrice))return"";if(!s||s<i){let a="paymentTerms.splitPayContents.subtitle.ineligibleMin";if("GB"===e)return"paymentTerms.splitPayContents.subtitle.ineligibleMinGB";2!==t&&1!==t||(a="paymentTerms.splitPayContents.subtitle.ineligibleMinOverTime");return"monthly"===n?"paymentTerms.splitPayContents.subtitle.ineligibleMonthlyPaymentsMin":a}return"paymentTerms.splitPayContents.subtitle.ineligibleMax"},ve=j(((e,n)=>{const{translate:t}=I(),{variantInfo:a,checkoutUrl:i}=V(),l=!1===(null==a?void 0:a.available),o=r((()=>{i&&d.location.assign(i)}),[i]),c=s((()=>t(l?"paymentTerms.buttons.unavailable":"paymentTerms.buttons.continueToCheckout")),[l,t]);return h(x,{className:"flex w-full justify-center rounded-xs border-none px-4 py-2-5 text-white",disabled:l,onClick:o,ref:n,children:c})})),be=()=>{const{countryCode:e,isModalOpen:n,metaType:t,modalToken:a,variantInfo:i,checkoutUrl:s,loanTypes:l,showNewBuyerIncentive:o}=V(),{translate:c}=I(),{trackModalAction:p}=$(),m=ae(),d=r((()=>{!1!==(null==i?void 0:i.available)&&p({modalToken:a,action:"continue_to_checkout"})}),[a,p,i]);return h("div",{"data-testid":"sample-plans-modal-content",children:[h(pe,{}),"checkout"!==t&&s&&h(N,{children:[n&&h("div",{"data-testid":"sample-plans-modal-continue-to-checkout-button",className:"mt-4 w-full",onClick:d,children:h(ve,{})}),h("div",{className:"my-1 flex flex-col items-center text-caption font-light leading-normal",children:"GB"!==e&&h(N,{children:[h("p",{className:"text-center font-light",children:c("paymentTerms.samplePlansContent.informationShared")}),h("p",{className:"text-center font-light",children:c("paymentTerms.samplePlansContent.checkingEligibility")})]})})]}),h("p",{id:"eligibility-approval","data-testid":"eligibility-approval",className:"mb-5 mt-4 text-caption font-light tracking-wider text-grayscale-d0 "+("GB"===e?"whitespace-pre-line":""),children:[o&&"US"===e&&h(N,{children:[c("paymentTerms.samplePlansContent.legal.newBuyerIncentive")," "]}),(()=>{if("GB"===e){return fe({countryCode:e,lendersLink:h(N,{}),modalType:"split_pay",loanTypes:l}).map((e=>"string"==typeof e?c(e):c(e[0],e[1]))).filter(Boolean).join("\n\n")}return c(`paymentTerms.samplePlansContent.legal.${e}`,m)})()]}),h(le,{})]})};function _e(){return h("svg",{width:"24",height:"23",viewBox:"0 0 24 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.50007 1.75H1.49998L1.00009 1.75006C0.585878 1.75011 0.250051 1.41437 0.25 1.00015C0.249949 0.585939 0.585695 0.250112 0.999908 0.250061L1.49991 0.25L1.5 1L1.50002 0.25H1.51311H1.51348C1.60834 0.25 1.67335 0.25 1.73339 0.251921C3.38955 0.30492 4.81459 1.43859 5.2386 3.04043C5.25374 3.09762 5.26814 3.15991 5.28894 3.25006H18.6991L18.7343 3.25006C19.4332 3.25005 20.0078 3.25004 20.4666 3.29105C20.9376 3.33315 21.3794 3.42424 21.7696 3.66818C22.3554 4.03436 22.7819 4.60761 22.9643 5.27392C23.0859 5.71779 23.0461 6.16714 22.9511 6.63038C22.8586 7.08156 22.6935 7.63185 22.4927 8.30123L22.4926 8.30135L22.4825 8.33509L21.7446 10.7948L21.7002 10.943C21.3758 12.0263 21.152 12.7735 20.695 13.3442C20.2929 13.8462 19.7685 14.2364 19.1721 14.4772C18.4941 14.751 17.7142 14.7506 16.5833 14.7501L16.4287 14.7501H10.8185H10.7906C10.708 14.7501 10.6273 14.7501 10.5486 14.75H6C5.30964 14.75 4.75 15.3096 4.75 16C4.75 16.6904 5.30964 17.25 6 17.25H9H17H21C21.4142 17.25 21.75 17.5858 21.75 18C21.75 18.4142 21.4142 18.75 21 18.75H19.4501C19.6419 19.125 19.75 19.5499 19.75 20C19.75 21.5188 18.5188 22.75 17 22.75C15.4812 22.75 14.25 21.5188 14.25 20C14.25 19.5499 14.3581 19.125 14.5499 18.75H11.4501C11.6419 19.125 11.75 19.5499 11.75 20C11.75 21.5188 10.5188 22.75 9 22.75C7.48122 22.75 6.25 21.5188 6.25 20C6.25 19.5499 6.35814 19.125 6.54985 18.75H6C4.48122 18.75 3.25 17.5188 3.25 16C3.25 14.4812 4.48122 13.25 6 13.25H6.38649C6.37639 13.2365 6.36636 13.223 6.35643 13.2093C6.10823 12.8689 5.94942 12.4926 5.81487 12.0573C5.68495 11.637 5.56482 11.1164 5.41687 10.4752L5.41059 10.448L3.96151 4.16871L3.83136 3.60468C3.80594 3.49453 3.79699 3.45619 3.78854 3.42426C3.53414 2.46316 2.67911 1.78295 1.68541 1.75115C1.65241 1.7501 1.61306 1.75 1.50009 1.75H1.50007ZM14.0097 13.2501C14.0064 13.25 14.0032 13.25 14 13.25H10.585C10.0156 13.2496 9.60256 13.2464 9.26886 13.222C8.9006 13.1951 8.68018 13.1449 8.50372 13.0696C8.1306 12.9105 7.80746 12.6534 7.56847 12.3256C7.45545 12.1706 7.35701 11.9671 7.24797 11.6143C7.13614 11.2525 7.0279 10.7855 6.87218 10.1107L5.6351 4.75006H18.6991C19.4419 4.75006 19.949 4.75077 20.333 4.78509C20.7125 4.81901 20.8783 4.87997 20.9745 4.94011C21.2408 5.10656 21.4347 5.36713 21.5176 5.67C21.5475 5.77944 21.5583 5.9558 21.4817 6.32899C21.4043 6.70666 21.2592 7.19257 21.0458 7.90406L20.3078 10.3638C19.9206 11.6546 19.7753 12.093 19.5241 12.4065C19.2829 12.7078 18.9683 12.9419 18.6104 13.0864C18.2379 13.2368 17.7763 13.2501 16.4287 13.2501H14.0097ZM9 18.75C8.30964 18.75 7.75 19.3096 7.75 20C7.75 20.6904 8.30964 21.25 9 21.25C9.69036 21.25 10.25 20.6904 10.25 20C10.25 19.3096 9.69036 18.75 9 18.75ZM17 18.75C16.3096 18.75 15.75 19.3096 15.75 20C15.75 20.6904 16.3096 21.25 17 21.25C17.6904 21.25 18.25 20.6904 18.25 20C18.25 19.3096 17.6904 18.75 17 18.75Z",fill:"#0C0C14"})})}function Ce(){return h("svg",{viewBox:"0 0 21 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h("path",{d:"M17.364 1H2.636C1.733 1 1 1.784 1 2.75v10.5c0 .966.733 1.75 1.636 1.75h14.728c.903 0 1.636-.784 1.636-1.75V2.75C19 1.784 18.267 1 17.364 1ZM1 6h18M13 11h2",stroke:"#0B0B0C","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})}function Te(){return h("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h("g",{"clip-path":"url(#clip0_909_11391)",children:[h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.75 2.5C6.64 2.5 2.5 6.64 2.5 11.75C2.5 16.86 6.64 21 11.75 21C16.86 21 21 16.86 21 11.75C21 6.64 16.86 2.5 11.75 2.5ZM1 11.75C1 5.81 5.81 1 11.75 1C17.69 1 22.5 5.81 22.5 11.75C22.5 17.69 17.69 22.5 11.75 22.5C5.81 22.5 1 17.69 1 11.75Z",fill:"#0C0C14"}),h("path",{d:"M13.1001 12.6599H8.57007C8.16007 12.6599 7.82007 12.3199 7.82007 11.9099C7.82007 11.4999 8.16007 11.1599 8.57007 11.1599H13.1001C13.5101 11.1599 13.8501 11.4999 13.8501 11.9099C13.8501 12.3199 13.5101 12.6599 13.1001 12.6599Z",fill:"#0C0C14"}),h("path",{d:"M14.4901 16.42H8.87012C8.46012 16.42 8.12012 16.08 8.12012 15.67C8.12012 15.26 8.46012 14.92 8.87012 14.92C8.97012 14.92 9.02012 14.9 9.09012 14.83C9.30012 14.62 9.55012 14.03 9.53012 12.41L9.50012 9.63996C9.49012 8.95996 9.75012 8.31996 10.2301 7.82996C10.7101 7.33996 11.3501 7.07996 12.0301 7.07996H12.8001C13.5001 7.07996 14.1801 7.37996 14.6501 7.88996C14.9301 8.18996 14.9101 8.66996 14.6101 8.94996C14.3101 9.22996 13.8301 9.20996 13.5501 8.90996C13.3501 8.69996 13.0901 8.57996 12.8001 8.57996H12.0301C11.7501 8.57996 11.4901 8.68996 11.3001 8.88996C11.1101 9.08996 11.0001 9.34996 11.0101 9.62996L11.0401 12.41C11.0401 13.22 11.0101 14.16 10.7401 14.93H14.5001C14.9101 14.93 15.2501 15.27 15.2501 15.68C15.2501 16.09 14.9101 16.43 14.5001 16.43L14.4901 16.42Z",fill:"#0C0C14"})]}),h("defs",{children:h("clipPath",{id:"clip0_909_11391",children:h("rect",{width:"21.5",height:"21.5",fill:"white",transform:"translate(1 1)"})})})]})}function Pe(){return h("svg",{viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h("path",{d:"M18.5 10.547c0 4.72-3.9 8.577-8.75 8.577S1 15.267 1 10.547s3.9-8.576 8.75-8.576 8.75 3.857 8.75 8.576Z",stroke:"#0B0B0C","stroke-width":"2"}),h("path",{d:"M11.488 8.07a1 1 0 1 0 1.4-1.429l-1.4 1.428ZM10.04 6.556v1-1Zm-2.908 5.877a1 1 0 1 0-1.266 1.547l1.266-1.547Zm5.054-5.079.7-.714V6.64l-.002-.001-.003-.003-.006-.006-.017-.016a2.497 2.497 0 0 0-.21-.176 4.31 4.31 0 0 0-2.609-.881v2a2.31 2.31 0 0 1 1.45.516l.007.006-.003-.003-.002-.003c-.001 0-.002 0-.002-.002h-.001l-.001-.001.7-.715Zm-2.146-1.798c-1.916 0-3.137.48-3.846 1.279-.704.793-.695 1.68-.695 1.938h2c0-.185.01-.406.19-.61.177-.2.726-.607 2.35-.607v-2ZM5.5 8.774c0 1.24 1.314 2.773 4.54 2.773v-2c-2.686 0-2.54-1.127-2.54-.773h-2Zm4.54 2.773c1.273 0 1.687.373 1.813.525a.64.64 0 0 1 .139.296v.012l.002.01.004.048c.001.007.006.05.018.104.005.02.022.098.065.192a1.8 1.8 0 0 0 .172.26c.121.113.491.296.739.327v-2c.247.03.617.213.738.326.062.075.146.207.172.26.043.094.06.173.064.191.013.054.018.097.018.103l.003.03.001.01v-.002l-.001-.013a2.413 2.413 0 0 0-.08-.448 2.64 2.64 0 0 0-.514-.982c-.609-.734-1.667-1.249-3.352-1.249v2Zm2.952 1.774c-.277-.04-.653-.242-.76-.349a1.802 1.802 0 0 1-.139-.212c-.035-.073-.054-.134-.059-.15a.971.971 0 0 1-.03-.138L12 12.444v.003c0 .019 0 .057-.005.107a.893.893 0 0 1-.12.359c-.106.176-.466.624-1.834.624v2c1.867 0 2.985-.66 3.547-1.592a2.894 2.894 0 0 0 .402-1.697 1.371 1.371 0 0 0-.041-.216.992.992 0 0 0-.06-.15 1.8 1.8 0 0 0-.139-.213c-.106-.106-.482-.31-.758-.348v2Zm-2.951.216c-.738 0-1.46-.26-2.031-.554a6.269 6.269 0 0 1-.872-.546l-.007-.005h.001v.001h.001l-.633.774a158.25 158.25 0 0 0-.631.776l.002.002.007.006a2.646 2.646 0 0 0 .093.072c.06.044.143.106.248.178.21.143.508.332.875.52.72.372 1.768.777 2.947.777v-2Z",fill:"#0B0B0C"}),h("path",{d:"M9.75 4.961v11.173",stroke:"#0B0B0C","stroke-width":"2","stroke-linecap":"round"})]})}const we=()=>{const e=V(),{lendersLink:n}=ae(),{pricePerTerm:t,minPrice:a,maxPrice:i,fullPrice:l,showNewBuyerIncentive:o}=e,{translate:c}=I(),{trackModalAction:p}=$(),{subTitle:m,legalCopy:d}=s((()=>{const{subTitleKey:r,legalCopyKeys:s}=(({countryCode:e,eligible:n,fullPrice:t,lendersLink:a,loanTypes:r,minIneligibleMessageType:i,numberOfPaymentTerms:s,priceRange:l,showNewBuyerIncentive:o})=>{var c;const p=de({eligible:n,loanTypes:r}),m=ge({countryCode:e,fullPrice:t,priceRange:l,numberOfPaymentTerms:s,minIneligibleMessageType:i});return{subTitleKey:null!==(c=ue({modalType:p,numberOfPaymentTerms:s,countryCode:e}))&&void 0!==c?c:m,legalCopyKeys:fe({countryCode:e,lendersLink:a,modalType:p,loanTypes:r,showNewBuyerIncentive:o})}})(Object.assign(Object.assign({},e),{lendersLink:n,priceRange:{minPrice:a,maxPrice:null!=i?i:""},showNewBuyerIncentive:o})),p=e.loanTypes.includes("split_pay")&&"GB"===e.countryCode?te({currencyCode:"GBP",price:ne(l)/3}):t;return{subTitle:c(r,{payInInstalments:h("span",{className:"font-bold",dangerouslySetInnerHTML:{__html:c("paymentTerms.banner.payInInstalmentsGB")}}),price:h("span",{className:"font-bold",dangerouslySetInnerHTML:{__html:l}}),splitPayLoanRepayment:h("span",{className:"font-bold",dangerouslySetInnerHTML:{__html:p}}),minPrice:h("span",{className:"font-bold",dangerouslySetInnerHTML:{__html:a}}),maxPrice:h("span",{dangerouslySetInnerHTML:{__html:null!=i?i:""}})}),legalCopy:s.map((e=>{if(Array.isArray(e)){const[n,t]=e;return c(n,t)}return c(e)})).filter(Boolean).join("GB"===e.countryCode?"\n\n":" ")}}),[e,l,n,i,a,t,o,c]),u=s((()=>{const n=de(e),t=c("paymentTerms.splitPayContents.chooseYourPlanAtCheckout");if(["adaptive","split_pay"].includes(n))return[{description:t,icon:h(_e,{})},{description:"GB"===e.countryCode?c("paymentTerms.splitPayContents.knowExactlyWhatYoullPay"):c("paymentTerms.splitPayContents.interestFees"),icon:"GB"===e.countryCode?h(Te,{}):h(Pe,{})},{description:"GB"===e.countryCode?c("paymentTerms.splitPayContents.noCreditImpact"):c("paymentTerms.splitPayContents.interestCredit"),icon:h(Ce,{})}];return[{description:"GB"===e.countryCode?c("paymentTerms.splitPayContents.knowExactlyWhatYoullPay"):c("paymentTerms.splitPayContents.noInterestFees"),icon:"GB"===e.countryCode?h(Te,{}):h(Pe,{})},{description:"GB"===e.countryCode?c("paymentTerms.splitPayContents.noCreditImpact"):c("paymentTerms.splitPayContents.noInterestCredit"),icon:h(Ce,{})}]}),[e,c]),y=r((()=>{var n;(null===(n=e.variantInfo)||void 0===n?void 0:n.available)&&p({modalToken:e.modalToken,action:"continue_to_checkout"})}),[e.modalToken,p,e.variantInfo]),f="GB"===e.countryCode&&"checkout"!==e.metaType&&e.checkoutUrl&&1===e.loanTypes.length&&"interest"===e.loanTypes[0];return h(N,{children:[h("p",{className:"mb-7 text-subtitle leading-snug",style:{fontSize:"100%"},"data-testid":"split-pay-subtitle",children:m}),h("ul",{"data-testid":"split-pay-content",className:"m-0 list-none p-0",children:u.map(((e,n)=>h("li",{className:"flex items-center pb-2",children:[h("div",{className:"box-content w-6 flex-none pr-3",children:e.icon}),h("span",{className:"m-0",children:e.description})]},`split-pay-item-list-item=${n+1}`)))}),f&&h(N,{children:e.isModalOpen&&h(N,{children:[h("p",{className:"my-7 text-subtitle leading-snug",style:{whiteSpace:"wrap"},"data-testid":"split-pay-subtitle",children:c("paymentTerms.splitPayContents.subtitle.informationalChoice",{payInInstalments:h("span",{className:"font-bold",dangerouslySetInnerHTML:{__html:c("paymentTerms.banner.payInInstalmentsGB")}})})}),h("div",{"data-testid":"sample-plans-modal-continue-to-checkout-button",className:"mt-4 w-full",onClick:y,children:h(ve,{})})]})}),h("p",{id:"eligibility-approval",className:"mb-5 mt-4 text-caption font-light tracking-wider text-grayscale-d0 "+("GB"===e.countryCode?"whitespace-pre-line":""),children:d}),h(le,{})]})},Ie=()=>{const{modalToken:e,modalVariant:n,isModalOpen:t,closeModal:a,countryCode:i,loanTypes:l}=V(),{translate:o}=I(),{trackModalAction:c}=$(),p=r((()=>{c({modalToken:e,action:"close"}),a()}),[e,a,c]),m=s((()=>{switch(n){case"prequal":return h(me,{onClose:p});case"samplePlans":return h(be,{});default:return h(we,{})}}),[p,n]),d=s((()=>1===l.length&&"split_pay"===l[0]||l.includes("interest")&&l.includes("split_pay")?o("paymentTerms.installmentsModal.titleGB"):l.includes("zero_percent")?o("paymentTerms.installmentsModal.title"):o("paymentTerms.installmentsModal.titleInformational")),[l,o]),u=s((()=>"GB"===i?d:o("paymentTerms.installmentsModal.title")),[i,d,o]);return h(Z,{variant:"default",visible:t,onDismiss:p,headerLogo:h(q,{className:"size-8 text-purple-primary"}),headerTitle:u,children:h("section",{"data-testid":"shopify-payment-terms-modal",className:"w-[432px] max-w-full p-8 pt-0 font-system text-grayscale-d2/70",children:[h("div",{hidden:!0,id:"shopify-payment-terms-modal-warning-text",children:o("paymentTerms.installmentsModal.newWindow")}),m]})})};function ke({containerStyles:e,onLoaded:n,onReady:t}){const{instanceId:i}=O(),{authorizeUrl:s}=C({analyticsContext:"loginWithShopPrequal",analyticsTraceId:i,disableSignUp:!0,flow:"prequal",flowVersion:"prequalAmount",hideCopy:!0,isCompactLayout:!1,proxy:!0,requireVerification:!1}),{translate:l}=I(),o=_(null),[c,p]=a(!1),[m,d]=a(!1),[u,y]=a(!1),[f,g]=a("loading"),{destroy:v}=S({onCustomFlowSideEffect:({fontAssetLoaded:e=!1,shopPayInstallmentsOnboarded:n=!1})=>{p(e),y(n),g("confirmed")},onError:()=>{g("error"),null==t||t({shopPayInstallmentsOnboarded:!1,fontLoaded:!1})},onLoaded:({userFound:e})=>{"loading"===f&&(d(e),g("loaded"))},onResizeIframe:({height:e,width:n})=>{o.current&&(o.current.style.height=`${e}px`,o.current.style.width=`${n}px`),"confirmed"===f&&g("ready")},source:o}),b=r((()=>{var n;e&&B({contentWindow:null===(n=null==o?void 0:o.current)||void 0===n?void 0:n.contentWindow,event:{type:"setcomponentstyle",style:e}})}),[e]);return k((()=>{b()}),[e,b]),k((()=>{"ready"===f&&(null==t||t({shopPayInstallmentsOnboarded:u,fontLoaded:c}))}),[t,f,u,c,m]),k((()=>{"loaded"===f&&(null==n||n({userFound:m}),b())}),[f,n,b,m]),k((()=>{const e=o.current;return()=>{e&&v()}}),[v]),h("div",{"data-testid":"container",className:"mr-0.5 flex flex-row content-center items-center gap-x-1",children:[h("span",{"data-testid":"content",children:l("paymentTerms.prequalAmount.purchasingPower",{defaultValue:"Your purchasing power is"})}),h("iframe",{className:"m-0 inline-block size-0 border-0 p-0","data-testid":"prequal-amount-iframe",ref:o,src:s,title:String(l("paymentTerms.prequalAmount.authorizeIframeLabel",{defaultValue:"Shop Pay Installments pre-qualification amount"})),tabIndex:-1}),h("span",{className:"-ml-1 inline-block",children:"."})]})}const xe=()=>{const{dataLoaded:e,eligible:n,fullPrice:t,isLegacyBanner:i,pricePerTerm:l,minPrice:m,maxPrice:u,loanTypes:y,metaType:f,minIneligibleMessageType:g,financingTermForBanner:v,backgroundColor:b,numberOfPaymentTerms:_,countryCode:C,isEligibleForPrequalification:T,hasZeroInterestLoanType:P,isInAdaptiveRangeWithoutZeroInterest:w,canShowSamplePlanModalContent:k,openModal:x,samplePlans:N,showPrequalAmount:S,setShowPrequalAmount:B,setPrequalAmountLoaded:M}=V(),{element:j}=O(),[q,E]=a(!1);$();const{translate:A}=I(),G=Boolean(t&&n&&ne(t)>=50),F=s((()=>Boolean(t&&ne(t)<150)),[t]),z=s((()=>N.some((e=>"interest"===e.loanType&&0===e.apr&&12===e.numberOfPaymentTerms))),[N]),H=s((()=>{var e;if(!S)return;const n=null===(e=null==j?void 0:j.shadowRoot)||void 0===e?void 0:e.querySelector("#prequalAmountContainer");if(!n)return;const t=d.getComputedStyle(n);return{color:t.color,fontSize:t.fontSize,fontFamily:t.fontFamily,letterSpacing:t.letterSpacing,fontFace:J(t.fontFamily)}}),[j,S]),Z=s((()=>{const e=(e=>{const n=[255,255,255],t=e.startsWith("#")?o(e):c(e),a=t.length>=3?t:n;return p(a,[90,49,244])>p(a,n)?"text-purple-primary":"text-white"})(b);return h("div",{className:L("inline-flex align-middle",e),children:h(se,{className:"h-[14px] w-[59px]"})})}),[b]),R=r((()=>{let e="paymentTerms.banner.nonEligibleMin";"GB"===C?e="paymentTerms.banner.nonEligibleMinOverTimeGB":"monthly"===g?e="paymentTerms.banner.nonEligibleMonthlyPaymentsMin":2===_?e="paymentTerms.banner.nonEligibleMinOverTime":1===_&&(e="paymentTerms.banner.nonEligibleMinOverTime30");const n=A(e,{minPrice:h("span",{className:"font-bold",dangerouslySetInnerHTML:{__html:m}}),shopPayLogo:Z});if(!t||!u)return n;return ne(t)>ne(u)?A("paymentTerms.banner.nonEligibleMax",{maxPrice:h("span",{className:"font-bold",dangerouslySetInnerHTML:{__html:u}}),shopPayLogo:Z}):n}),[C,g,_,A,m,Z,t,u]),W=s((()=>{const e=h("span",{className:"font-bold",children:l});if(y.includes("split_pay")&&y.includes("interest")){const e=h("span",{className:"font-bold",children:te({currencyCode:"GBP",price:ne(t)/3})});return A("paymentTerms.banner.splitPayEligible3GB",{price:e,shopPayLogo:Z})}if(y.includes("split_pay")&&y.includes("zero_percent"))return A("paymentTerms.banner.splitPayEligible3AllZeroInterestGB",{price:e,shopPayLogo:Z});if(y.includes("zero_percent")&&z){const e=h("span",{className:"font-bold",children:te({currencyCode:"GBP",price:ne(t)/12})});return A("paymentTerms.banner.zeroInterestEligibleZeroApr",{price:e,shopPayLogo:Z})}if(y.includes("zero_percent")){const e=h("span",{className:"font-bold",children:te({currencyCode:"GBP",price:ne(t)/6})});return A("paymentTerms.banner.zeroInterestBasicGB",{price:e,shopPayLogo:Z})}if(1===y.length&&"interest"===y[0])return A("paymentTerms.banner.informational",{shopPayLogo:Z});if(y.includes("split_pay")){const e=h("span",{className:"font-bold",children:te({currencyCode:"GBP",price:ne(t)/3})});return A("paymentTerms.banner.splitPayEligible3GB",{price:e,shopPayLogo:Z})}return R()}),[y,l,z,R,t,A,Z]),U=s((()=>{const e=h("span",{className:"font-bold",children:l});if(v&&P){const n=0===v.apr;return A(n?"paymentTerms.banner.zeroInterestEligibleZeroApr":"paymentTerms.banner.zeroInterestEligible",{price:e,shopPayLogo:Z})}if(v&&w)return A("paymentTerms.banner.payIn4OrAsLowAsEligible",{price:e,shopPayLogo:Z});if(y.includes("split_pay")){let n="paymentTerms.banner.splitPayEligible";return 2===_?n="paymentTerms.banner.splitPayEligible2":1===_&&(n="paymentTerms.banner.splitPayEligible30"),A(n,{price:e,shopPayLogo:Z})}return y.includes("interest")?i?A("paymentTerms.banner.interestOnlyEligible",{shopPayLogo:Z}):A("paymentTerms.banner.dynamicInterestOnlyEligible",{price:e,shopPayLogo:Z}):R()}),[y,l,v,P,w,R,A,Z,_,i]),D=s((()=>"checkout"===f?"":y.length?"GB"===C?W:U:R()),[C,W,U,f,y,R]),K=s((()=>A(T?"paymentTerms.banner.prequal":n&&k?"paymentTerms.banner.viewSamplePlans":"paymentTerms.banner.learnMore")),[T,n,k,A]),Y=A(F?"paymentTerms.banner.learnMore":"paymentTerms.banner.prequalContents.prequalifiedSeePlans"),X=r((({userFound:e})=>{e?B(!0):M(!0)}),[M,B]),Q=r((({shopPayInstallmentsOnboarded:e,fontLoaded:n})=>{M(!0),e&&G&&(B(!0),n&&E(!0))}),[G,M,B]),ee=r((e=>{x(e.currentTarget)}),[x]);if(!e)return null;const ae="checkout"!==f&&!i&&"US"===C;return h("div",{className:L("m-0",q?"":"font-system","flex flex-col gap-2"),id:"shopify-installments","data-testid":"shopify-installments",children:[h("p",{children:[h("span",{className:"pr-1.5",id:"shopify-installments-content","data-testid":"shopify-installments-content",children:D}),h("span",{className:"relative inline-flex overflow-hidden",children:[h("span",{className:L("inline-flex items-center",S&&"absolute translate-y-full animate-fade-out"),id:"prequalBackupCTA",children:h("button",{type:"button","aria-haspopup":"dialog",className:"m-0 cursor-pointer border-0 bg-transparent p-0 font-inherit underline",id:"shopify-installments-cta","data-testid":"shopify-installments-cta",tabIndex:S?-1:0,onClick:ee,children:K})}),ae&&h("span",{className:L("inline-flex min-w-max items-center gap-0.5",S?"animate-slide-up":"absolute translate-y-full"),id:"prequalAmountContainer",children:[h(ke,{containerStyles:H,onLoaded:X,onReady:Q}),h("button",{type:"button","aria-haspopup":"dialog",className:"m-0 cursor-pointer border-0 bg-transparent p-0 font-inherit underline",onClick:ee,"data-testid":"shopify-installments-prequal-cta",tabIndex:S?0:-1,children:Y})]})]})]}),h(Ie,{})]})};const Ne=e=>{const n=Math.max(...e.terms.map((e=>e.installments_count)));return e.terms.find((e=>e.installments_count===n))},Se=({fullPrice:e,financingPlans:n})=>{if(!n||0===n.length||!e)return[];const t=ne(e),a=Oe({price:t,financingPlans:n});if(!a)return[];const r=new Set;return a.terms.forEach((e=>{"split_pay"===e.loan_type?r.add("split_pay"):0===e.apr?r.add("zero_percent"):r.add("interest")})),Array.from(r)},Be=({variantId:e,variants:n})=>{var t,a;return null!==(a=null===(t=n.find((n=>Number(n.id)===e)))||void 0===t?void 0:t.full_price)&&void 0!==a?a:""},Me={boundless:".cart__subtotal",brooklyn:".cart__subtotal",dawn:".totals__subtotal-value, .sections.cart.new_subtotal",debut:".cart-subtotal__price",express:".cart__subtotal, .cart-drawer__subtotal-value",minimal:".h5.cart__subtotal-price",narrative:".cart-subtotal__price, .cart-drawer__subtotal-number",simple:".cart__subtotal.h3",supply:".h1.cart-subtotal--price",venture:".CartSubtotal"},Le=e=>e?Number.parseInt(e,10):void 0;function je({currencyCode:e,financingPlans:n,variantId:t,variants:a}){const r=a.find((e=>Number(e.id)===t));if(!r||!r.full_price)return"";const i=r.full_price,s=ne(i),l=Oe({price:s,financingPlans:n});if(!l)return r.price_per_term;const o=Ne(l);return qe({currencyCode:e,price:s,term:o})}const qe=({currencyCode:e,price:n,term:t})=>{const a=t.apr/1200,r=t.installments_count;if(0===a)return te({currencyCode:e,price:n/r});const i=n*a*Math.pow(1+a,r),s=Math.pow(1+a,r)-1;return te({currencyCode:e,price:i/s})},Oe=({financingPlans:e,price:n})=>e.find((e=>{const t=ne(e.min_price),a=ne(e.max_price);return n>=t&&n<=a})),Ee={product:["variants","max_price","min_price","financing_plans"],cart:["min_price","max_price","price_per_term","eligible","number_of_payment_terms","full_price","financing_plans"],checkout:["min_price","max_price","price_per_term","eligible","number_of_payment_terms","full_price","financing_plans"]};function Ae(e,n){return n.every((n=>n in e))}function Ge(e,n){return null!=e&&("cart"===e.type||"checkout"===e.type?ze(e,n):function(e,n){var t;const a=ze(e,n);if(!a)return!1;const r=(null===(t=e.variants)||void 0===t?void 0:t.length)>0&&Ae(e.variants[0],["id","price_per_term","eligible","full_price","available"]);if(!r)return null==n||n("product",JSON.stringify(e)),!1;return!0}(e,n))}function Fe(e,n){return null!=e&&("cart"===(null==e?void 0:e.type)?function(e,n){const t=Ae(e,["min_price","max_price","price","eligible","number_of_payment_terms","available_loan_types"]);t||n("cart",JSON.stringify(e))}(e,n):function(e,n){var t;const a=Ae(e,["variants","max_price","min_price","number_of_payment_terms"]),r=(null===(t=e.variants)||void 0===t?void 0:t.length)>0&&Ae(e.variants[0],["id","price","eligible","available_loan_types","available"]);a&&r||n("product",JSON.stringify(e))}(e,n),Ae(e,["min_price","max_price"]))}function ze(e,n){const t=Ee[null==e?void 0:e.type];return!(!t||!Ae(e,t))||(null==n||n(null==e?void 0:e.type,JSON.stringify(e)),!1)}function He({metaType:e,numberOfPaymentTerms:n,onPriceChange:t}){const a=r((e=>{if(!isNaN(e))return Math.floor(e/n*100)/100}),[n]);k((()=>{if("product"===e)return;const n=(()=>{var e,n,t,a,r;const i=null===(t=null===(n=null===(e=d.Shopify)||void 0===e?void 0:e.theme)||void 0===n?void 0:n.name)||void 0===t?void 0:t.toLowerCase(),s=null!==(a=Me[i])&&void 0!==a?a:null;s||l.querySelector("[data-cart-subtotal]")||null===(r=console.warn)||void 0===r||r.call(console,"[Shop Pay Installments] Cart price updates may not be handled automatically for this theme. To ensure the price shown in the Shop Pay Installments banner is updated correctly, follow the instructions found here: https://shopify.dev/themes/pricing-payments/installments#updating-the-banner-with-cart-total-changes");return s})(),r=new MutationObserver((e=>{e.forEach((e=>{if(e.target.nodeType!==Node.ELEMENT_NODE)return;const r=e.target;if((r.matches("[data-cart-subtotal]")||n&&r.matches(n))&&r.textContent){const e=ne(r.textContent);if(e){a(e)&&t(r.textContent)}}}))}));return r.observe(l,{attributes:!0,childList:!0,subtree:!0}),()=>r.disconnect()}),[e,t,a])}const Ze=({children:e,shopifyMeta:n,variantId:t,showNewBuyerIncentive:i})=>{const{notify:o}=v(),{trackElementImpression:c,trackInstallmentsBannerImpression:p,trackInstallmentsBannerPrequalInteraction:m,trackInvalidInstallmentBannerMetadata:u,trackInstallmentsPrequalPopupPageImpression:y,trackModalOpened:f}=$(),{element:g}=O(),[b,_]=a(!1),[C,T]=a(!0),[P,w]=a(!1),[I,x]=a(void 0),[N,S]=a(A()),[B,M]=a(""),[L,j]=a(!1),[q,z]=a(t),[H,Z]=a(),[V,U]=a(!1),[D,J]=a(!1);k((()=>{q!==t&&z(t)}),[t]);const K=s((()=>C?"shop-pay-banner":"shop-pay-installments-banner"),[C]),Y=s((()=>{var e;if(!n)return;let t;try{t=JSON.parse(n)}catch(n){return void(null===(e=console.warn)||void 0===e||e.call(console,"[Shop Pay Installments] Error parsing metadata",n))}try{if(Ge(t,(()=>u(t.type,n))))return _(!0),T(!1),t;if(Fe(t,(()=>u(t.type,n))))return _(!0),T(!0),t}catch(e){if(e instanceof TypeError&&e.message.match("Failed to construct 'HTMLElement': This instance is already constructed"))return void console.error(e);e instanceof Error&&o(e,{metadata:{component:{name:"shop-pay-installments-banner",shopifyMeta:n,variantId:q}}})}}),[o,n,u,q]),X=s((()=>{var e;return null!==(e=null==Y?void 0:Y.type)&&void 0!==e?e:R.metaType}),[null==Y?void 0:Y.type]),Q=s((()=>Y&&"financing_plans"in Y?(e=>{var n;const t=null!==(n=null==e?void 0:e[0])&&void 0!==n?n:null;return t?t.terms.map((e=>"split_pay"===e.loan_type?"split_pay":0===e.apr?"zero_percent":"interest")):[]})(Y.financing_plans):[]),[Y]),ee=s((()=>(e=>e&&(e.includes("interest")&&!e.includes("split_pay")||e.includes("zero_percent"))?"monthly":"split_pay")(Q)),[Q]),ae=s((()=>G(g)),[g]),{canShowSamplePlanModalContent:re,countryCode:ie,currencyCode:se,financingTermForBanner:le,hasZeroInterestLoanType:oe,installmentPlans:ce,installmentsBuyerPrequalificationEnabled:pe,isEligibleForPrequalification:me,isInAdaptiveRangeWithoutZeroInterest:ue,loanTypes:ye,maxPrice:he,minPrice:fe,numberOfPaymentTerms:ge,pricePerTerm:ve,sellerId:be,variantAvailable:_e}=s((()=>{var e,n;if(!Y)return R;const t=function({extract:e,meta:n}){const t={};return e.forEach((e=>{if(n[e]){const a=E(e);t[a]=n[e]}})),t}({extract:["country_code","currency_code","installments_buyer_prequalification_enabled","max_price","min_price","seller_id"],meta:Y});let{eligible:a,financingTermForBanner:r,fullPrice:i,installmentPlans:s,loanTypes:l,numberOfPaymentTerms:o,pricePerTerm:c,variantAvailable:p}=R;const m="product"===X;if(m&&C&&q){const n=Y,t=n.variants.find((e=>Number(e.id)===Number(q)));a=!!t&&t.eligible,l=t&&null!==(e=t.available_loan_types)&&void 0!==e?e:[],o=n.number_of_payment_terms,c=t?t.price:""}if(m&&!C&&q){const e=Y,n=function({currencyCode:e,financingPlans:n,variantId:t,variants:a}){const r=a.find((e=>Number(e.id)===t));if(!r||!r.full_price)return{eligible:!1,financingTermForBanner:null,fullPrice:"",loanTypes:[],pricePerTerm:"",variantAvailable:!1};const i=Be({variantId:t,variants:a}),s=ne(i),l=Oe({financingPlans:n,price:s});return{eligible:r.eligible,financingTermForBanner:l?Ne(l):null,fullPrice:i,loanTypes:Se({fullPrice:i,financingPlans:n}),pricePerTerm:je({currencyCode:e,financingPlans:n,variantId:t,variants:a}),variantAvailable:r.available}}({currencyCode:e.currency_code,financingPlans:e.financing_plans,variants:e.variants,variantId:q});a=n.eligible,r=n.financingTermForBanner,i=n.fullPrice,l=n.loanTypes,o=(({variantId:e,variants:n})=>{const t=n.find((n=>Number(n.id)===e));return(null==t?void 0:t.number_of_payment_terms)||4})({variantId:Number(q),variants:e.variants}),c=n.pricePerTerm,p=n.variantAvailable}if("cart"===X&&C){const e=Y;a=e.eligible,l=null!==(n=e.available_loan_types)&&void 0!==n?n:[],o=e.number_of_payment_terms,c=e.price}if(("cart"===X||"checkout"===X)&&!C){const e=Y;i=e.full_price;const n=e.financing_plans,t=Se({fullPrice:i,financingPlans:n}),s=(({price:e,financingPlans:n})=>{const t=ne(e),a=Oe({price:t,financingPlans:n});if(a)return Ne(a)})({financingPlans:n,price:i});a=e.eligible,r=null!=s?s:null,l=null!=t?t:[],o=s?s.installments_count:e.number_of_payment_terms,c=s?qe({currencyCode:e.currency_code,price:ne(e.full_price),term:s}):e.price_per_term}const d=l.includes("zero_percent"),u=a&&!d&&2===l.length&&l.includes("split_pay")&&l.includes("interest");s=Y&&"financing_plans"in Y?(({currencyCode:e,financingPlans:n,isInAdaptiveRangeWithoutZeroInterest:t,totalPrice:a})=>{if(!a)return[];const r=ne(a),i=Oe({price:r,financingPlans:n});if(!i)return[];const s=(({terms:e,isInAdaptiveRangeWithoutZeroInterest:n})=>{if(e.length<3)return e;if(n)return[e[0],e[e.length-1]];const t=e.filter((e=>"split_pay"!==e.loan_type));return t.length<3?t:[t[0],t[t.length-1]]})({terms:i.terms,isInAdaptiveRangeWithoutZeroInterest:t}).map((n=>({pricePerTerm:qe({currencyCode:e,price:r,term:n}),apr:n.apr,numberOfPaymentTerms:n.installments_count,loanType:n.loan_type})));return s})({currencyCode:Y.currency_code,totalPrice:i,financingPlans:Y.financing_plans,isInAdaptiveRangeWithoutZeroInterest:u}):[];const y=Boolean(a&&t.installmentsBuyerPrequalificationEnabled&&"US"===t.countryCode),h=1===l.length&&"interest"===l[0],f=Boolean((null==s?void 0:s.length)&&i&&l.includes("zero_percent")),g=Boolean((null==s?void 0:s.length)&&i&&(d||h||u)),v="GB"===t.countryCode?f:g;return j(a),M(i),Object.assign(Object.assign({},t),{canShowSamplePlanModalContent:v,financingTermForBanner:r,hasZeroInterestLoanType:d,isEligibleForPrequalification:y,isInAdaptiveRangeWithoutZeroInterest:u,installmentPlans:s,loanTypes:l,numberOfPaymentTerms:o,pricePerTerm:c,variantAvailable:p})}),[C,X,Y,q]),Ce=s((()=>re?ue?"pay_in_4_or_as_low_as":"as_low_as":"pay_in_4"),[re,ue]),Te=s((()=>function({installmentPlans:e=[],fullPrice:n="",currencyCode:t}){return("GBP"===t&&e.some((e=>0===e.apr))?e.filter((e=>0===e.apr)):e).map((({pricePerTerm:e,apr:a,numberOfPaymentTerms:r,loanType:i})=>{const s=ne(e)*r,l=ne(n);return{apr:a,interest:te({currencyCode:t,price:0===a?0:s-l}),loanType:i,numberOfPaymentTerms:r,pricePerTerm:e,totalPriceWithInterest:te({currencyCode:t,price:0===a?l:s})}}))}({currencyCode:se,installmentPlans:ce,fullPrice:B})),[se,ce,B]),Pe=s((()=>{let e="splitPay";return me?e="prequal":re&&(e="samplePlans"),e}),[re,me]),we=s((()=>{switch(Pe){case"prequal":return(({eligible:e,loanTypes:n,samplePlans:t})=>{if(!n.length||!e)return"ineligible";if(t.some((e=>0===e.apr&&"interest"===e.loanType)))return t.every((e=>0===e.apr))?"zero_interest_only":"zero_interest";return(null==t?void 0:t.some((e=>"split_pay"===e.loanType)))&&(null==t?void 0:t.some((e=>"interest"===e.loanType)))?"adaptive":"interest_only"})({samplePlans:Te,loanTypes:ye,eligible:L});case"samplePlans":return(e=>{if(e.some((e=>0===e.apr&&"interest"===e.loanType)))return e.every((e=>0===e.apr))?"zero_interest_only":"zero_interest";return e.some((e=>"split_pay"===e.loanType))&&e.some((e=>"interest"===e.loanType))?"adaptive":"interest_only"})(Te);default:return de({eligible:L,loanTypes:ye})}}),[L,ye,Pe,Te]),Ie=r((e=>{if(!fe||!he)return!1;const n=ne(fe),t=ne(he);return e>=n&&e<=t}),[fe,he]);He({metaType:X,numberOfPaymentTerms:ge,onPriceChange:e=>{M(e),j(Ie(ne(e)))}}),k((()=>{b&&(p({bannerContent:Ce,bannerTemplateCodeSignature:C?"customized_by_merchant":"standard",eligible:L,hasPrequalLink:me,origin:X,price:B,variantId:q}),c({elementType:X,elementName:K}))}),[Ce,b,K,L,B,me,C,X,c,p,q]),k((()=>{var e;if("checkout"===X){const n=null===(e=null==g?void 0:g.shadowRoot)||void 0===e?void 0:e.querySelector("#shopify-installments");null==n||n.classList.add("inline")}}),[null==g?void 0:g.shadowRoot,X]),k((()=>{if("product"!==X)return;const e=null==g?void 0:g.closest("form"),n=null==e?void 0:e.elements,t=null==n?void 0:n.quantity;let a=null;if(!t){const n=null==e?void 0:e.getAttribute("id"),t=null==n?void 0:n.replace("product-form-installment-","");a=l.getElementById(`Quantity-${t}`)}const r=t||a,i=()=>{var e;const n=null!==(e=null==r?void 0:r.value)&&void 0!==e?e:1;Z({available:_e,idQuantityMapping:`${q}:${n}`})};return null==r||r.addEventListener("change",i),null==r||r.addEventListener("input",i),i(),()=>{null==r||r.removeEventListener("change",i),null==r||r.removeEventListener("input",i)}}),[g,X,_e,q]),k((()=>{if(!P)return;const e=A();S(e)}),[P]),k((()=>{if(!P)return;const e="splitPay"===Pe?"[]":JSON.stringify(Te);f({eligibleSpiPlanType:we,modalToken:N,origin:X,price:B,spiPlanDetails:e,variantId:q}),c({elementType:X,elementName:"shopify-installments-modal"}),me&&(m({bannerContent:Ce,eligible:L,origin:X,prequalLinkClicked:!0,price:B}),y({sellerId:Le(be),pageType:"prequal_intro_page_loaded"}))}),[Ce,L,B,me,X,P,N,we,Pe,Te,be,c,m,y,f,q]),k((()=>{const e=null==g?void 0:g.closest("form");if(!e)return;const n=(t=0)=>{if(t>4)return;const a=e.querySelector('select[name^="id"]')||e.querySelector('[name^="id"]'),r=new d.URL(d.location.href).searchParams.get("variant");let i;a&&(i=Number(a.value)),a||isNaN(Number(r))||(i=Number(r)),i&&(q===i?setTimeout((()=>n(t+1)),100):z(i))},t=()=>n();return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}}),[g,q]);const ke=s((()=>{if("checkout"===X)return null;const e=F({variants:null==H?void 0:H.idQuantityMapping,paymentOption:"shop_pay_installments",source:"installments_modal",sourceToken:N});return"#"===e?null:e}),[X,N,H]),xe=r((e=>{e&&x(e),w(!0)}),[w,x]),Me=r((()=>{I&&I.focus(),w(!1),x(void 0)}),[I]),Ee=s((()=>({backgroundColor:ae,bannerContent:Ce,canShowSamplePlanModalContent:re,checkoutUrl:ke,countryCode:ie,currencyCode:se,dataLoaded:b,eligible:L,financingTermForBanner:le,fullPrice:te({price:ne(B),currencyCode:se}),hasZeroInterestLoanType:oe,installmentPlans:ce,installmentsBuyerPrequalificationEnabled:pe,isEligibleForPrequalification:me,isInAdaptiveRangeWithoutZeroInterest:ue,isLegacyBanner:C,loanTypes:ye,maxPrice:he?te({price:ne(he),currencyCode:se}):void 0,metaType:X,minIneligibleMessageType:ee,minPrice:te({price:ne(fe),currencyCode:se}),isModalOpen:P,openModal:xe,closeModal:Me,modalToken:N,modalVariant:Pe,numberOfPaymentTerms:ge,pricePerTerm:ve,samplePlans:Te,sellerId:be,showNewBuyerIncentive:null!=i&&i&&"US"===ie,showPrequalAmount:V,prequalAmountLoaded:D,setShowPrequalAmount:U,setPrequalAmountLoaded:J,variantAvailable:_e,variantId:q,variantInfo:H})),[ae,Ce,re,ke,ie,se,b,L,le,B,oe,ce,pe,me,ue,C,ye,he,X,ee,fe,P,xe,Me,N,Pe,ge,ve,Te,be,i,V,D,_e,q,H]);return h(W.Provider,{value:Ee,children:e})};const Re=()=>(k((()=>{if(l.querySelector('style[data-description="shop-pay-installments-font-faces"]'))return;const e=l.createElement("style");e.dataset.description="shop-pay-installments-font-faces",e.appendChild(l.createTextNode("\n        @font-face {\n          font-family: 'InterVariable';\n          src: url('https://cdn.shopify.com/static/fonts/inter/v4/InterVariable.woff2') format('woff2');\n          font-weight: 100 900;\n          font-display: swap;\n          font-style: normal;\n          font-named-instance: 'Regular';\n        }")),l.head.appendChild(e)}),[]),h(xe,{})),We=e=>i(void 0,void 0,void 0,(function*(){return yield {paymentTerms:{shopPay:"Shop Pay",banner:{learnMore:"Learn more",viewSamplePlans:"View sample plans",prequal:"Check your purchasing power",payInInstallments:"Pay in Installments",payInInstalmentsGB:"Pay in Instalments",splitPayEligible:"Pay in 4 interest-free installments of {price} with {shopPayLogo}",splitPayEligible2:"Pay in 2 interest-free installments of {price} with {shopPayLogo}",splitPayEligible3GB:"Pay in 3 interest-free instalments of {price} with {shopPayLogo}",splitPayEligible3AllZeroInterestGB:"Pay in 3 instalments, or {price}/mo at 0% APR with {shopPayLogo}",splitPayEligible30:"Pay {price} within 30 days interest-free with {shopPayLogo}",interestOnlyEligible:"Split your purchase into monthly installments with {shopPayLogo}",dynamicInterestOnlyEligible:"From {price}/mo with {shopPayLogo}",payIn4OrAsLowAsEligible:"4 interest-free installments, or from {price}/mo with {shopPayLogo}",zeroInterestEligible:"From {price}/mo or 0% APR with {shopPayLogo}",zeroInterestEligibleZeroApr:"From {price}/mo at 0% APR with {shopPayLogo}",zeroInterestBasicGB:"{price}/mo at 0% APR with {shopPayLogo}",nonEligibleMin:"Pay in 4 interest-free installments for orders over {minPrice} with {shopPayLogo}",nonEligibleMinOverTime:"Pay over time for orders over {minPrice} with {shopPayLogo}",nonEligibleMinOverTimeGB:"Pay in 3 interest-free instalments for orders over {minPrice} with {shopPayLogo}",nonEligibleMinOverTime30:"Pay within 30 days interest-free for orders over {minPrice} with {shopPayLogo}",nonEligibleMonthlyPaymentsMin:"Split your purchase into monthly installments for orders over {minPrice} with {shopPayLogo}",nonEligibleMax:"Split your purchase into installments for orders up to {maxPrice} with {shopPayLogo}",informational:"Payments over 3, 6, or 12 months with {shopPayLogo}",prequalContents:{notPrequalifiedSeePlans:"Check your purchasing power",prequalifiedSeePlans:"See plans",purchasingPowerA:"Your purchasing power is ",purchasingPowerB:"Spend any amount up to "}},prequalAmount:{purchasingPower:"Your purchasing power is ",authorizeIframeLabel:"Shop Pay Installments pre-qualification amount"},installmentsModal:{affirm:"Affirm",title:"Get it now, pay later",titleGB:"Get it now, pay in 3",titleInformational:"Buy now, pay over time",close:"Close",newWindow:"Opens in a new window.",partnership:"Installments in partnership with {affirmLogo}",partnershipDisclaimer:"Installments in partnership with {affirmLogo}. Translation services are not provided by Affirm. Affirm and its offerings are only supported in {supportedLanguages}."},splitPayContents:{interestFees:"No hidden fees, ever.",interestCredit:"No impact on your credit score to apply.",noInterestFees:"No fees, ever.",noInterestCredit:"No impact on your credit score to apply.",knowExactlyWhatYoullPay:"Know exactly what you'll pay.",noCreditImpact:"No credit impact to apply.",chooseYourPlanAtCheckout:"Choose your plan at checkout.",subtitle:{interestAndSplitPay:"Choose your payment schedule at checkout - starting at 4 interest-free payments of {splitPayLoanRepayment} every 2 weeks.",interestOnly:"Choose your payment schedule at checkout to split your purchase into monthly installments.",splitPayOnly:"Select installments at checkout to split your purchase into 4 interest-free payments of {splitPayLoanRepayment} every 2 weeks.",splitPayOnly2:"Select installments at checkout to split your purchase into 2 interest-free payments of {splitPayLoanRepayment} every 15 days.",splitPayOnly3:"Based on a purchase of {price}, make 3 interest-free payments of {splitPayLoanRepayment}.",splitPayOnly30:"Select installments at checkout to pay for your purchase of {price} interest-free within 30 days.",ineligibleMin:"For orders over {minPrice}, select installments at checkout to split your purchase into 4 interest-free payments.",ineligibleMinGB:"Choose {payInInstalments} at checkout to split orders over {minPrice} into 3 interest-free payments.",ineligibleMinOverTime:"For orders over {minPrice}, select installments at checkout to split your purchase over time.",ineligibleMonthlyPaymentsMin:"For orders over {minPrice}, select installments at checkout to split your purchase into monthly payments.",ineligibleMax:"For orders up to {maxPrice}, select installments at checkout to split your purchase into multiple payments.",informational:"Payments over 3, 6, or 12 monthly instalments.",informationalChoice:"Choose {payInInstalments} at checkout."},legal:{CA:"The estimated payment amount excludes taxes and shipping. Payment options are offered by Affirm and are subject to an eligibility check and might not be available in all provinces and/or territories.",caResidentsNotice:"CA Residents: Loans by Affirm Loan Services, LLC are made or arranged pursuant to a California Finance Lender license.",ratesFromApr:"Rates from 0-36% APR. Payment options through Affirm are subject to an eligibility check, may not be available in all states, and are provided by these lending partners: {link}. Options depend on your purchase amount, and a down payment may be required.",interestAndSplitPay:"The estimated payment amount excludes taxes and shipping.",splitPayOnly:"The estimated payment amount excludes taxes and shipping. Payment options are offered by Affirm and are subject to an eligibility check and might not be available in all states.",ineligible:"Payment options are offered by Affirm and are subject to an eligibility check and might not be available in all states.",topVariant1GB:"Shop Pay Installments offers credit in partnership with Affirm as lender. Affirm provides unregulated credit, subject to a credit check and minimum spend, which may vary. Terms apply. UK residents only, 18 and over with a debit card. A deposit is required at checkout. Missed payments could affect your financial status.",topVariant2GB:"Shop Pay Installments offers credit in partnership with Affirm as lender. Affirm provides unregulated credit, subject to a credit check and minimum spend, which may vary. Terms apply. UK residents only, 18 and over with a debit card. A deposit may be required. Missed payments could affect your financial status.",topVariant3GB:"Shop Pay Installments offers credit in partnership with Affirm as lender. Affirm is a form of credit, subject to a credit check and minimum spend, which may vary. Terms apply. UK residents only, 18 and over with a debit card. A deposit may be required. Missed payments could affect your financial status.",bottomGB:"Shopify International Ltd. (FRN: 1031087) is an Appointed Representative of Affirm U.K. Limited, trading as Affirm, which is authorised and regulated by the Financial Conduct Authority (FRN: 756087). Affirm's Company Number is 10199101 and its registered office is at C/O TMF Group, 1 Angel Court, 13th Floor, London, EC2R 7HJ.",newBuyerIncentive:"Buyers who purchase with Shop Pay Installments for the first time may be eligible for 0% APR options that will be presented at checkout."}},samplePlansContent:{subtitle:{one:"Sample plan for {priceWithoutInterest} purchase",other:"Sample plans for {priceWithoutInterest} purchase"},legal:{US:"The estimated payment amount excludes taxes and shipping. Rates range from 0-36% APR. Payment options through Shop Pay Installments are subject to an eligibility check and are provided by these lending partners: {lendersLink}. Options depend on your purchase amount, and a down payment may be required. More options may be available upon approval. State notices to consumers: {licensesLink}.",CA:"The estimated payment amount excludes taxes and shipping. Rates range from 0-32% APR (subject to provincial regulatory limits). Payment options through Shop Pay Installments are subject to an eligibility check and approval. Options depend on your purchase amount, and a down payment may be required. More options may be available upon approval. Available in select provinces and/or territories. Visit {affirmCanadaHelpLink} for more info.",topVariant1GB:"Shop Pay Installments offers credit in partnership with Affirm as lender. Affirm provides unregulated credit, subject to a credit check and minimum spend, which may vary. Terms apply. UK residents only, 18 and over with a bank account or debit card. A deposit is required at checkout. Missed payments could affect your financial status.",topVariant2GB:"Shop Pay Installments offers credit in partnership with Affirm as lender. Affirm provides unregulated credit, subject to a credit check and minimum spend, which may vary. Terms apply. UK residents only, 18 and over with a bank account or debit card. A deposit may be required. Missed payments could affect your financial status.",topVariant3GB:"Shop Pay Installments offers credit in partnership with Affirm as lender. Affirm is a form of credit, subject to a credit check and minimum spend, which may vary. Terms apply. UK residents only, 18 and over with a bank account or debit card. A deposit may be required. Missed payments could affect your financial status.",bottomGB:"Shopify International Ltd. (FRN: 1031087) is an Appointed Representative of Affirm U.K. Limited, trading as Affirm, which is authorised and regulated by the Financial Conduct Authority (FRN: 756087). Affirm's Company Number is 10199101 and it's registered office is at C/O TMF Group, 1 Angel Court, 13th Floor, London, EC2R 7HJ.",newBuyerIncentive:"Buyers who purchase with Shop Pay Installments for the first time may be eligible for 0% APR options that will be presented at checkout."},continueToCheckout:"Continue to checkout",unavailable:"Unavailable",informationShared:"By continuing, your information will be shared with Affirm.",checkingEligibility:"Checking your qualification wont affect your credit.",interestDetails:"Interest ({apr}% APR)",costOfCredit:"Total cost of credit ({apr}% APR)",total:"Total",splitPayFrequency:"{pricePerTerm} {frequency}",otherFrequency:"{pricePerTerm} {frequency}",everyTwoWeeks:"every 2 weeks",monthly:"every month",splitPayNumberOfTerms:"for {numberOfTerms} weeks",otherNumberOfTerms:"for {numberOfTerms} months",inNumberOfPayments:"in {numberOfPayments} payments"},prequalContent:{processing:"Processing your request",processingTime:"This can take up to a minute...",authorizeIframeLabel:"Shop Pay Installments pre-qualification"},buttons:{check:"Check if you qualify",unavailable:"Unavailable",continueToCheckout:"Continue to checkout"},newBuyerIncentive:{title:"More 0% APR plans for qualifying first-time buyers"}}}}));z((e=>{var{element:n}=e,t=f(e,["element"]);return h(H,{element:n,featureName:"ShopifyPaymentTerms",getFeatureDictionary:We,children:h(Ze,Object.assign({},t,{children:h(Re,Object.assign({},t))}))})}),{name:"shopify-payment-terms",props:{variantId:"number",shopifyMeta:"string",showNewBuyerIncentive:"boolean"},shadow:"open"});
//# sourceMappingURL=client.payment-terms_LwMAj3Ei.en.esm.js.map
